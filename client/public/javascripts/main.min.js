angular.module("ticketSystem",["ngRoute","textAngular","yangular-grid","yg-modal","ngFlash","ui.router","yg-notification"]).service("authInterceptor",["$q","$injector","Authentication","HelperFactory",function(t,e,r,l){return{response:function(e){return 401===e.status&&(r.clearUser(),l.setLoading(!1)),e||t.when(e)},responseError:function(s){return 401===s.status&&(r.clearUser(),e.get("$state").go("users-login.login"),l.setLoading(!1)),403===s.status&&(e.get("$state").go("ticket.my-tickets"),l.setLoading(!1)),t.reject(s)}}}]).config(["$httpProvider","$stateProvider","$urlRouterProvider",function(t,e,r){r.otherwise("/ticket/my-tickets"),e.state("ticket",{url:"/ticket",controller:"TicketsCtrl",templateUrl:"templates/tickets/tickets.html"}).state("ticket.my-tickets",{url:"/my-tickets",controller:"TicketsCtrl",templateUrl:"templates/tickets/view-my-tickets.html"}).state("ticket.to-me-tickets",{url:"/tome-tickets",controller:"TicketsCtrl",templateUrl:"templates/tickets/view-tome-tickets.html"}).state("ticket.all-tickets",{url:"/all-tickets",controller:"TicketsCtrl",templateUrl:"templates/tickets/view-all-tickets.html"}).state("ticket-new",{url:"/ticket/new",controller:"NewTicketCtrl",templateUrl:"templates/tickets/new-ticket.html"}).state("ticket-view",{url:"/ticket/view/:id",controller:"ViewTicketCtrl",templateUrl:"templates/tickets/view-ticket.html"}).state("ticket-edit",{url:"/ticket/edit/:id",controller:"EditTicketCtrl",templateUrl:"templates/tickets/edit-ticket.html"}).state("users-login",{url:"/users",controller:"MainLoginCtrl",templateUrl:"templates/users/user-login.html"}).state("users-login.login",{url:"/login",controller:"LoginCtrl",templateUrl:"templates/users/login.html"}).state("users-login.register",{url:"/register",controller:"RegisterCtrl",templateUrl:"templates/users/register.html"}).state("users-profile",{url:"/users/profile",controller:"ProfileCtrl",templateUrl:"templates/users/profile.html"}).state("users-register",{url:"/users/register",controller:"RegisterCtrl",templateUrl:"templates/users/register.html"}).state("admin-user-management",{url:"/admin/user-management",controller:"UsersListCtrl",templateUrl:"templates/admin/manage-users.html"}).state("auth-google",{url:"/auth/google/:id/:email",controller:"SetUserCtrl",templateUrl:"templates/users/set-username.html"}).state("admin-edit",{url:"/admin/edit/:username",controller:"EditUsersCtrl",templateUrl:"templates/admin/edit-user.html"}).state("admin-reset-password",{url:"/admin/reset-password/:id",controller:"ChangeUsersPasswordCtrl",templateUrl:"templates/admin/reset-password.html"}),t.interceptors.push("authInterceptor")}]);
angular.module("ticketSystem").directive("ygToggle",function(){return{restrict:"E",scope:{toggle:"="},replace:!0,template:'<div ng-show="loaded" class="toggle-button"><div class="toggle"></div></div>',link:function(e,t,l){var o=function(l){e.loaded=!0,l?t.addClass("is-active"):t.removeClass("is-active")};e.$watch("toggle.value",function(e,t){"undefined"!=typeof e&&o(e)}),t.on("click",function(){e.toggle.value=!e.toggle.value,o(e.toggle.value)})}}});
angular.module("ticketSystem").factory("TicketFactory",["$http",function(t){var e={};return e.createNewTicket=function(e){return t.post("tickets/new",e)},e.updateTicket=function(e,i){return t.put("tickets/"+e,i)},e.getTicketById=function(e){return t.get("tickets/"+e)},e.getInitialTicketData=function(e){return t.get("tickets/edit-ticket/initial-load/"+e)},e}]);
angular.module("ticketSystem").factory("CommonFactory",["$http",function(t){var e={};return e.getInitialStaticData=function(){return t.get("tickets/static-data")},e}]).filter("reverse",function(){return function(t){if(t)return t.slice().reverse()}});
angular.module("ticketSystem").factory("UserFactory",["$http",function(e){var t={};return t.login=function(t,r,n){return e.post("accounts/login",{username:t,password:r,remember:n})},t.logout=function(){return e.get("accounts/logout")},t.registerUser=function(t){return e.post("accounts/register",t)},t.getUserByUsername=function(t){return e.get("users/profile/"+t)},t.updateProfile=function(t){return e.post("users/profile/"+t.username,t)},t.setUsername=function(t){return e.post("accounts/set-username",t)},t.getAllUserDetails=function(){return e.get("admin/users-details")},t.getUserDetails=function(t){return e.get("admin/user-details/"+t)},t.updateUserDetails=function(t,r){return e.post("admin/update-user/"+t,r)},t.resetPassword=function(t,r){return e.post("admin/reset-password/"+t,r)},t}]);
angular.module("ticketSystem").factory("Authentication",function(){var t={};return t.getIsAuthenticated=function(){if(localStorage.getItem("ticketSystemUser"))return!0},t.setUser=function(t){localStorage.setItem("ticketSystemUser",JSON.stringify(t))},t.clearUser=function(){localStorage.removeItem("ticketSystemUser")},t.getUser=function(){return JSON.parse(localStorage.getItem("ticketSystemUser"))},t});
angular.module("ticketSystem").factory("HelperFactory",["Authentication",function(r){var e={},n=!1;return e.createErrorMessage=function(r){for(var e=[],n=0;n<r.length;n++)e.push(r[n].error);return e},e.setAllUsers=function(r){this.users=r},e.getAllUsers=function(){return this.users},e.getAllUsersButSelf=function(e){var n=r.getUser().username;return e.filter(function(r){return r.username!==n})},e.removeUserFromUsers=function(r,e){return r.filter(function(r){var n=e.indexOf(r.username)===-1;return n})},e.isCurrentUserAdmin=function(){var e=r.getUser();return e.role.indexOf("Admin")>-1},e.isCurrentUserSupport=function(){var e=r.getUser();return e.role.indexOf("Support")>-1},e.stripHtml=function(r){return r?String(r).replace(/<[^>]+>/gm,""):""},e.getLoading=function(){return n},e.setLoading=function(r){n=r},e}]);
angular.module("ticketSystem").factory("ActionFactory",["$http","$q",function(t,e){var n,o={};return o.setTask=function(t){n=t},o.getTask=function(){return n},o.getAssignees=function(){return t.get("static/all-users")},o.getAllowedStatus=function(e){return t.get("static/allowed-status/"+e)},o.getAllowedButtons=function(n){var o=e.defer();return t.get("static/action-buttons/"+n).then(function(t){var e={};e.assign=t.data.actionButtons.assign,e.comment=t.data.actionButtons.comment,e.changeStatus=t.data.actionButtons.changeStatus,e.reopen=t.data.actionButtons.reopen,e.close=t.data.actionButtons.close,e.acknowledge=t.data.actionButtons.acknowledge,e.awaitingUserResponse=t.data.actionButtons.awaitingUserResponse,o.resolve(e)}).catch(function(t){o.reject(t)}),o.promise},o.assign=function(e,n,o){return t.post("tickets/assign/"+e,{assignee:n,comment:o})},o.changeStatus=function(e,n,o){return t.post("tickets/change-status/"+e,{status:n,comment:o})},o.awaitingUserResponse=function(e,n){return t.post("tickets/awaiting-user-response/"+e,{comment:n})},o.reopen=function(e,n){return t.post("tickets/re-open/"+e,{comment:n})},o.close=function(e,n){return t.post("tickets/close/"+e,{comment:n})},o.addComment=function(e,n){return t.post("tickets/addComment/"+e,{comment:n})},o.deleteComment=function(e,n){return t.delete("tickets/deleteComment/"+e._id+"?commentId="+n._id)},o.acknowledgeTicket=function(e,n){return t.post("tickets/acknowledge/"+e,{comment:n})},o}]);
angular.module("ticketSystem").controller("MainCtrl",["$scope","$state","Authentication","UserFactory","$window","YgNotify","HelperFactory",function(e,t,i,n,o,r,g){var s=function(){var t=i.getUser();t.role.indexOf("Admin")>-1?e.isAdmin=!0:e.isAdmin=!1,e.isRegularUser=!0,(i.getUser().role.indexOf("Support")>-1||i.getUser().role.indexOf("Admin")>-1)&&(e.isRegularUser=!1)};e.init=function(){var t=i.getUser();t&&(t.role.indexOf("Admin")>-1?e.isAdmin=!0:e.isAdmin=!1)},e.getLoading=g.getLoading,e.$watch("getLoading()",function(t,i){e.loading=t}),e.getUser=i.getUser,e.isAuthenticated=i.getIsAuthenticated,e.logout=function(){n.logout().then(function(){i.clearUser(),t.go("users-login.login")})},e.$on("successful-login",s),e.getProfile=function(){t.go("users-profile")},o.app={},o.app.auth=function(e,n){""!==e?r.alert("danger",e.toString(),5e3):n.username&&""!==n.username?n&&(i.setUser(n),s(),t.go("ticket.my-tickets")):t.go("auth-google",{id:n._id.toString(),email:n.email})}}]);
angular.module("ticketSystem").controller("UsersListCtrl",["$scope","$state","$stateParams","HelperFactory","YgNotify",function(e,s,r,a,t){a.setLoading(!0);var i=function(){return""},n=function(e){return e===!0?"fa fa-check":"fa fa-remove"},o=function(){return""},u=function(e){return e.indexOf("Admin")>-1?"fa fa-check":"fa fa-remove"};e.config={},e.config.url="/admin/users-details",e.config.columns=[],e.config.columns.push({key:"username",name:"Username",cssClass:"col-md-6"}),e.config.columns.push({key:"isActive",name:"Is Active",cssClass:"col-md-3",render:i,renderClass:n}),e.config.columns.push({key:"role",name:"Is Admin",cssClass:"col-md-3",render:o,renderClass:u}),e.config.sortQuerystringParam="sort",e.config.orderQuerystringParam="order",e.config.pageQuerystringParam="page",e.config.sizeQuerystringParam="size",e.config.objectName="users",e.config.onRowClick=function(e){s.go("admin-edit",{username:e.username})},e.$watch("agLoading()",function(e,s){a.setLoading(e)})}]).controller("EditUsersCtrl",["$scope","$state","$stateParams","HelperFactory","UserFactory","YgNotify",function(e,s,r,a,t,i){e.isActive={},e.isAdmin={},e.userDetails={};var n=r.username;t.getUserDetails(n).then(function(s){a.setLoading(!1),e.userDetails.username=s.data.user.username,e.userDetails.firstname=s.data.user.firstname,e.userDetails.lastname=s.data.user.lastname,e.userDetails.id=s.data.user._id;var r=s.data.user.role;r.indexOf("Admin")>-1?e.userDetails.isAdmin=!0:e.userDetails.isAdmin=!1,e.userDetails.isActive=s.data.user.isActive,e.userDetails.email=s.data.user.email,e.isActive.key="isActive",e.isActive.value=e.userDetails.isActive,e.isAdmin.key="isAdmin",e.isAdmin.value=e.userDetails.isAdmin}).catch(function(e){a.setLoading(!1),i.alert("danger","There was some error trying to fetch user details. Please try again after some time.",5e3)}),e.userDetails.update=function(){return e.editUserForm.$invalid?(e.editUserForm.firstname.$touched=!0,e.editUserForm.lastname.$touched=!0,void(e.editUserForm.email.$touched=!0)):(a.setLoading(!0),e.userDetails.isAdmin=e.isAdmin.value,e.userDetails.isActive=e.isActive.value,void t.updateUserDetails(e.userDetails.username,e.userDetails).then(function(e){a.setLoading(!1),i.alert("success","User details updated successfully",5e3)}).catch(function(e){a.setLoading(!1),i.alert("danger","There was some error trying to update user details. Please try again after some time.",5e3)}))}}]).controller("ChangeUsersPasswordCtrl",["$scope","$state","$stateParams","HelperFactory","UserFactory","YgNotify",function(e,s,r,a,t,i){e.resetPassword={},e.resetPassword.reset=function(){if(e.resetUsersPasswordForm.$invalid)return e.resetUsersPasswordForm.password2.$touched=!0,void(e.resetUsersPasswordForm.password1.$touched=!0);a.setLoading(!0);var n=r.id;t.resetPassword(n,e.resetPassword).then(function(e){if(a.setLoading(!1),e.data.errors){var r=a.createErrorMessage(e.data.errors);r.forEach(function(e){i.alert("danger",e,5e3)})}else i.alert("success","Password has been reset successfully",5e3),s.go("admin-user-management")}).catch(function(e){a.setLoading(!1),i.alert("danger","The request could not ben made successfully. Please try later",5e3)})}}]);
angular.module("ticketSystem").controller("EditTicketCtrl",["$scope","$stateParams","$state","TicketFactory","YgNotify","HelperFactory","Authentication",function(t,e,a,r,i,c,n){t.toolbarConfig=[["h1","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],[],["insertLink"]],t.cancel=function(){a.go("ticket-view",{id:t.ticket.id})},t.renderDate=function(t){return new Date(Date.parse(t)).toLocaleDateString()},r.getTicketById(e.id).then(function(e){if(e.data.errors){a.go("ticket.my-tickets");var o=c.createErrorMessage(e.data.errors);o.forEach(function(t){i.alert("danger",t,5e3)})}else t.ticket=e.data,t.ticket.currentUser=n.getUser().username,r.getInitialTicketData(t.ticket.status).then(function(e){t.priorities=e.data.priorities.values,t.types=e.data.types.values,t.users=e.data.users,c.setAllUsers(t.users),t.statuses=e.data.statuses}).catch(function(t){console.log(t),i.alert("danger","An error occurred while trying to detch the static data.")})}).catch(function(t){console.log(t),i.alert("danger","An error occurred while trying to get ticket details. Please try again later.",5e3)}),t.update=function(){r.updateTicket(t.ticket._id,t.ticket).then(function(e){t.ticket=e.data,i.alert("success","Ticket updated successfully.",5e3),a.go("ticket-view",{id:e.data.id})}).catch(function(t){console.log(t),i.alert("danger","An error occurred while trying to update ticket details. Please try again later.",5e3)})}}]);
angular.module("ticketSystem").controller("NewTicketCtrl",["$scope","$state","TicketFactory","YgNotify","CommonFactory","HelperFactory",function(e,t,i,r,n,o){n.getInitialStaticData().then(function(t){e.newTicket.types=t.data.types.values,e.newTicket.type=e.newTicket.types[0].value}),e.newTicket={},e.toolbarConfig=[["h1","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],[],["insertLink"]],e.save=function(){return e.newTicketForm.$invalid?(e.newTicketForm.title.$touched=!0,void(e.newTicketForm.description.$touched=!0)):void i.createNewTicket({title:e.newTicket.title,description:e.newTicket.description,type:e.newTicket.type}).then(function(e){if(e.data.errors){var i=o.createErrorMessage(e.data.errors);i.forEach(function(e){r.alert("danger",e,5e3)})}else t.go("ticket-view",{id:e.data.id})},function(e){r.alert("danger","An error occurred while trying to create new ticket. Please try again later.",5e3),console.log(e)})}}]);
angular.module("ticketSystem").controller("TaskCtrl",["$scope","TaskFactory",function(a,t){console.log(t),a.getTask=t.getTask,a.task={},a.commentPartial="templates/partials/comments-partial.html",a.$watch("getTask()",function(t,s){switch(console.log(t),a.task.name="templates/partials/"+t+"-partial.html",t){case"comment":a.task.showTaskPanel=!0,a.task.title="Add new comment",a.task.showMainPanel=!1,a.task.showCommentsPanel=!0;break;case"assign":a.task.showTaskPanel=!0,a.task.title="Assign ticket",a.task.showMainPanel=!0,a.task.showCommentsPanel=!0}})}]);
angular.module("ticketSystem").controller("TicketsCtrl",["$scope","$state","agSortFactory","HelperFactory",function(e,t,n,i){e.isSupport=!1;var c=JSON.parse(localStorage.getItem("ticketSystemUser"));c&&(c.role.indexOf("Admin")>-1||c.role.indexOf("Support")>-1)&&(e.isSupport=!0);var o=function(e){return new Date(Date.parse(e)).toLocaleDateString()},s=function(e){return e?String(e).replace(/<[^>]+>/gm,""):""},a=function(e){return e?e:"Unassigned"};e.config={},e.config.columns=[],e.config.columns.push({key:"id",name:"ID",cssClass:"col-md-1"}),e.config.columns.push({key:"title",name:"Title",cssClass:"col-md-2"}),e.config.columns.push({key:"description",name:"Description",cssClass:"col-md-2",render:s}),e.config.columns.push({key:"type",name:"Type",cssClass:"col-md-1"}),e.config.columns.push({key:"assignee",name:"Assignee",cssClass:"col-md-2",render:a}),e.config.columns.push({key:"createdDate",name:"Created Date",cssClass:"col-md-2",render:o}),e.config.columns.push({key:"createdBy",name:"Created By",cssClass:"col-md-2"}),e.config.sortQuerystringParam="sort",e.config.orderQuerystringParam="order",e.config.pageQuerystringParam="page",e.config.sizeQuerystringParam="size",e.active="",e.agLoading=n.getLoading,e.config.onRowClick=function(e){t.go("ticket-view",{id:e.id})},e.config.objectName="tickets",e.initiateAllTicket=function(){e.config.url="/tickets/all",e.$parent.active="all"},e.initiateMyTicket=function(){e.config.url="/tickets/my",e.$parent.active="my"},e.initiateToMeTicket=function(){e.config.url="/tickets/to-me",e.$parent.active="tome"},e.$watch("agLoading()",function(e,t){i.setLoading(e)})}]);
angular.module("ticketSystem").controller("ViewTicketCtrl",["$scope","$stateParams","$state","TicketFactory","YgNotify","Authentication","HelperFactory","YgModal","ActionFactory",function(e,t,r,n,i,s,a,c,o){function u(e,t){switch(e=e||"",t.success=t.success||"",t.warning=t.warning||"",t.danger=t.danger||"",t.info=t.info||"",e.toLowerCase()){case t.success.toLowerCase():return"success";case t.warning.toLowerCase():return"warning";case t.danger.toLowerCase():return"danger";case t.info.toLowerCase():return"info";default:return"info"}}function d(e){return u(e,{success:"in-progress",warning:"open",info:"new",danger:"resolved"})}function g(e){return u(e,{success:"low",warning:"medium",danger:"high"})}function l(e){return e.assignee===e.currentUser||(e.createdBy===e.currentUser||(!!a.isCurrentUserAdmin()||!!a.isCurrentUserSupport()))}function f(e){return new Date(Date.parse(e)).toLocaleDateString()}a.setLoading(!0),n.getTicketById(t.id).then(function(t){if(t.data.errors){r.go("ticket.my-tickets");var n=a.createErrorMessage(t.data.errors);n.forEach(function(e){i.alert("danger",e,5e3)})}else e.ticket=t.data,e.ticket.description=a.stripHtml(e.ticket.description),e.ticket.assignee=e.ticket.assignee?e.ticket.assignee:"Unassigned",e.ticket.createdDate=f(e.ticket.createdDate),e.ticket.currentUser=s.getUser().username,e.statusClass=d(e.ticket.status),e.ticket.priority=e.ticket.priority||"N.A",e.priorityClass=g(e.ticket.priority),l(e.ticket)&&(e.showEdit=!0),a.setLoading(!1)}).catch(function(e){i.alert("danger","An error occurred while trying to get ticket details. Please try again later.",5e3),a.setLoading(!1)}),e.ticket={},e.edit=function(){r.go("ticket-edit",{id:e.ticket.id})};var k=function(t,r){return function(){a.setLoading(!0),o.deleteComment(t,r).then(function(t){e.ticket.comments=t.data.comments,i.alert("success","The comment was deleted successfully",5e3),a.setLoading(!1)}).catch(function(e){i.alert("danger","An error occurred while trying to delete comment. Please try again later.",5e3),a.setLoading(!1)})}};e.deleteComment=function(e,t){c.confirm(k(e,t)),c.open("Are you sure you want to do this?","This will delete the comment permanently")}}]);
angular.module("ticketSystem").controller("LoginCtrl",["$scope","$state","$window","UserFactory","Authentication",function(e,t,o,r,n){e.error=!1,e.message="",e.login=function(){r.login(e.username,e.password,e.remember).then(function(o){o.data.isAuthenticated?(n.setUser(o.data.user),e.$emit("successful-login"),t.go("ticket.my-tickets")):(e.error=!0,e.message=o.data.msg)}).catch(function(t){e.error=!0,e.message="An error occurred while trying to log you in. Please try again later"})},e.googleLogin=function(){var e="accounts/auth/google",t=600,r=450,n=(window.outerHeight-r)/2,i=(window.outerWidth-t)/2;o.open(e,"facebook_login","width="+t+",height="+r+",scrollbars=0,top="+n+",left="+i)}}]);
angular.module("ticketSystem").controller("MainLoginCtrl",["$rootScope","$scope","$state",function(t,e,n){e.statename=n.current.name,t.$on("$stateChangeStart",function(t,n,a,o,r){e.statename=n.name})}]);
angular.module("ticketSystem").controller("ProfileCtrl",["$scope","$state","Authentication","UserFactory","HelperFactory","YgNotify",function(e,a,r,t,s,n){s.setLoading(!0),e.user={},e.init=function(){t.getUserByUsername(r.getUser().username).then(function(r){if(r.data.errors){var t=s.createErrorMessage(r.data.errors);t.forEach(function(e){n.alert("danger",t,5e3)}),a.go("ticket.my-tickets"),s.setLoading(!1)}else e.user.firstname=r.data.user.firstname;e.user.lastname=r.data.user.lastname,e.user.username=r.data.user.username,e.user.email=r.data.user.email,s.setLoading(!1)})},e.update=function(){return e.profileForm.$invalid?(e.profileForm.firstname.$touched=!0,e.profileForm.lastname.$touched=!0,void(e.profileForm.email.$touched=!0)):(s.setLoading(!0),void t.updateProfile(e.user).then(function(a){e.user.firstname=a.data.user.firstname,e.user.lastname=a.data.user.lastname,e.user.username=a.data.user.username,e.user.email=a.data.user.email,e.user.role=a.data.user.role,r.setUser(e.user),n.alert("success","User details have been updated successfully",5e3),s.setLoading(!1)}).catch(function(e){n.alert("danger","There was some error trying to update user details. Please try again after some time.",5e3),s.setLoading(!1)}))}}]);
angular.module("ticketSystem").controller("RegisterCtrl",["$scope","$state","UserFactory","HelperFactory","YgNotify",function(e,r,t,s,a){e.newUser={},e.register=function(){t.registerUser(e.newUser).then(function(e){if(e.data.errors){var t=s.createErrorMessage(e.data.errors);t.forEach(function(e){a.alert("danger",e,5e3)})}else a.alert("success","User has been created successfully. You can now login.",5e3),r.go("users-login.login")}).catch(function(e){a.alert("danger","There was some error trying to create the user. Please try again after some time.",5e3)})}}]);
angular.module("ticketSystem").controller("SetUserCtrl",["$scope","$stateParams","$state","UserFactory","YgNotify","Authentication",function(e,t,r,s,a,n){var c=t.id,o=t.email;e.setUsername={},e.setUsername.email=o,e.saveUsername=function(){s.setUsername({id:c,username:e.setUsername.username}).then(function(t){if(t.data.errors){var s=HelperFactory.createErrorMessage(t.data.errors);s.forEach(function(e){a.alert("danger",e,5e3)})}else n.setUser(t.data.user),e.$emit("successful-login"),r.go("ticket.my-tickets"),a.alert("success","Username has been set successfully.",5e3)}).catch(function(e){a.alert("danger","There was some error trying to set the username. Please try again after some time.",5e3)})}}]);
angular.module("ticketSystem").controller("ActionsCtrl",["$scope","ActionFactory","HelperFactory","$rootScope",function(t,e,a,n){t.getTask=e.getTask,t.task={},t.task.showTaskPanel=!1,t.task.showMainPanel=!1,e.setTask(null),t.setSaveFn=function(e){t.saveTask=e},t.cancelTask=function(){e.setTask(null),t.task.comment="",t.task.showTaskPanel=!1,t.task.showMainPanel=!1},t.setSaveBtnName=function(e){t.saveBtnName=e},t.$watch("getTask()",function(e,n){if(e)switch(a.setLoading(!0),t.task.showTaskPanel=!0,t.task.showMainPanel=!0,t.task.name="templates/partials/action/"+e+"-action-partial.html",e){case"comment":t.task.title="Add new comment";break;case"awaitingusersresponse":t.task.title="Awaiting users response";break;case"close":t.task.title="Close ticket";break;case"reopen":t.task.title="Reopen ticket";break;case"acknowledge":t.task.title="Acknowledge ticket";break;case"assign":t.task.title="Assign ticket";break;case"changestatus":t.task.title="Change ticket status"}else t.task.name=null})}]).controller("AssignActionCtrl",["$scope","ActionFactory","YgNotify","HelperFactory",function(t,e,a,n){console.log("set assignee"),e.getAssignees().then(function(e){t.users=e.data.users,t.users=n.removeUserFromUsers(t.users,[t.ticket.createdBy,t.ticket.assignee]),t.assignee=t.users[0].username,n.setLoading(!1)}),t.setSaveFn(function(){return t.actionForm.comment.$invalid||t.actionForm.assignee.$invalid?(t.actionForm.comment.$touched=!0,void(t.actionForm.assignee.$touched=!0)):(n.setLoading(!0),void e.assign(t.ticket.id,t.assignee,t.task.comment).then(function(e){if(e.data.errors){var s=n.createErrorMessage(e.data.errors);return void s.forEach(function(t){a.alert("danger",t,5e3)})}t.ticket.comments=e.data.comments,t.ticket.assignee=e.data.assignee,a.alert("success","The assignee has been changed successfully",5e3),n.setLoading(!1),t.cancelTask()}).catch(function(e){a.alert("danger","There was some error trying to assign the ticket. Please try again after some time.",5e3),t.cancelTask(),n.setLoading(!1)}))}),t.setSaveBtnName("Assign Ticket")}]).controller("ChangeStatusActionCtrl",["$scope","ActionFactory","YgNotify","HelperFactory",function(t,e,a,n){var s=t.ticket.status;e.getAllowedStatus(s).then(function(e){console.log(e.data),t.allowedStatus=e.data.status.allowed,t.newStatus=t.allowedStatus[0],n.setLoading(!1)}),t.setSaveFn(function(){return t.actionForm.comment.$invalid||t.actionForm.newStatus.$invalid?(t.actionForm.comment.$touched=!0,void(t.actionForm.newStatus.$touched=!0)):(n.setLoading(!0),void e.changeStatus(t.ticket.id,t.newStatus,t.task.comment).then(function(e){t.ticket.comments=e.data.comments,t.ticket.status=e.data.status,a.alert("success","The assignee has been changed successfully",5e3),n.setLoading(!1),t.cancelTask()}).catch(function(e){a.alert("danger","There was some error trying to change the ticket status. Please try again after some time.",5e3),n.setLoading(!1),t.cancelTask()}))}),t.setSaveBtnName("Change Status")}]).controller("CommentActionCtrl",["$scope","ActionFactory","YgNotify","HelperFactory",function(t,e,a,n){n.setLoading(!1),t.setSaveFn(function(){return t.actionForm.comment.$invalid?void(t.actionForm.comment.$touched=!0):(n.setLoading(!0),void e.addComment(t.ticket.id,t.task.comment).then(function(e){t.ticket.comments=e.data.comments,a.alert("success","The comment has been added successfully",5e3),n.setLoading(!1),t.cancelTask()}).catch(function(e){a.alert("danger","There was some error trying to add comment. Please try again after some time.",5e3),n.setLoading(!1),t.cancelTask()}))}),t.setSaveBtnName("Add Comment")}]).controller("CloseActionCtrl",["$scope","ActionFactory","YgNotify","HelperFactory",function(t,e,a,n){n.setLoading(!1),t.setSaveFn(function(){return t.actionForm.comment.$invalid?void(t.actionForm.comment.$touched=!0):(n.setLoading(!0),void e.close(t.ticket.id,t.task.comment).then(function(e){t.ticket.comments=e.data.comments,t.ticket.status=e.data.status,a.alert("success","The status has been changed successfully",5e3),n.setLoading(!1),t.cancelTask()}).catch(function(e){a.alert("danger","There was some error trying to change the ticket status. Please try again after some time.",5e3),n.setLoading(!1),t.cancelTask()}))}),t.setSaveBtnName("Close")}]).controller("ReopenActionCtrl",["$scope","ActionFactory","YgNotify","HelperFactory",function(t,e,a,n){n.setLoading(!1),t.setSaveFn(function(){return t.actionForm.comment.$invalid?void(t.actionForm.comment.$touched=!0):(n.setLoading(!0),void e.reopen(t.ticket.id,t.task.comment).then(function(e){t.ticket.comments=e.data.comments,t.ticket.status=e.data.status,a.alert("success","The status has been changed successfully",5e3),n.setLoading(!1),t.cancelTask()}).catch(function(e){a.alert("danger","There was some error trying to change the ticket status. Please try again after some time.",5e3),n.setLoading(!1),t.cancelTask()}))}),t.setSaveBtnName("Reopen")}]).controller("AwaitingActionCtrl",["$scope","ActionFactory","YgNotify","HelperFactory",function(t,e,a,n){n.setLoading(!1),t.setSaveFn(function(){return t.actionForm.comment.$invalid?void(t.actionForm.comment.$touched=!0):(n.setLoading(!0),void e.awaitingUserResponse(t.ticket.id,t.task.comment).then(function(e){t.ticket.comments=e.data.comments,t.ticket.status=e.data.status,a.alert("success","The status has been changed successfully",5e3),n.setLoading(!1),t.cancelTask()}).catch(function(e){a.alert("danger","There was some error trying to change the ticket status. Please try again after some time.",5e3),n.setLoading(!1),t.cancelTask()}))}),t.setSaveBtnName("Change Status")}]).controller("AcknowledgeActionCtrl",["$scope","ActionFactory","YgNotify","HelperFactory",function(t,e,a,n){n.setLoading(!1),t.setSaveFn(function(){return t.actionForm.comment.$invalid?void(t.actionForm.comment.$touched=!0):(n.setLoading(!0),void e.acknowledgeTicket(t.ticket.id,t.task.comment).then(function(e){t.ticket.comments=e.data.comments,t.ticket.status=e.data.status,a.alert("success","The status has been changed successfully",5e3),n.setLoading(!1),t.cancelTask()}).catch(function(e){a.alert("danger","There was some error trying to change the ticket status. Please try again after some time.",5e3),n.setLoading(!1),t.cancelTask()}))}),t.setSaveBtnName("Acknowledge Ticket")}]);
angular.module("ticketSystem").controller("ButtonGroupCtrl",["$scope","ActionFactory",function(t,o){t.buttongroup={},t.$watch("ticket.status",function(n){n&&o.getAllowedButtons(n).then(function(o){t.buttongroup.showAssign=o.assign,t.buttongroup.showComment=o.comment,t.buttongroup.showchangeStatus=o.changeStatus,t.buttongroup.showReopen=o.reopen,t.buttongroup.showClose=o.close,t.buttongroup.showAcknowledge=o.acknowledge,t.buttongroup.showAwaitingUsersResponse=o.awaitingUserResponse})}),t.buttongroup.comment=function(){o.setTask("comment")},t.buttongroup.assign=function(){o.setTask("assign")},t.buttongroup.changeStatus=function(){o.setTask("changestatus")},t.buttongroup.close=function(){o.setTask("close")},t.buttongroup.reopen=function(){o.setTask("reopen")},t.buttongroup.acknowledge=function(){o.setTask("acknowledge")},t.buttongroup.awaitingusersresponse=function(){o.setTask("awaitingusersresponse")}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJtYWluLm1pbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiLFtcIm5nUm91dGVcIixcInRleHRBbmd1bGFyXCIsXCJ5YW5ndWxhci1ncmlkXCIsXCJ5Zy1tb2RhbFwiLFwibmdGbGFzaFwiLFwidWkucm91dGVyXCIsXCJ5Zy1ub3RpZmljYXRpb25cIl0pLnNlcnZpY2UoXCJhdXRoSW50ZXJjZXB0b3JcIixbXCIkcVwiLFwiJGluamVjdG9yXCIsXCJBdXRoZW50aWNhdGlvblwiLFwiSGVscGVyRmFjdG9yeVwiLGZ1bmN0aW9uKHQsZSxyLGwpe3JldHVybntyZXNwb25zZTpmdW5jdGlvbihlKXtyZXR1cm4gNDAxPT09ZS5zdGF0dXMmJihyLmNsZWFyVXNlcigpLGwuc2V0TG9hZGluZyghMSkpLGV8fHQud2hlbihlKX0scmVzcG9uc2VFcnJvcjpmdW5jdGlvbihzKXtyZXR1cm4gNDAxPT09cy5zdGF0dXMmJihyLmNsZWFyVXNlcigpLGUuZ2V0KFwiJHN0YXRlXCIpLmdvKFwidXNlcnMtbG9naW4ubG9naW5cIiksbC5zZXRMb2FkaW5nKCExKSksNDAzPT09cy5zdGF0dXMmJihlLmdldChcIiRzdGF0ZVwiKS5nbyhcInRpY2tldC5teS10aWNrZXRzXCIpLGwuc2V0TG9hZGluZyghMSkpLHQucmVqZWN0KHMpfX19XSkuY29uZmlnKFtcIiRodHRwUHJvdmlkZXJcIixcIiRzdGF0ZVByb3ZpZGVyXCIsXCIkdXJsUm91dGVyUHJvdmlkZXJcIixmdW5jdGlvbih0LGUscil7ci5vdGhlcndpc2UoXCIvdGlja2V0L215LXRpY2tldHNcIiksZS5zdGF0ZShcInRpY2tldFwiLHt1cmw6XCIvdGlja2V0XCIsY29udHJvbGxlcjpcIlRpY2tldHNDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdGlja2V0cy90aWNrZXRzLmh0bWxcIn0pLnN0YXRlKFwidGlja2V0Lm15LXRpY2tldHNcIix7dXJsOlwiL215LXRpY2tldHNcIixjb250cm9sbGVyOlwiVGlja2V0c0N0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy90aWNrZXRzL3ZpZXctbXktdGlja2V0cy5odG1sXCJ9KS5zdGF0ZShcInRpY2tldC50by1tZS10aWNrZXRzXCIse3VybDpcIi90b21lLXRpY2tldHNcIixjb250cm9sbGVyOlwiVGlja2V0c0N0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy90aWNrZXRzL3ZpZXctdG9tZS10aWNrZXRzLmh0bWxcIn0pLnN0YXRlKFwidGlja2V0LmFsbC10aWNrZXRzXCIse3VybDpcIi9hbGwtdGlja2V0c1wiLGNvbnRyb2xsZXI6XCJUaWNrZXRzQ3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3RpY2tldHMvdmlldy1hbGwtdGlja2V0cy5odG1sXCJ9KS5zdGF0ZShcInRpY2tldC1uZXdcIix7dXJsOlwiL3RpY2tldC9uZXdcIixjb250cm9sbGVyOlwiTmV3VGlja2V0Q3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3RpY2tldHMvbmV3LXRpY2tldC5odG1sXCJ9KS5zdGF0ZShcInRpY2tldC12aWV3XCIse3VybDpcIi90aWNrZXQvdmlldy86aWRcIixjb250cm9sbGVyOlwiVmlld1RpY2tldEN0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy90aWNrZXRzL3ZpZXctdGlja2V0Lmh0bWxcIn0pLnN0YXRlKFwidGlja2V0LWVkaXRcIix7dXJsOlwiL3RpY2tldC9lZGl0LzppZFwiLGNvbnRyb2xsZXI6XCJFZGl0VGlja2V0Q3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3RpY2tldHMvZWRpdC10aWNrZXQuaHRtbFwifSkuc3RhdGUoXCJ1c2Vycy1sb2dpblwiLHt1cmw6XCIvdXNlcnNcIixjb250cm9sbGVyOlwiTWFpbkxvZ2luQ3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3VzZXJzL3VzZXItbG9naW4uaHRtbFwifSkuc3RhdGUoXCJ1c2Vycy1sb2dpbi5sb2dpblwiLHt1cmw6XCIvbG9naW5cIixjb250cm9sbGVyOlwiTG9naW5DdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdXNlcnMvbG9naW4uaHRtbFwifSkuc3RhdGUoXCJ1c2Vycy1sb2dpbi5yZWdpc3RlclwiLHt1cmw6XCIvcmVnaXN0ZXJcIixjb250cm9sbGVyOlwiUmVnaXN0ZXJDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdXNlcnMvcmVnaXN0ZXIuaHRtbFwifSkuc3RhdGUoXCJ1c2Vycy1wcm9maWxlXCIse3VybDpcIi91c2Vycy9wcm9maWxlXCIsY29udHJvbGxlcjpcIlByb2ZpbGVDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdXNlcnMvcHJvZmlsZS5odG1sXCJ9KS5zdGF0ZShcInVzZXJzLXJlZ2lzdGVyXCIse3VybDpcIi91c2Vycy9yZWdpc3RlclwiLGNvbnRyb2xsZXI6XCJSZWdpc3RlckN0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy91c2Vycy9yZWdpc3Rlci5odG1sXCJ9KS5zdGF0ZShcImFkbWluLXVzZXItbWFuYWdlbWVudFwiLHt1cmw6XCIvYWRtaW4vdXNlci1tYW5hZ2VtZW50XCIsY29udHJvbGxlcjpcIlVzZXJzTGlzdEN0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy9hZG1pbi9tYW5hZ2UtdXNlcnMuaHRtbFwifSkuc3RhdGUoXCJhdXRoLWdvb2dsZVwiLHt1cmw6XCIvYXV0aC9nb29nbGUvOmlkLzplbWFpbFwiLGNvbnRyb2xsZXI6XCJTZXRVc2VyQ3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3VzZXJzL3NldC11c2VybmFtZS5odG1sXCJ9KS5zdGF0ZShcImFkbWluLWVkaXRcIix7dXJsOlwiL2FkbWluL2VkaXQvOnVzZXJuYW1lXCIsY29udHJvbGxlcjpcIkVkaXRVc2Vyc0N0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy9hZG1pbi9lZGl0LXVzZXIuaHRtbFwifSkuc3RhdGUoXCJhZG1pbi1yZXNldC1wYXNzd29yZFwiLHt1cmw6XCIvYWRtaW4vcmVzZXQtcGFzc3dvcmQvOmlkXCIsY29udHJvbGxlcjpcIkNoYW5nZVVzZXJzUGFzc3dvcmRDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvYWRtaW4vcmVzZXQtcGFzc3dvcmQuaHRtbFwifSksdC5pbnRlcmNlcHRvcnMucHVzaChcImF1dGhJbnRlcmNlcHRvclwiKX1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmRpcmVjdGl2ZShcInlnVG9nZ2xlXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIsc2NvcGU6e3RvZ2dsZTpcIj1cIn0scmVwbGFjZTohMCx0ZW1wbGF0ZTonPGRpdiBuZy1zaG93PVwibG9hZGVkXCIgY2xhc3M9XCJ0b2dnbGUtYnV0dG9uXCI+PGRpdiBjbGFzcz1cInRvZ2dsZVwiPjwvZGl2PjwvZGl2PicsbGluazpmdW5jdGlvbihlLHQsbCl7dmFyIG89ZnVuY3Rpb24obCl7ZS5sb2FkZWQ9ITAsbD90LmFkZENsYXNzKFwiaXMtYWN0aXZlXCIpOnQucmVtb3ZlQ2xhc3MoXCJpcy1hY3RpdmVcIil9O2UuJHdhdGNoKFwidG9nZ2xlLnZhbHVlXCIsZnVuY3Rpb24oZSx0KXtcInVuZGVmaW5lZFwiIT10eXBlb2YgZSYmbyhlKX0pLHQub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7ZS50b2dnbGUudmFsdWU9IWUudG9nZ2xlLnZhbHVlLG8oZS50b2dnbGUudmFsdWUpfSl9fX0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuZmFjdG9yeShcIlRpY2tldEZhY3RvcnlcIixbXCIkaHR0cFwiLGZ1bmN0aW9uKHQpe3ZhciBlPXt9O3JldHVybiBlLmNyZWF0ZU5ld1RpY2tldD1mdW5jdGlvbihlKXtyZXR1cm4gdC5wb3N0KFwidGlja2V0cy9uZXdcIixlKX0sZS51cGRhdGVUaWNrZXQ9ZnVuY3Rpb24oZSxpKXtyZXR1cm4gdC5wdXQoXCJ0aWNrZXRzL1wiK2UsaSl9LGUuZ2V0VGlja2V0QnlJZD1mdW5jdGlvbihlKXtyZXR1cm4gdC5nZXQoXCJ0aWNrZXRzL1wiK2UpfSxlLmdldEluaXRpYWxUaWNrZXREYXRhPWZ1bmN0aW9uKGUpe3JldHVybiB0LmdldChcInRpY2tldHMvZWRpdC10aWNrZXQvaW5pdGlhbC1sb2FkL1wiK2UpfSxlfV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuZmFjdG9yeShcIkNvbW1vbkZhY3RvcnlcIixbXCIkaHR0cFwiLGZ1bmN0aW9uKHQpe3ZhciBlPXt9O3JldHVybiBlLmdldEluaXRpYWxTdGF0aWNEYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHQuZ2V0KFwidGlja2V0cy9zdGF0aWMtZGF0YVwiKX0sZX1dKS5maWx0ZXIoXCJyZXZlcnNlXCIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCl7aWYodClyZXR1cm4gdC5zbGljZSgpLnJldmVyc2UoKX19KTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmZhY3RvcnkoXCJVc2VyRmFjdG9yeVwiLFtcIiRodHRwXCIsZnVuY3Rpb24oZSl7dmFyIHQ9e307cmV0dXJuIHQubG9naW49ZnVuY3Rpb24odCxyLG4pe3JldHVybiBlLnBvc3QoXCJhY2NvdW50cy9sb2dpblwiLHt1c2VybmFtZTp0LHBhc3N3b3JkOnIscmVtZW1iZXI6bn0pfSx0LmxvZ291dD1mdW5jdGlvbigpe3JldHVybiBlLmdldChcImFjY291bnRzL2xvZ291dFwiKX0sdC5yZWdpc3RlclVzZXI9ZnVuY3Rpb24odCl7cmV0dXJuIGUucG9zdChcImFjY291bnRzL3JlZ2lzdGVyXCIsdCl9LHQuZ2V0VXNlckJ5VXNlcm5hbWU9ZnVuY3Rpb24odCl7cmV0dXJuIGUuZ2V0KFwidXNlcnMvcHJvZmlsZS9cIit0KX0sdC51cGRhdGVQcm9maWxlPWZ1bmN0aW9uKHQpe3JldHVybiBlLnBvc3QoXCJ1c2Vycy9wcm9maWxlL1wiK3QudXNlcm5hbWUsdCl9LHQuc2V0VXNlcm5hbWU9ZnVuY3Rpb24odCl7cmV0dXJuIGUucG9zdChcImFjY291bnRzL3NldC11c2VybmFtZVwiLHQpfSx0LmdldEFsbFVzZXJEZXRhaWxzPWZ1bmN0aW9uKCl7cmV0dXJuIGUuZ2V0KFwiYWRtaW4vdXNlcnMtZGV0YWlsc1wiKX0sdC5nZXRVc2VyRGV0YWlscz1mdW5jdGlvbih0KXtyZXR1cm4gZS5nZXQoXCJhZG1pbi91c2VyLWRldGFpbHMvXCIrdCl9LHQudXBkYXRlVXNlckRldGFpbHM9ZnVuY3Rpb24odCxyKXtyZXR1cm4gZS5wb3N0KFwiYWRtaW4vdXBkYXRlLXVzZXIvXCIrdCxyKX0sdC5yZXNldFBhc3N3b3JkPWZ1bmN0aW9uKHQscil7cmV0dXJuIGUucG9zdChcImFkbWluL3Jlc2V0LXBhc3N3b3JkL1wiK3Qscil9LHR9XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5mYWN0b3J5KFwiQXV0aGVudGljYXRpb25cIixmdW5jdGlvbigpe3ZhciB0PXt9O3JldHVybiB0LmdldElzQXV0aGVudGljYXRlZD1mdW5jdGlvbigpe2lmKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidGlja2V0U3lzdGVtVXNlclwiKSlyZXR1cm4hMH0sdC5zZXRVc2VyPWZ1bmN0aW9uKHQpe2xvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGlja2V0U3lzdGVtVXNlclwiLEpTT04uc3RyaW5naWZ5KHQpKX0sdC5jbGVhclVzZXI9ZnVuY3Rpb24oKXtsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcInRpY2tldFN5c3RlbVVzZXJcIil9LHQuZ2V0VXNlcj1mdW5jdGlvbigpe3JldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidGlja2V0U3lzdGVtVXNlclwiKSl9LHR9KTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmZhY3RvcnkoXCJIZWxwZXJGYWN0b3J5XCIsW1wiQXV0aGVudGljYXRpb25cIixmdW5jdGlvbihyKXt2YXIgZT17fSxuPSExO3JldHVybiBlLmNyZWF0ZUVycm9yTWVzc2FnZT1mdW5jdGlvbihyKXtmb3IodmFyIGU9W10sbj0wO248ci5sZW5ndGg7bisrKWUucHVzaChyW25dLmVycm9yKTtyZXR1cm4gZX0sZS5zZXRBbGxVc2Vycz1mdW5jdGlvbihyKXt0aGlzLnVzZXJzPXJ9LGUuZ2V0QWxsVXNlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51c2Vyc30sZS5nZXRBbGxVc2Vyc0J1dFNlbGY9ZnVuY3Rpb24oZSl7dmFyIG49ci5nZXRVc2VyKCkudXNlcm5hbWU7cmV0dXJuIGUuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiByLnVzZXJuYW1lIT09bn0pfSxlLnJlbW92ZVVzZXJGcm9tVXNlcnM9ZnVuY3Rpb24ocixlKXtyZXR1cm4gci5maWx0ZXIoZnVuY3Rpb24ocil7dmFyIG49ZS5pbmRleE9mKHIudXNlcm5hbWUpPT09LTE7cmV0dXJuIG59KX0sZS5pc0N1cnJlbnRVc2VyQWRtaW49ZnVuY3Rpb24oKXt2YXIgZT1yLmdldFVzZXIoKTtyZXR1cm4gZS5yb2xlLmluZGV4T2YoXCJBZG1pblwiKT4tMX0sZS5pc0N1cnJlbnRVc2VyU3VwcG9ydD1mdW5jdGlvbigpe3ZhciBlPXIuZ2V0VXNlcigpO3JldHVybiBlLnJvbGUuaW5kZXhPZihcIlN1cHBvcnRcIik+LTF9LGUuc3RyaXBIdG1sPWZ1bmN0aW9uKHIpe3JldHVybiByP1N0cmluZyhyKS5yZXBsYWNlKC88W14+XSs+L2dtLFwiXCIpOlwiXCJ9LGUuZ2V0TG9hZGluZz1mdW5jdGlvbigpe3JldHVybiBufSxlLnNldExvYWRpbmc9ZnVuY3Rpb24ocil7bj1yfSxlfV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuZmFjdG9yeShcIkFjdGlvbkZhY3RvcnlcIixbXCIkaHR0cFwiLFwiJHFcIixmdW5jdGlvbih0LGUpe3ZhciBuLG89e307cmV0dXJuIG8uc2V0VGFzaz1mdW5jdGlvbih0KXtuPXR9LG8uZ2V0VGFzaz1mdW5jdGlvbigpe3JldHVybiBufSxvLmdldEFzc2lnbmVlcz1mdW5jdGlvbigpe3JldHVybiB0LmdldChcInN0YXRpYy9hbGwtdXNlcnNcIil9LG8uZ2V0QWxsb3dlZFN0YXR1cz1mdW5jdGlvbihlKXtyZXR1cm4gdC5nZXQoXCJzdGF0aWMvYWxsb3dlZC1zdGF0dXMvXCIrZSl9LG8uZ2V0QWxsb3dlZEJ1dHRvbnM9ZnVuY3Rpb24obil7dmFyIG89ZS5kZWZlcigpO3JldHVybiB0LmdldChcInN0YXRpYy9hY3Rpb24tYnV0dG9ucy9cIituKS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBlPXt9O2UuYXNzaWduPXQuZGF0YS5hY3Rpb25CdXR0b25zLmFzc2lnbixlLmNvbW1lbnQ9dC5kYXRhLmFjdGlvbkJ1dHRvbnMuY29tbWVudCxlLmNoYW5nZVN0YXR1cz10LmRhdGEuYWN0aW9uQnV0dG9ucy5jaGFuZ2VTdGF0dXMsZS5yZW9wZW49dC5kYXRhLmFjdGlvbkJ1dHRvbnMucmVvcGVuLGUuY2xvc2U9dC5kYXRhLmFjdGlvbkJ1dHRvbnMuY2xvc2UsZS5hY2tub3dsZWRnZT10LmRhdGEuYWN0aW9uQnV0dG9ucy5hY2tub3dsZWRnZSxlLmF3YWl0aW5nVXNlclJlc3BvbnNlPXQuZGF0YS5hY3Rpb25CdXR0b25zLmF3YWl0aW5nVXNlclJlc3BvbnNlLG8ucmVzb2x2ZShlKX0pLmNhdGNoKGZ1bmN0aW9uKHQpe28ucmVqZWN0KHQpfSksby5wcm9taXNlfSxvLmFzc2lnbj1mdW5jdGlvbihlLG4sbyl7cmV0dXJuIHQucG9zdChcInRpY2tldHMvYXNzaWduL1wiK2Use2Fzc2lnbmVlOm4sY29tbWVudDpvfSl9LG8uY2hhbmdlU3RhdHVzPWZ1bmN0aW9uKGUsbixvKXtyZXR1cm4gdC5wb3N0KFwidGlja2V0cy9jaGFuZ2Utc3RhdHVzL1wiK2Use3N0YXR1czpuLGNvbW1lbnQ6b30pfSxvLmF3YWl0aW5nVXNlclJlc3BvbnNlPWZ1bmN0aW9uKGUsbil7cmV0dXJuIHQucG9zdChcInRpY2tldHMvYXdhaXRpbmctdXNlci1yZXNwb25zZS9cIitlLHtjb21tZW50Om59KX0sby5yZW9wZW49ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5wb3N0KFwidGlja2V0cy9yZS1vcGVuL1wiK2Use2NvbW1lbnQ6bn0pfSxvLmNsb3NlPWZ1bmN0aW9uKGUsbil7cmV0dXJuIHQucG9zdChcInRpY2tldHMvY2xvc2UvXCIrZSx7Y29tbWVudDpufSl9LG8uYWRkQ29tbWVudD1mdW5jdGlvbihlLG4pe3JldHVybiB0LnBvc3QoXCJ0aWNrZXRzL2FkZENvbW1lbnQvXCIrZSx7Y29tbWVudDpufSl9LG8uZGVsZXRlQ29tbWVudD1mdW5jdGlvbihlLG4pe3JldHVybiB0LmRlbGV0ZShcInRpY2tldHMvZGVsZXRlQ29tbWVudC9cIitlLl9pZCtcIj9jb21tZW50SWQ9XCIrbi5faWQpfSxvLmFja25vd2xlZGdlVGlja2V0PWZ1bmN0aW9uKGUsbil7cmV0dXJuIHQucG9zdChcInRpY2tldHMvYWNrbm93bGVkZ2UvXCIrZSx7Y29tbWVudDpufSl9LG99XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiTWFpbkN0cmxcIixbXCIkc2NvcGVcIixcIiRzdGF0ZVwiLFwiQXV0aGVudGljYXRpb25cIixcIlVzZXJGYWN0b3J5XCIsXCIkd2luZG93XCIsXCJZZ05vdGlmeVwiLFwiSGVscGVyRmFjdG9yeVwiLGZ1bmN0aW9uKGUsdCxpLG4sbyxyLGcpe3ZhciBzPWZ1bmN0aW9uKCl7dmFyIHQ9aS5nZXRVc2VyKCk7dC5yb2xlLmluZGV4T2YoXCJBZG1pblwiKT4tMT9lLmlzQWRtaW49ITA6ZS5pc0FkbWluPSExLGUuaXNSZWd1bGFyVXNlcj0hMCwoaS5nZXRVc2VyKCkucm9sZS5pbmRleE9mKFwiU3VwcG9ydFwiKT4tMXx8aS5nZXRVc2VyKCkucm9sZS5pbmRleE9mKFwiQWRtaW5cIik+LTEpJiYoZS5pc1JlZ3VsYXJVc2VyPSExKX07ZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9aS5nZXRVc2VyKCk7dCYmKHQucm9sZS5pbmRleE9mKFwiQWRtaW5cIik+LTE/ZS5pc0FkbWluPSEwOmUuaXNBZG1pbj0hMSl9LGUuZ2V0TG9hZGluZz1nLmdldExvYWRpbmcsZS4kd2F0Y2goXCJnZXRMb2FkaW5nKClcIixmdW5jdGlvbih0LGkpe2UubG9hZGluZz10fSksZS5nZXRVc2VyPWkuZ2V0VXNlcixlLmlzQXV0aGVudGljYXRlZD1pLmdldElzQXV0aGVudGljYXRlZCxlLmxvZ291dD1mdW5jdGlvbigpe24ubG9nb3V0KCkudGhlbihmdW5jdGlvbigpe2kuY2xlYXJVc2VyKCksdC5nbyhcInVzZXJzLWxvZ2luLmxvZ2luXCIpfSl9LGUuJG9uKFwic3VjY2Vzc2Z1bC1sb2dpblwiLHMpLGUuZ2V0UHJvZmlsZT1mdW5jdGlvbigpe3QuZ28oXCJ1c2Vycy1wcm9maWxlXCIpfSxvLmFwcD17fSxvLmFwcC5hdXRoPWZ1bmN0aW9uKGUsbil7XCJcIiE9PWU/ci5hbGVydChcImRhbmdlclwiLGUudG9TdHJpbmcoKSw1ZTMpOm4udXNlcm5hbWUmJlwiXCIhPT1uLnVzZXJuYW1lP24mJihpLnNldFVzZXIobikscygpLHQuZ28oXCJ0aWNrZXQubXktdGlja2V0c1wiKSk6dC5nbyhcImF1dGgtZ29vZ2xlXCIse2lkOm4uX2lkLnRvU3RyaW5nKCksZW1haWw6bi5lbWFpbH0pfX1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmNvbnRyb2xsZXIoXCJVc2Vyc0xpc3RDdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVcIixcIiRzdGF0ZVBhcmFtc1wiLFwiSGVscGVyRmFjdG9yeVwiLFwiWWdOb3RpZnlcIixmdW5jdGlvbihlLHMscixhLHQpe2Euc2V0TG9hZGluZyghMCk7dmFyIGk9ZnVuY3Rpb24oKXtyZXR1cm5cIlwifSxuPWZ1bmN0aW9uKGUpe3JldHVybiBlPT09ITA/XCJmYSBmYS1jaGVja1wiOlwiZmEgZmEtcmVtb3ZlXCJ9LG89ZnVuY3Rpb24oKXtyZXR1cm5cIlwifSx1PWZ1bmN0aW9uKGUpe3JldHVybiBlLmluZGV4T2YoXCJBZG1pblwiKT4tMT9cImZhIGZhLWNoZWNrXCI6XCJmYSBmYS1yZW1vdmVcIn07ZS5jb25maWc9e30sZS5jb25maWcudXJsPVwiL2FkbWluL3VzZXJzLWRldGFpbHNcIixlLmNvbmZpZy5jb2x1bW5zPVtdLGUuY29uZmlnLmNvbHVtbnMucHVzaCh7a2V5OlwidXNlcm5hbWVcIixuYW1lOlwiVXNlcm5hbWVcIixjc3NDbGFzczpcImNvbC1tZC02XCJ9KSxlLmNvbmZpZy5jb2x1bW5zLnB1c2goe2tleTpcImlzQWN0aXZlXCIsbmFtZTpcIklzIEFjdGl2ZVwiLGNzc0NsYXNzOlwiY29sLW1kLTNcIixyZW5kZXI6aSxyZW5kZXJDbGFzczpufSksZS5jb25maWcuY29sdW1ucy5wdXNoKHtrZXk6XCJyb2xlXCIsbmFtZTpcIklzIEFkbWluXCIsY3NzQ2xhc3M6XCJjb2wtbWQtM1wiLHJlbmRlcjpvLHJlbmRlckNsYXNzOnV9KSxlLmNvbmZpZy5zb3J0UXVlcnlzdHJpbmdQYXJhbT1cInNvcnRcIixlLmNvbmZpZy5vcmRlclF1ZXJ5c3RyaW5nUGFyYW09XCJvcmRlclwiLGUuY29uZmlnLnBhZ2VRdWVyeXN0cmluZ1BhcmFtPVwicGFnZVwiLGUuY29uZmlnLnNpemVRdWVyeXN0cmluZ1BhcmFtPVwic2l6ZVwiLGUuY29uZmlnLm9iamVjdE5hbWU9XCJ1c2Vyc1wiLGUuY29uZmlnLm9uUm93Q2xpY2s9ZnVuY3Rpb24oZSl7cy5nbyhcImFkbWluLWVkaXRcIix7dXNlcm5hbWU6ZS51c2VybmFtZX0pfSxlLiR3YXRjaChcImFnTG9hZGluZygpXCIsZnVuY3Rpb24oZSxzKXthLnNldExvYWRpbmcoZSl9KX1dKS5jb250cm9sbGVyKFwiRWRpdFVzZXJzQ3RybFwiLFtcIiRzY29wZVwiLFwiJHN0YXRlXCIsXCIkc3RhdGVQYXJhbXNcIixcIkhlbHBlckZhY3RvcnlcIixcIlVzZXJGYWN0b3J5XCIsXCJZZ05vdGlmeVwiLGZ1bmN0aW9uKGUscyxyLGEsdCxpKXtlLmlzQWN0aXZlPXt9LGUuaXNBZG1pbj17fSxlLnVzZXJEZXRhaWxzPXt9O3ZhciBuPXIudXNlcm5hbWU7dC5nZXRVc2VyRGV0YWlscyhuKS50aGVuKGZ1bmN0aW9uKHMpe2Euc2V0TG9hZGluZyghMSksZS51c2VyRGV0YWlscy51c2VybmFtZT1zLmRhdGEudXNlci51c2VybmFtZSxlLnVzZXJEZXRhaWxzLmZpcnN0bmFtZT1zLmRhdGEudXNlci5maXJzdG5hbWUsZS51c2VyRGV0YWlscy5sYXN0bmFtZT1zLmRhdGEudXNlci5sYXN0bmFtZSxlLnVzZXJEZXRhaWxzLmlkPXMuZGF0YS51c2VyLl9pZDt2YXIgcj1zLmRhdGEudXNlci5yb2xlO3IuaW5kZXhPZihcIkFkbWluXCIpPi0xP2UudXNlckRldGFpbHMuaXNBZG1pbj0hMDplLnVzZXJEZXRhaWxzLmlzQWRtaW49ITEsZS51c2VyRGV0YWlscy5pc0FjdGl2ZT1zLmRhdGEudXNlci5pc0FjdGl2ZSxlLnVzZXJEZXRhaWxzLmVtYWlsPXMuZGF0YS51c2VyLmVtYWlsLGUuaXNBY3RpdmUua2V5PVwiaXNBY3RpdmVcIixlLmlzQWN0aXZlLnZhbHVlPWUudXNlckRldGFpbHMuaXNBY3RpdmUsZS5pc0FkbWluLmtleT1cImlzQWRtaW5cIixlLmlzQWRtaW4udmFsdWU9ZS51c2VyRGV0YWlscy5pc0FkbWlufSkuY2F0Y2goZnVuY3Rpb24oZSl7YS5zZXRMb2FkaW5nKCExKSxpLmFsZXJ0KFwiZGFuZ2VyXCIsXCJUaGVyZSB3YXMgc29tZSBlcnJvciB0cnlpbmcgdG8gZmV0Y2ggdXNlciBkZXRhaWxzLiBQbGVhc2UgdHJ5IGFnYWluIGFmdGVyIHNvbWUgdGltZS5cIiw1ZTMpfSksZS51c2VyRGV0YWlscy51cGRhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gZS5lZGl0VXNlckZvcm0uJGludmFsaWQ/KGUuZWRpdFVzZXJGb3JtLmZpcnN0bmFtZS4kdG91Y2hlZD0hMCxlLmVkaXRVc2VyRm9ybS5sYXN0bmFtZS4kdG91Y2hlZD0hMCx2b2lkKGUuZWRpdFVzZXJGb3JtLmVtYWlsLiR0b3VjaGVkPSEwKSk6KGEuc2V0TG9hZGluZyghMCksZS51c2VyRGV0YWlscy5pc0FkbWluPWUuaXNBZG1pbi52YWx1ZSxlLnVzZXJEZXRhaWxzLmlzQWN0aXZlPWUuaXNBY3RpdmUudmFsdWUsdm9pZCB0LnVwZGF0ZVVzZXJEZXRhaWxzKGUudXNlckRldGFpbHMudXNlcm5hbWUsZS51c2VyRGV0YWlscykudGhlbihmdW5jdGlvbihlKXthLnNldExvYWRpbmcoITEpLGkuYWxlcnQoXCJzdWNjZXNzXCIsXCJVc2VyIGRldGFpbHMgdXBkYXRlZCBzdWNjZXNzZnVsbHlcIiw1ZTMpfSkuY2F0Y2goZnVuY3Rpb24oZSl7YS5zZXRMb2FkaW5nKCExKSxpLmFsZXJ0KFwiZGFuZ2VyXCIsXCJUaGVyZSB3YXMgc29tZSBlcnJvciB0cnlpbmcgdG8gdXBkYXRlIHVzZXIgZGV0YWlscy4gUGxlYXNlIHRyeSBhZ2FpbiBhZnRlciBzb21lIHRpbWUuXCIsNWUzKX0pKX19XSkuY29udHJvbGxlcihcIkNoYW5nZVVzZXJzUGFzc3dvcmRDdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVcIixcIiRzdGF0ZVBhcmFtc1wiLFwiSGVscGVyRmFjdG9yeVwiLFwiVXNlckZhY3RvcnlcIixcIllnTm90aWZ5XCIsZnVuY3Rpb24oZSxzLHIsYSx0LGkpe2UucmVzZXRQYXNzd29yZD17fSxlLnJlc2V0UGFzc3dvcmQucmVzZXQ9ZnVuY3Rpb24oKXtpZihlLnJlc2V0VXNlcnNQYXNzd29yZEZvcm0uJGludmFsaWQpcmV0dXJuIGUucmVzZXRVc2Vyc1Bhc3N3b3JkRm9ybS5wYXNzd29yZDIuJHRvdWNoZWQ9ITAsdm9pZChlLnJlc2V0VXNlcnNQYXNzd29yZEZvcm0ucGFzc3dvcmQxLiR0b3VjaGVkPSEwKTthLnNldExvYWRpbmcoITApO3ZhciBuPXIuaWQ7dC5yZXNldFBhc3N3b3JkKG4sZS5yZXNldFBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uKGUpe2lmKGEuc2V0TG9hZGluZyghMSksZS5kYXRhLmVycm9ycyl7dmFyIHI9YS5jcmVhdGVFcnJvck1lc3NhZ2UoZS5kYXRhLmVycm9ycyk7ci5mb3JFYWNoKGZ1bmN0aW9uKGUpe2kuYWxlcnQoXCJkYW5nZXJcIixlLDVlMyl9KX1lbHNlIGkuYWxlcnQoXCJzdWNjZXNzXCIsXCJQYXNzd29yZCBoYXMgYmVlbiByZXNldCBzdWNjZXNzZnVsbHlcIiw1ZTMpLHMuZ28oXCJhZG1pbi11c2VyLW1hbmFnZW1lbnRcIil9KS5jYXRjaChmdW5jdGlvbihlKXthLnNldExvYWRpbmcoITEpLGkuYWxlcnQoXCJkYW5nZXJcIixcIlRoZSByZXF1ZXN0IGNvdWxkIG5vdCBiZW4gbWFkZSBzdWNjZXNzZnVsbHkuIFBsZWFzZSB0cnkgbGF0ZXJcIiw1ZTMpfSl9fV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIkVkaXRUaWNrZXRDdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVQYXJhbXNcIixcIiRzdGF0ZVwiLFwiVGlja2V0RmFjdG9yeVwiLFwiWWdOb3RpZnlcIixcIkhlbHBlckZhY3RvcnlcIixcIkF1dGhlbnRpY2F0aW9uXCIsZnVuY3Rpb24odCxlLGEscixpLGMsbil7dC50b29sYmFyQ29uZmlnPVtbXCJoMVwiLFwicFwiLFwicHJlXCIsXCJxdW90ZVwiXSxbXCJib2xkXCIsXCJpdGFsaWNzXCIsXCJ1bmRlcmxpbmVcIixcInN0cmlrZVRocm91Z2hcIixcInVsXCIsXCJvbFwiLFwicmVkb1wiLFwidW5kb1wiLFwiY2xlYXJcIl0sW10sW1wiaW5zZXJ0TGlua1wiXV0sdC5jYW5jZWw9ZnVuY3Rpb24oKXthLmdvKFwidGlja2V0LXZpZXdcIix7aWQ6dC50aWNrZXQuaWR9KX0sdC5yZW5kZXJEYXRlPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgRGF0ZShEYXRlLnBhcnNlKHQpKS50b0xvY2FsZURhdGVTdHJpbmcoKX0sci5nZXRUaWNrZXRCeUlkKGUuaWQpLnRoZW4oZnVuY3Rpb24oZSl7aWYoZS5kYXRhLmVycm9ycyl7YS5nbyhcInRpY2tldC5teS10aWNrZXRzXCIpO3ZhciBvPWMuY3JlYXRlRXJyb3JNZXNzYWdlKGUuZGF0YS5lcnJvcnMpO28uZm9yRWFjaChmdW5jdGlvbih0KXtpLmFsZXJ0KFwiZGFuZ2VyXCIsdCw1ZTMpfSl9ZWxzZSB0LnRpY2tldD1lLmRhdGEsdC50aWNrZXQuY3VycmVudFVzZXI9bi5nZXRVc2VyKCkudXNlcm5hbWUsci5nZXRJbml0aWFsVGlja2V0RGF0YSh0LnRpY2tldC5zdGF0dXMpLnRoZW4oZnVuY3Rpb24oZSl7dC5wcmlvcml0aWVzPWUuZGF0YS5wcmlvcml0aWVzLnZhbHVlcyx0LnR5cGVzPWUuZGF0YS50eXBlcy52YWx1ZXMsdC51c2Vycz1lLmRhdGEudXNlcnMsYy5zZXRBbGxVc2Vycyh0LnVzZXJzKSx0LnN0YXR1c2VzPWUuZGF0YS5zdGF0dXNlc30pLmNhdGNoKGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKHQpLGkuYWxlcnQoXCJkYW5nZXJcIixcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byBkZXRjaCB0aGUgc3RhdGljIGRhdGEuXCIpfSl9KS5jYXRjaChmdW5jdGlvbih0KXtjb25zb2xlLmxvZyh0KSxpLmFsZXJ0KFwiZGFuZ2VyXCIsXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB0cnlpbmcgdG8gZ2V0IHRpY2tldCBkZXRhaWxzLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiLDVlMyl9KSx0LnVwZGF0ZT1mdW5jdGlvbigpe3IudXBkYXRlVGlja2V0KHQudGlja2V0Ll9pZCx0LnRpY2tldCkudGhlbihmdW5jdGlvbihlKXt0LnRpY2tldD1lLmRhdGEsaS5hbGVydChcInN1Y2Nlc3NcIixcIlRpY2tldCB1cGRhdGVkIHN1Y2Nlc3NmdWxseS5cIiw1ZTMpLGEuZ28oXCJ0aWNrZXQtdmlld1wiLHtpZDplLmRhdGEuaWR9KX0pLmNhdGNoKGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKHQpLGkuYWxlcnQoXCJkYW5nZXJcIixcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byB1cGRhdGUgdGlja2V0IGRldGFpbHMuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCIsNWUzKX0pfX1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmNvbnRyb2xsZXIoXCJOZXdUaWNrZXRDdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVcIixcIlRpY2tldEZhY3RvcnlcIixcIllnTm90aWZ5XCIsXCJDb21tb25GYWN0b3J5XCIsXCJIZWxwZXJGYWN0b3J5XCIsZnVuY3Rpb24oZSx0LGkscixuLG8pe24uZ2V0SW5pdGlhbFN0YXRpY0RhdGEoKS50aGVuKGZ1bmN0aW9uKHQpe2UubmV3VGlja2V0LnR5cGVzPXQuZGF0YS50eXBlcy52YWx1ZXMsZS5uZXdUaWNrZXQudHlwZT1lLm5ld1RpY2tldC50eXBlc1swXS52YWx1ZX0pLGUubmV3VGlja2V0PXt9LGUudG9vbGJhckNvbmZpZz1bW1wiaDFcIixcInBcIixcInByZVwiLFwicXVvdGVcIl0sW1wiYm9sZFwiLFwiaXRhbGljc1wiLFwidW5kZXJsaW5lXCIsXCJzdHJpa2VUaHJvdWdoXCIsXCJ1bFwiLFwib2xcIixcInJlZG9cIixcInVuZG9cIixcImNsZWFyXCJdLFtdLFtcImluc2VydExpbmtcIl1dLGUuc2F2ZT1mdW5jdGlvbigpe3JldHVybiBlLm5ld1RpY2tldEZvcm0uJGludmFsaWQ/KGUubmV3VGlja2V0Rm9ybS50aXRsZS4kdG91Y2hlZD0hMCx2b2lkKGUubmV3VGlja2V0Rm9ybS5kZXNjcmlwdGlvbi4kdG91Y2hlZD0hMCkpOnZvaWQgaS5jcmVhdGVOZXdUaWNrZXQoe3RpdGxlOmUubmV3VGlja2V0LnRpdGxlLGRlc2NyaXB0aW9uOmUubmV3VGlja2V0LmRlc2NyaXB0aW9uLHR5cGU6ZS5uZXdUaWNrZXQudHlwZX0pLnRoZW4oZnVuY3Rpb24oZSl7aWYoZS5kYXRhLmVycm9ycyl7dmFyIGk9by5jcmVhdGVFcnJvck1lc3NhZ2UoZS5kYXRhLmVycm9ycyk7aS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3IuYWxlcnQoXCJkYW5nZXJcIixlLDVlMyl9KX1lbHNlIHQuZ28oXCJ0aWNrZXQtdmlld1wiLHtpZDplLmRhdGEuaWR9KX0sZnVuY3Rpb24oZSl7ci5hbGVydChcImRhbmdlclwiLFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIGNyZWF0ZSBuZXcgdGlja2V0LiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiLDVlMyksY29uc29sZS5sb2coZSl9KX19XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiVGFza0N0cmxcIixbXCIkc2NvcGVcIixcIlRhc2tGYWN0b3J5XCIsZnVuY3Rpb24oYSx0KXtjb25zb2xlLmxvZyh0KSxhLmdldFRhc2s9dC5nZXRUYXNrLGEudGFzaz17fSxhLmNvbW1lbnRQYXJ0aWFsPVwidGVtcGxhdGVzL3BhcnRpYWxzL2NvbW1lbnRzLXBhcnRpYWwuaHRtbFwiLGEuJHdhdGNoKFwiZ2V0VGFzaygpXCIsZnVuY3Rpb24odCxzKXtzd2l0Y2goY29uc29sZS5sb2codCksYS50YXNrLm5hbWU9XCJ0ZW1wbGF0ZXMvcGFydGlhbHMvXCIrdCtcIi1wYXJ0aWFsLmh0bWxcIix0KXtjYXNlXCJjb21tZW50XCI6YS50YXNrLnNob3dUYXNrUGFuZWw9ITAsYS50YXNrLnRpdGxlPVwiQWRkIG5ldyBjb21tZW50XCIsYS50YXNrLnNob3dNYWluUGFuZWw9ITEsYS50YXNrLnNob3dDb21tZW50c1BhbmVsPSEwO2JyZWFrO2Nhc2VcImFzc2lnblwiOmEudGFzay5zaG93VGFza1BhbmVsPSEwLGEudGFzay50aXRsZT1cIkFzc2lnbiB0aWNrZXRcIixhLnRhc2suc2hvd01haW5QYW5lbD0hMCxhLnRhc2suc2hvd0NvbW1lbnRzUGFuZWw9ITB9fSl9XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiVGlja2V0c0N0cmxcIixbXCIkc2NvcGVcIixcIiRzdGF0ZVwiLFwiYWdTb3J0RmFjdG9yeVwiLFwiSGVscGVyRmFjdG9yeVwiLGZ1bmN0aW9uKGUsdCxuLGkpe2UuaXNTdXBwb3J0PSExO3ZhciBjPUpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0aWNrZXRTeXN0ZW1Vc2VyXCIpKTtjJiYoYy5yb2xlLmluZGV4T2YoXCJBZG1pblwiKT4tMXx8Yy5yb2xlLmluZGV4T2YoXCJTdXBwb3J0XCIpPi0xKSYmKGUuaXNTdXBwb3J0PSEwKTt2YXIgbz1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IERhdGUoRGF0ZS5wYXJzZShlKSkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9LHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU/U3RyaW5nKGUpLnJlcGxhY2UoLzxbXj5dKz4vZ20sXCJcIik6XCJcIn0sYT1mdW5jdGlvbihlKXtyZXR1cm4gZT9lOlwiVW5hc3NpZ25lZFwifTtlLmNvbmZpZz17fSxlLmNvbmZpZy5jb2x1bW5zPVtdLGUuY29uZmlnLmNvbHVtbnMucHVzaCh7a2V5OlwiaWRcIixuYW1lOlwiSURcIixjc3NDbGFzczpcImNvbC1tZC0xXCJ9KSxlLmNvbmZpZy5jb2x1bW5zLnB1c2goe2tleTpcInRpdGxlXCIsbmFtZTpcIlRpdGxlXCIsY3NzQ2xhc3M6XCJjb2wtbWQtMlwifSksZS5jb25maWcuY29sdW1ucy5wdXNoKHtrZXk6XCJkZXNjcmlwdGlvblwiLG5hbWU6XCJEZXNjcmlwdGlvblwiLGNzc0NsYXNzOlwiY29sLW1kLTJcIixyZW5kZXI6c30pLGUuY29uZmlnLmNvbHVtbnMucHVzaCh7a2V5OlwidHlwZVwiLG5hbWU6XCJUeXBlXCIsY3NzQ2xhc3M6XCJjb2wtbWQtMVwifSksZS5jb25maWcuY29sdW1ucy5wdXNoKHtrZXk6XCJhc3NpZ25lZVwiLG5hbWU6XCJBc3NpZ25lZVwiLGNzc0NsYXNzOlwiY29sLW1kLTJcIixyZW5kZXI6YX0pLGUuY29uZmlnLmNvbHVtbnMucHVzaCh7a2V5OlwiY3JlYXRlZERhdGVcIixuYW1lOlwiQ3JlYXRlZCBEYXRlXCIsY3NzQ2xhc3M6XCJjb2wtbWQtMlwiLHJlbmRlcjpvfSksZS5jb25maWcuY29sdW1ucy5wdXNoKHtrZXk6XCJjcmVhdGVkQnlcIixuYW1lOlwiQ3JlYXRlZCBCeVwiLGNzc0NsYXNzOlwiY29sLW1kLTJcIn0pLGUuY29uZmlnLnNvcnRRdWVyeXN0cmluZ1BhcmFtPVwic29ydFwiLGUuY29uZmlnLm9yZGVyUXVlcnlzdHJpbmdQYXJhbT1cIm9yZGVyXCIsZS5jb25maWcucGFnZVF1ZXJ5c3RyaW5nUGFyYW09XCJwYWdlXCIsZS5jb25maWcuc2l6ZVF1ZXJ5c3RyaW5nUGFyYW09XCJzaXplXCIsZS5hY3RpdmU9XCJcIixlLmFnTG9hZGluZz1uLmdldExvYWRpbmcsZS5jb25maWcub25Sb3dDbGljaz1mdW5jdGlvbihlKXt0LmdvKFwidGlja2V0LXZpZXdcIix7aWQ6ZS5pZH0pfSxlLmNvbmZpZy5vYmplY3ROYW1lPVwidGlja2V0c1wiLGUuaW5pdGlhdGVBbGxUaWNrZXQ9ZnVuY3Rpb24oKXtlLmNvbmZpZy51cmw9XCIvdGlja2V0cy9hbGxcIixlLiRwYXJlbnQuYWN0aXZlPVwiYWxsXCJ9LGUuaW5pdGlhdGVNeVRpY2tldD1mdW5jdGlvbigpe2UuY29uZmlnLnVybD1cIi90aWNrZXRzL215XCIsZS4kcGFyZW50LmFjdGl2ZT1cIm15XCJ9LGUuaW5pdGlhdGVUb01lVGlja2V0PWZ1bmN0aW9uKCl7ZS5jb25maWcudXJsPVwiL3RpY2tldHMvdG8tbWVcIixlLiRwYXJlbnQuYWN0aXZlPVwidG9tZVwifSxlLiR3YXRjaChcImFnTG9hZGluZygpXCIsZnVuY3Rpb24oZSx0KXtpLnNldExvYWRpbmcoZSl9KX1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmNvbnRyb2xsZXIoXCJWaWV3VGlja2V0Q3RybFwiLFtcIiRzY29wZVwiLFwiJHN0YXRlUGFyYW1zXCIsXCIkc3RhdGVcIixcIlRpY2tldEZhY3RvcnlcIixcIllnTm90aWZ5XCIsXCJBdXRoZW50aWNhdGlvblwiLFwiSGVscGVyRmFjdG9yeVwiLFwiWWdNb2RhbFwiLFwiQWN0aW9uRmFjdG9yeVwiLGZ1bmN0aW9uKGUsdCxyLG4saSxzLGEsYyxvKXtmdW5jdGlvbiB1KGUsdCl7c3dpdGNoKGU9ZXx8XCJcIix0LnN1Y2Nlc3M9dC5zdWNjZXNzfHxcIlwiLHQud2FybmluZz10Lndhcm5pbmd8fFwiXCIsdC5kYW5nZXI9dC5kYW5nZXJ8fFwiXCIsdC5pbmZvPXQuaW5mb3x8XCJcIixlLnRvTG93ZXJDYXNlKCkpe2Nhc2UgdC5zdWNjZXNzLnRvTG93ZXJDYXNlKCk6cmV0dXJuXCJzdWNjZXNzXCI7Y2FzZSB0Lndhcm5pbmcudG9Mb3dlckNhc2UoKTpyZXR1cm5cIndhcm5pbmdcIjtjYXNlIHQuZGFuZ2VyLnRvTG93ZXJDYXNlKCk6cmV0dXJuXCJkYW5nZXJcIjtjYXNlIHQuaW5mby50b0xvd2VyQ2FzZSgpOnJldHVyblwiaW5mb1wiO2RlZmF1bHQ6cmV0dXJuXCJpbmZvXCJ9fWZ1bmN0aW9uIGQoZSl7cmV0dXJuIHUoZSx7c3VjY2VzczpcImluLXByb2dyZXNzXCIsd2FybmluZzpcIm9wZW5cIixpbmZvOlwibmV3XCIsZGFuZ2VyOlwicmVzb2x2ZWRcIn0pfWZ1bmN0aW9uIGcoZSl7cmV0dXJuIHUoZSx7c3VjY2VzczpcImxvd1wiLHdhcm5pbmc6XCJtZWRpdW1cIixkYW5nZXI6XCJoaWdoXCJ9KX1mdW5jdGlvbiBsKGUpe3JldHVybiBlLmFzc2lnbmVlPT09ZS5jdXJyZW50VXNlcnx8KGUuY3JlYXRlZEJ5PT09ZS5jdXJyZW50VXNlcnx8KCEhYS5pc0N1cnJlbnRVc2VyQWRtaW4oKXx8ISFhLmlzQ3VycmVudFVzZXJTdXBwb3J0KCkpKX1mdW5jdGlvbiBmKGUpe3JldHVybiBuZXcgRGF0ZShEYXRlLnBhcnNlKGUpKS50b0xvY2FsZURhdGVTdHJpbmcoKX1hLnNldExvYWRpbmcoITApLG4uZ2V0VGlja2V0QnlJZCh0LmlkKS50aGVuKGZ1bmN0aW9uKHQpe2lmKHQuZGF0YS5lcnJvcnMpe3IuZ28oXCJ0aWNrZXQubXktdGlja2V0c1wiKTt2YXIgbj1hLmNyZWF0ZUVycm9yTWVzc2FnZSh0LmRhdGEuZXJyb3JzKTtuLmZvckVhY2goZnVuY3Rpb24oZSl7aS5hbGVydChcImRhbmdlclwiLGUsNWUzKX0pfWVsc2UgZS50aWNrZXQ9dC5kYXRhLGUudGlja2V0LmRlc2NyaXB0aW9uPWEuc3RyaXBIdG1sKGUudGlja2V0LmRlc2NyaXB0aW9uKSxlLnRpY2tldC5hc3NpZ25lZT1lLnRpY2tldC5hc3NpZ25lZT9lLnRpY2tldC5hc3NpZ25lZTpcIlVuYXNzaWduZWRcIixlLnRpY2tldC5jcmVhdGVkRGF0ZT1mKGUudGlja2V0LmNyZWF0ZWREYXRlKSxlLnRpY2tldC5jdXJyZW50VXNlcj1zLmdldFVzZXIoKS51c2VybmFtZSxlLnN0YXR1c0NsYXNzPWQoZS50aWNrZXQuc3RhdHVzKSxlLnRpY2tldC5wcmlvcml0eT1lLnRpY2tldC5wcmlvcml0eXx8XCJOLkFcIixlLnByaW9yaXR5Q2xhc3M9ZyhlLnRpY2tldC5wcmlvcml0eSksbChlLnRpY2tldCkmJihlLnNob3dFZGl0PSEwKSxhLnNldExvYWRpbmcoITEpfSkuY2F0Y2goZnVuY3Rpb24oZSl7aS5hbGVydChcImRhbmdlclwiLFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIGdldCB0aWNrZXQgZGV0YWlscy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIiw1ZTMpLGEuc2V0TG9hZGluZyghMSl9KSxlLnRpY2tldD17fSxlLmVkaXQ9ZnVuY3Rpb24oKXtyLmdvKFwidGlja2V0LWVkaXRcIix7aWQ6ZS50aWNrZXQuaWR9KX07dmFyIGs9ZnVuY3Rpb24odCxyKXtyZXR1cm4gZnVuY3Rpb24oKXthLnNldExvYWRpbmcoITApLG8uZGVsZXRlQ29tbWVudCh0LHIpLnRoZW4oZnVuY3Rpb24odCl7ZS50aWNrZXQuY29tbWVudHM9dC5kYXRhLmNvbW1lbnRzLGkuYWxlcnQoXCJzdWNjZXNzXCIsXCJUaGUgY29tbWVudCB3YXMgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIiw1ZTMpLGEuc2V0TG9hZGluZyghMSl9KS5jYXRjaChmdW5jdGlvbihlKXtpLmFsZXJ0KFwiZGFuZ2VyXCIsXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB0cnlpbmcgdG8gZGVsZXRlIGNvbW1lbnQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCIsNWUzKSxhLnNldExvYWRpbmcoITEpfSl9fTtlLmRlbGV0ZUNvbW1lbnQ9ZnVuY3Rpb24oZSx0KXtjLmNvbmZpcm0oayhlLHQpKSxjLm9wZW4oXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZG8gdGhpcz9cIixcIlRoaXMgd2lsbCBkZWxldGUgdGhlIGNvbW1lbnQgcGVybWFuZW50bHlcIil9fV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIkxvZ2luQ3RybFwiLFtcIiRzY29wZVwiLFwiJHN0YXRlXCIsXCIkd2luZG93XCIsXCJVc2VyRmFjdG9yeVwiLFwiQXV0aGVudGljYXRpb25cIixmdW5jdGlvbihlLHQsbyxyLG4pe2UuZXJyb3I9ITEsZS5tZXNzYWdlPVwiXCIsZS5sb2dpbj1mdW5jdGlvbigpe3IubG9naW4oZS51c2VybmFtZSxlLnBhc3N3b3JkLGUucmVtZW1iZXIpLnRoZW4oZnVuY3Rpb24obyl7by5kYXRhLmlzQXV0aGVudGljYXRlZD8obi5zZXRVc2VyKG8uZGF0YS51c2VyKSxlLiRlbWl0KFwic3VjY2Vzc2Z1bC1sb2dpblwiKSx0LmdvKFwidGlja2V0Lm15LXRpY2tldHNcIikpOihlLmVycm9yPSEwLGUubWVzc2FnZT1vLmRhdGEubXNnKX0pLmNhdGNoKGZ1bmN0aW9uKHQpe2UuZXJyb3I9ITAsZS5tZXNzYWdlPVwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIGxvZyB5b3UgaW4uIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXJcIn0pfSxlLmdvb2dsZUxvZ2luPWZ1bmN0aW9uKCl7dmFyIGU9XCJhY2NvdW50cy9hdXRoL2dvb2dsZVwiLHQ9NjAwLHI9NDUwLG49KHdpbmRvdy5vdXRlckhlaWdodC1yKS8yLGk9KHdpbmRvdy5vdXRlcldpZHRoLXQpLzI7by5vcGVuKGUsXCJmYWNlYm9va19sb2dpblwiLFwid2lkdGg9XCIrdCtcIixoZWlnaHQ9XCIrcitcIixzY3JvbGxiYXJzPTAsdG9wPVwiK24rXCIsbGVmdD1cIitpKX19XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiTWFpbkxvZ2luQ3RybFwiLFtcIiRyb290U2NvcGVcIixcIiRzY29wZVwiLFwiJHN0YXRlXCIsZnVuY3Rpb24odCxlLG4pe2Uuc3RhdGVuYW1lPW4uY3VycmVudC5uYW1lLHQuJG9uKFwiJHN0YXRlQ2hhbmdlU3RhcnRcIixmdW5jdGlvbih0LG4sYSxvLHIpe2Uuc3RhdGVuYW1lPW4ubmFtZX0pfV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIlByb2ZpbGVDdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVcIixcIkF1dGhlbnRpY2F0aW9uXCIsXCJVc2VyRmFjdG9yeVwiLFwiSGVscGVyRmFjdG9yeVwiLFwiWWdOb3RpZnlcIixmdW5jdGlvbihlLGEscix0LHMsbil7cy5zZXRMb2FkaW5nKCEwKSxlLnVzZXI9e30sZS5pbml0PWZ1bmN0aW9uKCl7dC5nZXRVc2VyQnlVc2VybmFtZShyLmdldFVzZXIoKS51c2VybmFtZSkudGhlbihmdW5jdGlvbihyKXtpZihyLmRhdGEuZXJyb3JzKXt2YXIgdD1zLmNyZWF0ZUVycm9yTWVzc2FnZShyLmRhdGEuZXJyb3JzKTt0LmZvckVhY2goZnVuY3Rpb24oZSl7bi5hbGVydChcImRhbmdlclwiLHQsNWUzKX0pLGEuZ28oXCJ0aWNrZXQubXktdGlja2V0c1wiKSxzLnNldExvYWRpbmcoITEpfWVsc2UgZS51c2VyLmZpcnN0bmFtZT1yLmRhdGEudXNlci5maXJzdG5hbWU7ZS51c2VyLmxhc3RuYW1lPXIuZGF0YS51c2VyLmxhc3RuYW1lLGUudXNlci51c2VybmFtZT1yLmRhdGEudXNlci51c2VybmFtZSxlLnVzZXIuZW1haWw9ci5kYXRhLnVzZXIuZW1haWwscy5zZXRMb2FkaW5nKCExKX0pfSxlLnVwZGF0ZT1mdW5jdGlvbigpe3JldHVybiBlLnByb2ZpbGVGb3JtLiRpbnZhbGlkPyhlLnByb2ZpbGVGb3JtLmZpcnN0bmFtZS4kdG91Y2hlZD0hMCxlLnByb2ZpbGVGb3JtLmxhc3RuYW1lLiR0b3VjaGVkPSEwLHZvaWQoZS5wcm9maWxlRm9ybS5lbWFpbC4kdG91Y2hlZD0hMCkpOihzLnNldExvYWRpbmcoITApLHZvaWQgdC51cGRhdGVQcm9maWxlKGUudXNlcikudGhlbihmdW5jdGlvbihhKXtlLnVzZXIuZmlyc3RuYW1lPWEuZGF0YS51c2VyLmZpcnN0bmFtZSxlLnVzZXIubGFzdG5hbWU9YS5kYXRhLnVzZXIubGFzdG5hbWUsZS51c2VyLnVzZXJuYW1lPWEuZGF0YS51c2VyLnVzZXJuYW1lLGUudXNlci5lbWFpbD1hLmRhdGEudXNlci5lbWFpbCxlLnVzZXIucm9sZT1hLmRhdGEudXNlci5yb2xlLHIuc2V0VXNlcihlLnVzZXIpLG4uYWxlcnQoXCJzdWNjZXNzXCIsXCJVc2VyIGRldGFpbHMgaGF2ZSBiZWVuIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5XCIsNWUzKSxzLnNldExvYWRpbmcoITEpfSkuY2F0Y2goZnVuY3Rpb24oZSl7bi5hbGVydChcImRhbmdlclwiLFwiVGhlcmUgd2FzIHNvbWUgZXJyb3IgdHJ5aW5nIHRvIHVwZGF0ZSB1c2VyIGRldGFpbHMuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMykscy5zZXRMb2FkaW5nKCExKX0pKX19XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiUmVnaXN0ZXJDdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVcIixcIlVzZXJGYWN0b3J5XCIsXCJIZWxwZXJGYWN0b3J5XCIsXCJZZ05vdGlmeVwiLGZ1bmN0aW9uKGUscix0LHMsYSl7ZS5uZXdVc2VyPXt9LGUucmVnaXN0ZXI9ZnVuY3Rpb24oKXt0LnJlZ2lzdGVyVXNlcihlLm5ld1VzZXIpLnRoZW4oZnVuY3Rpb24oZSl7aWYoZS5kYXRhLmVycm9ycyl7dmFyIHQ9cy5jcmVhdGVFcnJvck1lc3NhZ2UoZS5kYXRhLmVycm9ycyk7dC5mb3JFYWNoKGZ1bmN0aW9uKGUpe2EuYWxlcnQoXCJkYW5nZXJcIixlLDVlMyl9KX1lbHNlIGEuYWxlcnQoXCJzdWNjZXNzXCIsXCJVc2VyIGhhcyBiZWVuIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5LiBZb3UgY2FuIG5vdyBsb2dpbi5cIiw1ZTMpLHIuZ28oXCJ1c2Vycy1sb2dpbi5sb2dpblwiKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2EuYWxlcnQoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byBjcmVhdGUgdGhlIHVzZXIuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyl9KX19XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiU2V0VXNlckN0cmxcIixbXCIkc2NvcGVcIixcIiRzdGF0ZVBhcmFtc1wiLFwiJHN0YXRlXCIsXCJVc2VyRmFjdG9yeVwiLFwiWWdOb3RpZnlcIixcIkF1dGhlbnRpY2F0aW9uXCIsZnVuY3Rpb24oZSx0LHIscyxhLG4pe3ZhciBjPXQuaWQsbz10LmVtYWlsO2Uuc2V0VXNlcm5hbWU9e30sZS5zZXRVc2VybmFtZS5lbWFpbD1vLGUuc2F2ZVVzZXJuYW1lPWZ1bmN0aW9uKCl7cy5zZXRVc2VybmFtZSh7aWQ6Yyx1c2VybmFtZTplLnNldFVzZXJuYW1lLnVzZXJuYW1lfSkudGhlbihmdW5jdGlvbih0KXtpZih0LmRhdGEuZXJyb3JzKXt2YXIgcz1IZWxwZXJGYWN0b3J5LmNyZWF0ZUVycm9yTWVzc2FnZSh0LmRhdGEuZXJyb3JzKTtzLmZvckVhY2goZnVuY3Rpb24oZSl7YS5hbGVydChcImRhbmdlclwiLGUsNWUzKX0pfWVsc2Ugbi5zZXRVc2VyKHQuZGF0YS51c2VyKSxlLiRlbWl0KFwic3VjY2Vzc2Z1bC1sb2dpblwiKSxyLmdvKFwidGlja2V0Lm15LXRpY2tldHNcIiksYS5hbGVydChcInN1Y2Nlc3NcIixcIlVzZXJuYW1lIGhhcyBiZWVuIHNldCBzdWNjZXNzZnVsbHkuXCIsNWUzKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2EuYWxlcnQoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byBzZXQgdGhlIHVzZXJuYW1lLiBQbGVhc2UgdHJ5IGFnYWluIGFmdGVyIHNvbWUgdGltZS5cIiw1ZTMpfSl9fV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIkFjdGlvbnNDdHJsXCIsW1wiJHNjb3BlXCIsXCJBY3Rpb25GYWN0b3J5XCIsXCJIZWxwZXJGYWN0b3J5XCIsXCIkcm9vdFNjb3BlXCIsZnVuY3Rpb24odCxlLGEsbil7dC5nZXRUYXNrPWUuZ2V0VGFzayx0LnRhc2s9e30sdC50YXNrLnNob3dUYXNrUGFuZWw9ITEsdC50YXNrLnNob3dNYWluUGFuZWw9ITEsZS5zZXRUYXNrKG51bGwpLHQuc2V0U2F2ZUZuPWZ1bmN0aW9uKGUpe3Quc2F2ZVRhc2s9ZX0sdC5jYW5jZWxUYXNrPWZ1bmN0aW9uKCl7ZS5zZXRUYXNrKG51bGwpLHQudGFzay5jb21tZW50PVwiXCIsdC50YXNrLnNob3dUYXNrUGFuZWw9ITEsdC50YXNrLnNob3dNYWluUGFuZWw9ITF9LHQuc2V0U2F2ZUJ0bk5hbWU9ZnVuY3Rpb24oZSl7dC5zYXZlQnRuTmFtZT1lfSx0LiR3YXRjaChcImdldFRhc2soKVwiLGZ1bmN0aW9uKGUsbil7aWYoZSlzd2l0Y2goYS5zZXRMb2FkaW5nKCEwKSx0LnRhc2suc2hvd1Rhc2tQYW5lbD0hMCx0LnRhc2suc2hvd01haW5QYW5lbD0hMCx0LnRhc2submFtZT1cInRlbXBsYXRlcy9wYXJ0aWFscy9hY3Rpb24vXCIrZStcIi1hY3Rpb24tcGFydGlhbC5odG1sXCIsZSl7Y2FzZVwiY29tbWVudFwiOnQudGFzay50aXRsZT1cIkFkZCBuZXcgY29tbWVudFwiO2JyZWFrO2Nhc2VcImF3YWl0aW5ndXNlcnNyZXNwb25zZVwiOnQudGFzay50aXRsZT1cIkF3YWl0aW5nIHVzZXJzIHJlc3BvbnNlXCI7YnJlYWs7Y2FzZVwiY2xvc2VcIjp0LnRhc2sudGl0bGU9XCJDbG9zZSB0aWNrZXRcIjticmVhaztjYXNlXCJyZW9wZW5cIjp0LnRhc2sudGl0bGU9XCJSZW9wZW4gdGlja2V0XCI7YnJlYWs7Y2FzZVwiYWNrbm93bGVkZ2VcIjp0LnRhc2sudGl0bGU9XCJBY2tub3dsZWRnZSB0aWNrZXRcIjticmVhaztjYXNlXCJhc3NpZ25cIjp0LnRhc2sudGl0bGU9XCJBc3NpZ24gdGlja2V0XCI7YnJlYWs7Y2FzZVwiY2hhbmdlc3RhdHVzXCI6dC50YXNrLnRpdGxlPVwiQ2hhbmdlIHRpY2tldCBzdGF0dXNcIn1lbHNlIHQudGFzay5uYW1lPW51bGx9KX1dKS5jb250cm9sbGVyKFwiQXNzaWduQWN0aW9uQ3RybFwiLFtcIiRzY29wZVwiLFwiQWN0aW9uRmFjdG9yeVwiLFwiWWdOb3RpZnlcIixcIkhlbHBlckZhY3RvcnlcIixmdW5jdGlvbih0LGUsYSxuKXtjb25zb2xlLmxvZyhcInNldCBhc3NpZ25lZVwiKSxlLmdldEFzc2lnbmVlcygpLnRoZW4oZnVuY3Rpb24oZSl7dC51c2Vycz1lLmRhdGEudXNlcnMsdC51c2Vycz1uLnJlbW92ZVVzZXJGcm9tVXNlcnModC51c2VycyxbdC50aWNrZXQuY3JlYXRlZEJ5LHQudGlja2V0LmFzc2lnbmVlXSksdC5hc3NpZ25lZT10LnVzZXJzWzBdLnVzZXJuYW1lLG4uc2V0TG9hZGluZyghMSl9KSx0LnNldFNhdmVGbihmdW5jdGlvbigpe3JldHVybiB0LmFjdGlvbkZvcm0uY29tbWVudC4kaW52YWxpZHx8dC5hY3Rpb25Gb3JtLmFzc2lnbmVlLiRpbnZhbGlkPyh0LmFjdGlvbkZvcm0uY29tbWVudC4kdG91Y2hlZD0hMCx2b2lkKHQuYWN0aW9uRm9ybS5hc3NpZ25lZS4kdG91Y2hlZD0hMCkpOihuLnNldExvYWRpbmcoITApLHZvaWQgZS5hc3NpZ24odC50aWNrZXQuaWQsdC5hc3NpZ25lZSx0LnRhc2suY29tbWVudCkudGhlbihmdW5jdGlvbihlKXtpZihlLmRhdGEuZXJyb3JzKXt2YXIgcz1uLmNyZWF0ZUVycm9yTWVzc2FnZShlLmRhdGEuZXJyb3JzKTtyZXR1cm4gdm9pZCBzLmZvckVhY2goZnVuY3Rpb24odCl7YS5hbGVydChcImRhbmdlclwiLHQsNWUzKX0pfXQudGlja2V0LmNvbW1lbnRzPWUuZGF0YS5jb21tZW50cyx0LnRpY2tldC5hc3NpZ25lZT1lLmRhdGEuYXNzaWduZWUsYS5hbGVydChcInN1Y2Nlc3NcIixcIlRoZSBhc3NpZ25lZSBoYXMgYmVlbiBjaGFuZ2VkIHN1Y2Nlc3NmdWxseVwiLDVlMyksbi5zZXRMb2FkaW5nKCExKSx0LmNhbmNlbFRhc2soKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2EuYWxlcnQoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byBhc3NpZ24gdGhlIHRpY2tldC4gUGxlYXNlIHRyeSBhZ2FpbiBhZnRlciBzb21lIHRpbWUuXCIsNWUzKSx0LmNhbmNlbFRhc2soKSxuLnNldExvYWRpbmcoITEpfSkpfSksdC5zZXRTYXZlQnRuTmFtZShcIkFzc2lnbiBUaWNrZXRcIil9XSkuY29udHJvbGxlcihcIkNoYW5nZVN0YXR1c0FjdGlvbkN0cmxcIixbXCIkc2NvcGVcIixcIkFjdGlvbkZhY3RvcnlcIixcIllnTm90aWZ5XCIsXCJIZWxwZXJGYWN0b3J5XCIsZnVuY3Rpb24odCxlLGEsbil7dmFyIHM9dC50aWNrZXQuc3RhdHVzO2UuZ2V0QWxsb3dlZFN0YXR1cyhzKS50aGVuKGZ1bmN0aW9uKGUpe2NvbnNvbGUubG9nKGUuZGF0YSksdC5hbGxvd2VkU3RhdHVzPWUuZGF0YS5zdGF0dXMuYWxsb3dlZCx0Lm5ld1N0YXR1cz10LmFsbG93ZWRTdGF0dXNbMF0sbi5zZXRMb2FkaW5nKCExKX0pLHQuc2V0U2F2ZUZuKGZ1bmN0aW9uKCl7cmV0dXJuIHQuYWN0aW9uRm9ybS5jb21tZW50LiRpbnZhbGlkfHx0LmFjdGlvbkZvcm0ubmV3U3RhdHVzLiRpbnZhbGlkPyh0LmFjdGlvbkZvcm0uY29tbWVudC4kdG91Y2hlZD0hMCx2b2lkKHQuYWN0aW9uRm9ybS5uZXdTdGF0dXMuJHRvdWNoZWQ9ITApKToobi5zZXRMb2FkaW5nKCEwKSx2b2lkIGUuY2hhbmdlU3RhdHVzKHQudGlja2V0LmlkLHQubmV3U3RhdHVzLHQudGFzay5jb21tZW50KS50aGVuKGZ1bmN0aW9uKGUpe3QudGlja2V0LmNvbW1lbnRzPWUuZGF0YS5jb21tZW50cyx0LnRpY2tldC5zdGF0dXM9ZS5kYXRhLnN0YXR1cyxhLmFsZXJ0KFwic3VjY2Vzc1wiLFwiVGhlIGFzc2lnbmVlIGhhcyBiZWVuIGNoYW5nZWQgc3VjY2Vzc2Z1bGx5XCIsNWUzKSxuLnNldExvYWRpbmcoITEpLHQuY2FuY2VsVGFzaygpfSkuY2F0Y2goZnVuY3Rpb24oZSl7YS5hbGVydChcImRhbmdlclwiLFwiVGhlcmUgd2FzIHNvbWUgZXJyb3IgdHJ5aW5nIHRvIGNoYW5nZSB0aGUgdGlja2V0IHN0YXR1cy4gUGxlYXNlIHRyeSBhZ2FpbiBhZnRlciBzb21lIHRpbWUuXCIsNWUzKSxuLnNldExvYWRpbmcoITEpLHQuY2FuY2VsVGFzaygpfSkpfSksdC5zZXRTYXZlQnRuTmFtZShcIkNoYW5nZSBTdGF0dXNcIil9XSkuY29udHJvbGxlcihcIkNvbW1lbnRBY3Rpb25DdHJsXCIsW1wiJHNjb3BlXCIsXCJBY3Rpb25GYWN0b3J5XCIsXCJZZ05vdGlmeVwiLFwiSGVscGVyRmFjdG9yeVwiLGZ1bmN0aW9uKHQsZSxhLG4pe24uc2V0TG9hZGluZyghMSksdC5zZXRTYXZlRm4oZnVuY3Rpb24oKXtyZXR1cm4gdC5hY3Rpb25Gb3JtLmNvbW1lbnQuJGludmFsaWQ/dm9pZCh0LmFjdGlvbkZvcm0uY29tbWVudC4kdG91Y2hlZD0hMCk6KG4uc2V0TG9hZGluZyghMCksdm9pZCBlLmFkZENvbW1lbnQodC50aWNrZXQuaWQsdC50YXNrLmNvbW1lbnQpLnRoZW4oZnVuY3Rpb24oZSl7dC50aWNrZXQuY29tbWVudHM9ZS5kYXRhLmNvbW1lbnRzLGEuYWxlcnQoXCJzdWNjZXNzXCIsXCJUaGUgY29tbWVudCBoYXMgYmVlbiBhZGRlZCBzdWNjZXNzZnVsbHlcIiw1ZTMpLG4uc2V0TG9hZGluZyghMSksdC5jYW5jZWxUYXNrKCl9KS5jYXRjaChmdW5jdGlvbihlKXthLmFsZXJ0KFwiZGFuZ2VyXCIsXCJUaGVyZSB3YXMgc29tZSBlcnJvciB0cnlpbmcgdG8gYWRkIGNvbW1lbnQuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyksbi5zZXRMb2FkaW5nKCExKSx0LmNhbmNlbFRhc2soKX0pKX0pLHQuc2V0U2F2ZUJ0bk5hbWUoXCJBZGQgQ29tbWVudFwiKX1dKS5jb250cm9sbGVyKFwiQ2xvc2VBY3Rpb25DdHJsXCIsW1wiJHNjb3BlXCIsXCJBY3Rpb25GYWN0b3J5XCIsXCJZZ05vdGlmeVwiLFwiSGVscGVyRmFjdG9yeVwiLGZ1bmN0aW9uKHQsZSxhLG4pe24uc2V0TG9hZGluZyghMSksdC5zZXRTYXZlRm4oZnVuY3Rpb24oKXtyZXR1cm4gdC5hY3Rpb25Gb3JtLmNvbW1lbnQuJGludmFsaWQ/dm9pZCh0LmFjdGlvbkZvcm0uY29tbWVudC4kdG91Y2hlZD0hMCk6KG4uc2V0TG9hZGluZyghMCksdm9pZCBlLmNsb3NlKHQudGlja2V0LmlkLHQudGFzay5jb21tZW50KS50aGVuKGZ1bmN0aW9uKGUpe3QudGlja2V0LmNvbW1lbnRzPWUuZGF0YS5jb21tZW50cyx0LnRpY2tldC5zdGF0dXM9ZS5kYXRhLnN0YXR1cyxhLmFsZXJ0KFwic3VjY2Vzc1wiLFwiVGhlIHN0YXR1cyBoYXMgYmVlbiBjaGFuZ2VkIHN1Y2Nlc3NmdWxseVwiLDVlMyksbi5zZXRMb2FkaW5nKCExKSx0LmNhbmNlbFRhc2soKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2EuYWxlcnQoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byBjaGFuZ2UgdGhlIHRpY2tldCBzdGF0dXMuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyksbi5zZXRMb2FkaW5nKCExKSx0LmNhbmNlbFRhc2soKX0pKX0pLHQuc2V0U2F2ZUJ0bk5hbWUoXCJDbG9zZVwiKX1dKS5jb250cm9sbGVyKFwiUmVvcGVuQWN0aW9uQ3RybFwiLFtcIiRzY29wZVwiLFwiQWN0aW9uRmFjdG9yeVwiLFwiWWdOb3RpZnlcIixcIkhlbHBlckZhY3RvcnlcIixmdW5jdGlvbih0LGUsYSxuKXtuLnNldExvYWRpbmcoITEpLHQuc2V0U2F2ZUZuKGZ1bmN0aW9uKCl7cmV0dXJuIHQuYWN0aW9uRm9ybS5jb21tZW50LiRpbnZhbGlkP3ZvaWQodC5hY3Rpb25Gb3JtLmNvbW1lbnQuJHRvdWNoZWQ9ITApOihuLnNldExvYWRpbmcoITApLHZvaWQgZS5yZW9wZW4odC50aWNrZXQuaWQsdC50YXNrLmNvbW1lbnQpLnRoZW4oZnVuY3Rpb24oZSl7dC50aWNrZXQuY29tbWVudHM9ZS5kYXRhLmNvbW1lbnRzLHQudGlja2V0LnN0YXR1cz1lLmRhdGEuc3RhdHVzLGEuYWxlcnQoXCJzdWNjZXNzXCIsXCJUaGUgc3RhdHVzIGhhcyBiZWVuIGNoYW5nZWQgc3VjY2Vzc2Z1bGx5XCIsNWUzKSxuLnNldExvYWRpbmcoITEpLHQuY2FuY2VsVGFzaygpfSkuY2F0Y2goZnVuY3Rpb24oZSl7YS5hbGVydChcImRhbmdlclwiLFwiVGhlcmUgd2FzIHNvbWUgZXJyb3IgdHJ5aW5nIHRvIGNoYW5nZSB0aGUgdGlja2V0IHN0YXR1cy4gUGxlYXNlIHRyeSBhZ2FpbiBhZnRlciBzb21lIHRpbWUuXCIsNWUzKSxuLnNldExvYWRpbmcoITEpLHQuY2FuY2VsVGFzaygpfSkpfSksdC5zZXRTYXZlQnRuTmFtZShcIlJlb3BlblwiKX1dKS5jb250cm9sbGVyKFwiQXdhaXRpbmdBY3Rpb25DdHJsXCIsW1wiJHNjb3BlXCIsXCJBY3Rpb25GYWN0b3J5XCIsXCJZZ05vdGlmeVwiLFwiSGVscGVyRmFjdG9yeVwiLGZ1bmN0aW9uKHQsZSxhLG4pe24uc2V0TG9hZGluZyghMSksdC5zZXRTYXZlRm4oZnVuY3Rpb24oKXtyZXR1cm4gdC5hY3Rpb25Gb3JtLmNvbW1lbnQuJGludmFsaWQ/dm9pZCh0LmFjdGlvbkZvcm0uY29tbWVudC4kdG91Y2hlZD0hMCk6KG4uc2V0TG9hZGluZyghMCksdm9pZCBlLmF3YWl0aW5nVXNlclJlc3BvbnNlKHQudGlja2V0LmlkLHQudGFzay5jb21tZW50KS50aGVuKGZ1bmN0aW9uKGUpe3QudGlja2V0LmNvbW1lbnRzPWUuZGF0YS5jb21tZW50cyx0LnRpY2tldC5zdGF0dXM9ZS5kYXRhLnN0YXR1cyxhLmFsZXJ0KFwic3VjY2Vzc1wiLFwiVGhlIHN0YXR1cyBoYXMgYmVlbiBjaGFuZ2VkIHN1Y2Nlc3NmdWxseVwiLDVlMyksbi5zZXRMb2FkaW5nKCExKSx0LmNhbmNlbFRhc2soKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2EuYWxlcnQoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byBjaGFuZ2UgdGhlIHRpY2tldCBzdGF0dXMuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyksbi5zZXRMb2FkaW5nKCExKSx0LmNhbmNlbFRhc2soKX0pKX0pLHQuc2V0U2F2ZUJ0bk5hbWUoXCJDaGFuZ2UgU3RhdHVzXCIpfV0pLmNvbnRyb2xsZXIoXCJBY2tub3dsZWRnZUFjdGlvbkN0cmxcIixbXCIkc2NvcGVcIixcIkFjdGlvbkZhY3RvcnlcIixcIllnTm90aWZ5XCIsXCJIZWxwZXJGYWN0b3J5XCIsZnVuY3Rpb24odCxlLGEsbil7bi5zZXRMb2FkaW5nKCExKSx0LnNldFNhdmVGbihmdW5jdGlvbigpe3JldHVybiB0LmFjdGlvbkZvcm0uY29tbWVudC4kaW52YWxpZD92b2lkKHQuYWN0aW9uRm9ybS5jb21tZW50LiR0b3VjaGVkPSEwKToobi5zZXRMb2FkaW5nKCEwKSx2b2lkIGUuYWNrbm93bGVkZ2VUaWNrZXQodC50aWNrZXQuaWQsdC50YXNrLmNvbW1lbnQpLnRoZW4oZnVuY3Rpb24oZSl7dC50aWNrZXQuY29tbWVudHM9ZS5kYXRhLmNvbW1lbnRzLHQudGlja2V0LnN0YXR1cz1lLmRhdGEuc3RhdHVzLGEuYWxlcnQoXCJzdWNjZXNzXCIsXCJUaGUgc3RhdHVzIGhhcyBiZWVuIGNoYW5nZWQgc3VjY2Vzc2Z1bGx5XCIsNWUzKSxuLnNldExvYWRpbmcoITEpLHQuY2FuY2VsVGFzaygpfSkuY2F0Y2goZnVuY3Rpb24oZSl7YS5hbGVydChcImRhbmdlclwiLFwiVGhlcmUgd2FzIHNvbWUgZXJyb3IgdHJ5aW5nIHRvIGNoYW5nZSB0aGUgdGlja2V0IHN0YXR1cy4gUGxlYXNlIHRyeSBhZ2FpbiBhZnRlciBzb21lIHRpbWUuXCIsNWUzKSxuLnNldExvYWRpbmcoITEpLHQuY2FuY2VsVGFzaygpfSkpfSksdC5zZXRTYXZlQnRuTmFtZShcIkFja25vd2xlZGdlIFRpY2tldFwiKX1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmNvbnRyb2xsZXIoXCJCdXR0b25Hcm91cEN0cmxcIixbXCIkc2NvcGVcIixcIkFjdGlvbkZhY3RvcnlcIixmdW5jdGlvbih0LG8pe3QuYnV0dG9uZ3JvdXA9e30sdC4kd2F0Y2goXCJ0aWNrZXQuc3RhdHVzXCIsZnVuY3Rpb24obil7biYmby5nZXRBbGxvd2VkQnV0dG9ucyhuKS50aGVuKGZ1bmN0aW9uKG8pe3QuYnV0dG9uZ3JvdXAuc2hvd0Fzc2lnbj1vLmFzc2lnbix0LmJ1dHRvbmdyb3VwLnNob3dDb21tZW50PW8uY29tbWVudCx0LmJ1dHRvbmdyb3VwLnNob3djaGFuZ2VTdGF0dXM9by5jaGFuZ2VTdGF0dXMsdC5idXR0b25ncm91cC5zaG93UmVvcGVuPW8ucmVvcGVuLHQuYnV0dG9uZ3JvdXAuc2hvd0Nsb3NlPW8uY2xvc2UsdC5idXR0b25ncm91cC5zaG93QWNrbm93bGVkZ2U9by5hY2tub3dsZWRnZSx0LmJ1dHRvbmdyb3VwLnNob3dBd2FpdGluZ1VzZXJzUmVzcG9uc2U9by5hd2FpdGluZ1VzZXJSZXNwb25zZX0pfSksdC5idXR0b25ncm91cC5jb21tZW50PWZ1bmN0aW9uKCl7by5zZXRUYXNrKFwiY29tbWVudFwiKX0sdC5idXR0b25ncm91cC5hc3NpZ249ZnVuY3Rpb24oKXtvLnNldFRhc2soXCJhc3NpZ25cIil9LHQuYnV0dG9uZ3JvdXAuY2hhbmdlU3RhdHVzPWZ1bmN0aW9uKCl7by5zZXRUYXNrKFwiY2hhbmdlc3RhdHVzXCIpfSx0LmJ1dHRvbmdyb3VwLmNsb3NlPWZ1bmN0aW9uKCl7by5zZXRUYXNrKFwiY2xvc2VcIil9LHQuYnV0dG9uZ3JvdXAucmVvcGVuPWZ1bmN0aW9uKCl7by5zZXRUYXNrKFwicmVvcGVuXCIpfSx0LmJ1dHRvbmdyb3VwLmFja25vd2xlZGdlPWZ1bmN0aW9uKCl7by5zZXRUYXNrKFwiYWNrbm93bGVkZ2VcIil9LHQuYnV0dG9uZ3JvdXAuYXdhaXRpbmd1c2Vyc3Jlc3BvbnNlPWZ1bmN0aW9uKCl7by5zZXRUYXNrKFwiYXdhaXRpbmd1c2Vyc3Jlc3BvbnNlXCIpfX1dKTsiXSwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
