angular.module("ticketSystem",["ngRoute","textAngular","yangular-grid","yg-modal","ngFlash","ui.router"]).service("authInterceptor",["$q","$injector","Authentication",function(t,e,r){return{response:function(e){return 401===e.status&&r.clearUser(),e||t.when(e)},responseError:function(l){return 401===l.status&&(r.clearUser(),e.get("$state").go("users-login.login")),403===l.status&&e.get("$state").go("ticket.my-tickets"),t.reject(l)}}}]).config(["$httpProvider","$stateProvider","$urlRouterProvider",function(t,e,r){r.otherwise("/ticket/my-tickets"),e.state("ticket",{url:"/ticket",controller:"TicketsCtrl",templateUrl:"templates/tickets/tickets.html"}).state("ticket.my-tickets",{url:"/my-tickets",controller:"TicketsCtrl",templateUrl:"templates/tickets/view-my-tickets.html"}).state("ticket.to-me-tickets",{url:"/tome-tickets",controller:"TicketsCtrl",templateUrl:"templates/tickets/view-tome-tickets.html"}).state("ticket.all-tickets",{url:"/all-tickets",controller:"TicketsCtrl",templateUrl:"templates/tickets/view-all-tickets.html"}).state("ticket-new",{url:"/ticket/new",controller:"NewTicketCtrl",templateUrl:"templates/tickets/new-ticket.html"}).state("ticket-view",{url:"/ticket/view/:id",controller:"ViewTicketCtrl",templateUrl:"templates/tickets/view-ticket.html"}).state("ticket-edit",{url:"/ticket/edit/:id",controller:"EditTicketCtrl",templateUrl:"templates/tickets/edit-ticket.html"}).state("users-login",{url:"/users",controller:"MainLoginCtrl",templateUrl:"templates/users/user-login.html"}).state("users-login.login",{url:"/login",controller:"LoginCtrl",templateUrl:"templates/users/login.html"}).state("users-login.register",{url:"/register",controller:"RegisterCtrl",templateUrl:"templates/users/register.html"}).state("users-profile",{url:"/users/profile",controller:"ProfileCtrl",templateUrl:"templates/users/profile.html"}).state("users-register",{url:"/users/register",controller:"RegisterCtrl",templateUrl:"templates/users/register.html"}).state("admin-user-management",{url:"/admin/user-management",controller:"ManageUsersCtrl",templateUrl:"templates/admin/manage-users.html"}).state("auth-google",{url:"/auth/google/:id/:email",controller:"SetUserCtrl",templateUrl:"templates/users/set-username.html"}).state("admin-edit",{url:"/admin/edit/:username",controller:"ManageUsersCtrl",templateUrl:"templates/admin/edit-user.html"}).state("admin-reset-password",{url:"/admin/reset-password/:id",controller:"ManageUsersCtrl",templateUrl:"templates/admin/reset-password.html"}),t.interceptors.push("authInterceptor")}]);
angular.module("ticketSystem").directive("ygToggle",function(){return{restrict:"E",scope:{toggle:"="},replace:!0,template:'<div ng-show="loaded" class="toggle-button"><div class="toggle"></div></div>',link:function(e,t,l){var o=function(l){e.loaded=!0,l?t.addClass("is-active"):t.removeClass("is-active")};e.$watch("toggle.value",function(e,t){"undefined"!=typeof e&&o(e)}),t.on("click",function(){e.toggle.value=!e.toggle.value,o(e.toggle.value)})}}});
angular.module("ticketSystem").factory("TicketFactory",["$http",function(t){var e={};return e.createNewTicket=function(e){return t.post("tickets/new",e)},e.updateTicket=function(e,i){return t.put("tickets/"+e,i)},e.getTicketById=function(e){return t.get("tickets/"+e)},e.getInitialTicketData=function(e){return t.get("tickets/edit-ticket/initial-load/"+e)},e}]);
angular.module("ticketSystem").factory("CommonFactory",["$http",function(t){var e={};return e.getInitialStaticData=function(){return t.get("tickets/static-data")},e}]).filter("reverse",function(){return function(t){if(t)return t.slice().reverse()}});
angular.module("ticketSystem").factory("UserFactory",["$http",function(e){var t={};return t.login=function(t,r,n){return e.post("accounts/login",{username:t,password:r,remember:n})},t.logout=function(){return e.get("accounts/logout")},t.registerUser=function(t){return e.post("accounts/register",t)},t.getUserByUsername=function(t){return e.get("users/profile/"+t)},t.updateProfile=function(t){return e.post("users/profile/"+t.username,t)},t.setUsername=function(t){return e.post("accounts/set-username",t)},t.getAllUserDetails=function(){return e.get("admin/users-details")},t.getUserDetails=function(t){return e.get("admin/user-details/"+t)},t.updateUserDetails=function(t,r){return e.post("admin/update-user/"+t,r)},t.resetPassword=function(t,r){return e.post("admin/reset-password/"+t,r)},t}]);
angular.module("ticketSystem").factory("Authentication",function(){var t={};return t.getIsAuthenticated=function(){if(localStorage.getItem("ticketSystemUser"))return!0},t.setUser=function(t){localStorage.setItem("ticketSystemUser",JSON.stringify(t))},t.clearUser=function(){localStorage.removeItem("ticketSystemUser")},t.getUser=function(){return JSON.parse(localStorage.getItem("ticketSystemUser"))},t});
angular.module("ticketSystem").factory("HelperFactory",["Authentication",function(r){var e={};return e.createErrorMessage=function(r){for(var e="",t=0;t<r.length;t++)e+=r[t].error+"<br/>";return e},e.setAllUsers=function(r){this.users=r},e.getAllUsers=function(){return this.users},e.getAllUsersButSelf=function(e){var t=r.getUser().username;return e.filter(function(r){return r.username!==t})},e.removeUserFromUsers=function(r,e){return r.filter(function(r){var t=e.indexOf(r.username)===-1;return t})},e.isCurrentUserAdmin=function(){var e=r.getUser();return e.role.indexOf("Admin")>-1},e.isCurrentUserSupport=function(){var e=r.getUser();return e.role.indexOf("Support")>-1},e}]);
angular.module("ticketSystem").factory("ActionFactory",["$http","$q",function(t,e){var n,o={};return o.setTask=function(t){n=t},o.getTask=function(){return n},o.getAssignees=function(){return t.get("static/all-users")},o.getAllowedStatus=function(e){return t.get("static/allowed-status/"+e)},o.getAllowedButtons=function(n){var o=e.defer();return t.get("static/action-buttons/"+n).then(function(t){var e={};e.assign=t.data.actionButtons.assign,e.comment=t.data.actionButtons.comment,e.changeStatus=t.data.actionButtons.changeStatus,e.reopen=t.data.actionButtons.reopen,e.close=t.data.actionButtons.close,e.acknowledge=t.data.actionButtons.acknowledge,e.awaitingUserResponse=t.data.actionButtons.awaitingUserResponse,o.resolve(e)}).catch(function(t){o.reject(t)}),o.promise},o.assign=function(e,n,o){return t.post("tickets/assign/"+e,{assignee:n,comment:o})},o.changeStatus=function(e,n,o){return t.post("tickets/change-status/"+e,{status:n,comment:o})},o.awaitingUserResponse=function(e,n){return t.post("tickets/awaiting-user-response/"+e,{comment:n})},o.reopen=function(e,n){return t.post("tickets/re-open/"+e,{comment:n})},o.close=function(e,n){return t.post("tickets/close/"+e,{comment:n})},o.addComment=function(e,n){return t.post("tickets/addComment/"+e,{comment:n})},o.deleteComment=function(e,n){return t.delete("tickets/deleteComment/"+e._id+"?commentId="+n._id)},o}]);
angular.module("ticketSystem").controller("MainCtrl",["$scope","$state","Authentication","UserFactory","$window","Flash",function(e,t,i,n,o,r){var s=function(){var t=i.getUser();t.role.indexOf("Admin")>-1?e.isAdmin=!0:e.isAdmin=!1,e.isRegularUser=!0,(i.getUser().role.indexOf("Support")>-1||i.getUser().role.indexOf("Admin")>-1)&&(e.isRegularUser=!1)};e.init=function(){var t=i.getUser();t&&(t.role.indexOf("Admin")>-1?e.isAdmin=!0:e.isAdmin=!1)},e.getUser=i.getUser,e.isAuthenticated=i.getIsAuthenticated,e.logout=function(){n.logout().then(function(){i.clearUser(),t.go("users-login.login")})},e.$on("successful-login",s),e.getProfile=function(){t.go("users-profile")},o.app={},o.app.auth=function(e,n){""!==e?r.create("danger",e.toString(),5e3,{},!1):n.username&&""!==n.username?n&&(i.setUser(n),s(),t.go("ticket.my-tickets")):t.go("auth-google",{id:n._id.toString(),email:n.email})}}]);
angular.module("ticketSystem").controller("ManageUsersCtrl",["$scope","$state","$stateParams","Authentication","HelperFactory","UserFactory","Flash",function(e,s,a,r,t,i,n){var u=function(){return""},c=function(e){return e===!0?"fa fa-check":"fa fa-remove"},o=function(){return""},l=function(e){return e.indexOf("Admin")>-1?"fa fa-check":"fa fa-remove"};e.config={},e.config.url="/admin/users-details",e.config.columns=[],e.config.columns.push({key:"username",name:"Username",cssClass:"col-md-6"}),e.config.columns.push({key:"isActive",name:"Is Active",cssClass:"col-md-3",render:u,renderClass:c}),e.config.columns.push({key:"role",name:"Is Admin",cssClass:"col-md-3",render:o,renderClass:l}),e.config.sortQuerystringParam="sort",e.config.orderQuerystringParam="order",e.config.pageQuerystringParam="page",e.config.sizeQuerystringParam="size",e.config.objectName="users",e.config.onRowClick=function(e){s.go("admin-edit",{username:e.username})},e.isActive={},e.isAdmin={},e.userDetails={},e.userDetails.getUserDetails=function(){var s=a.username;i.getUserDetails(s).then(function(s){e.userDetails.username=s.data.user.username,e.userDetails.firstname=s.data.user.firstname,e.userDetails.lastname=s.data.user.lastname,e.userDetails.id=s.data.user._id;var a=s.data.user.role;a.indexOf("Admin")>-1?e.userDetails.isAdmin=!0:e.userDetails.isAdmin=!1,e.userDetails.isActive=s.data.user.isActive,e.userDetails.email=s.data.user.email,e.isActive.key="isActive",e.isActive.value=e.userDetails.isActive,e.isAdmin.key="isAdmin",e.isAdmin.value=e.userDetails.isAdmin}).catch(function(e){n.create("danger","There was some error trying to fetch user details. Please try again after some time.",5e3,{},!1)})},e.userDetails.update=function(){e.userDetails.isAdmin=e.isAdmin.value,e.userDetails.isActive=e.isActive.value,i.updateUserDetails(e.userDetails.username,e.userDetails).then(function(e){n.create("success","User details updated successfully",5e3,{},!1)}).catch(function(e){n.create("danger","There was some error trying to update user details. Please try again after some time.",5e3,{},!1)})},e.resetPassword={},e.resetPassword.reset=function(){var r=a.id;i.resetPassword(r,e.resetPassword).then(function(e){if(e.data.errors){var a=t.createErrorMessage(e.data.errors);n.create("danger",a,5e3,{},!1)}else n.create("success","Password has been reset successfully",5e3,{},!1),s.go("admin-user-management")}).catch(function(e){n.create("danger","The request could not ben made successfully. Please try later",5e3,{},!1)})}}]);
angular.module("ticketSystem").controller("EditTicketCtrl",["$scope","$stateParams","$state","TicketFactory","Flash","HelperFactory","Authentication",function(e,t,a,r,i,c,n){e.toolbarConfig=[["h1","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],[],["insertLink"]],e.cancel=function(){a.go("ticket-view",{id:e.ticket.id})},e.renderDate=function(e){return new Date(Date.parse(e)).toLocaleDateString()},r.getTicketById(t.id).then(function(t){if(t.data.errors){a.go("ticket.my-tickets");var s=c.createErrorMessage(t.data.errors);i.create("danger",s,4e3,{},!1)}else e.ticket=t.data,e.ticket.currentUser=n.getUser().username,r.getInitialTicketData(e.ticket.status).then(function(t){e.priorities=t.data.priorities.values,e.types=t.data.types.values,e.users=t.data.users,c.setAllUsers(e.users),e.statuses=t.data.statuses}).catch(function(e){console.log(e),i.create("danger","An error occurred while trying to detch the static data.",5e3,{},!1)})}).catch(function(e){console.log(e),i.create("danger","An error occurred while trying to get ticket details. Please try again later.",5e3,{},!1)}),e.update=function(){r.updateTicket(e.ticket._id,e.ticket).then(function(t){e.ticket=t.data,i.create("success","Ticket updated successfully.",5e3,{},!1),a.go("ticket-view",{id:t.data.id})}).catch(function(e){console.log(e),i.create("danger","An error occurred while trying to update ticket details. Please try again later.",5e3,{},!1)})}}]);
angular.module("ticketSystem").controller("NewTicketCtrl",["$scope","$state","TicketFactory","Flash","CommonFactory","HelperFactory",function(e,t,r,i,a,n){a.getInitialStaticData().then(function(t){e.priorities=t.data.priorities.values,e.types=t.data.types.values,e.users=t.data.users,e.newTicket.priority=e.priorities[0].value,e.newTicket.type=e.types[0].value,e.newTicket.assignee=e.users[0].username}),e.newTicket={},e.toolbarConfig=[["h1","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],[],["insertLink"]],e.save=function(){r.createNewTicket({title:e.newTicket.title,description:e.newTicket.description,type:e.newTicket.type}).then(function(e){if(e.data.errors){var r=n.createErrorMessage(e.data.errors);i.create("danger",r,5e3,{},!1)}else t.go("ticket-view",{id:e.data.id})},function(e){i.create("danger","An error occurred while trying to create new ticket. Please try again later.",5e3,{},!1),console.log(e)})}}]);
angular.module("ticketSystem").controller("TaskCtrl",["$scope","TaskFactory",function(a,t){console.log(t),a.getTask=t.getTask,a.task={},a.commentPartial="templates/partials/comments-partial.html",a.$watch("getTask()",function(t,s){switch(console.log(t),a.task.name="templates/partials/"+t+"-partial.html",t){case"comment":a.task.showTaskPanel=!0,a.task.title="Add new comment",a.task.showMainPanel=!1,a.task.showCommentsPanel=!0;break;case"assign":a.task.showTaskPanel=!0,a.task.title="Assign ticket",a.task.showMainPanel=!0,a.task.showCommentsPanel=!0}})}]);
angular.module("ticketSystem").controller("TicketsCtrl",["$scope","$state",function(e,t){e.isSupport=!1;var n=JSON.parse(localStorage.getItem("ticketSystemUser"));n&&(n.role.indexOf("Admin")>-1||n.role.indexOf("Support")>-1)&&(e.isSupport=!0);var i=function(e){return new Date(Date.parse(e)).toLocaleDateString()},c=function(e){return e?String(e).replace(/<[^>]+>/gm,""):""},s=function(e){return e?e:"Unassigned"};e.config={},e.config.columns=[],e.config.columns.push({key:"id",name:"ID",cssClass:"col-md-1"}),e.config.columns.push({key:"title",name:"Title",cssClass:"col-md-2"}),e.config.columns.push({key:"description",name:"Description",cssClass:"col-md-2",render:c}),e.config.columns.push({key:"type",name:"Type",cssClass:"col-md-1"}),e.config.columns.push({key:"assignee",name:"Assignee",cssClass:"col-md-2",render:s}),e.config.columns.push({key:"createdDate",name:"Created Date",cssClass:"col-md-2",render:i}),e.config.columns.push({key:"createdBy",name:"Created By",cssClass:"col-md-2"}),e.config.sortQuerystringParam="sort",e.config.orderQuerystringParam="order",e.config.pageQuerystringParam="page",e.config.sizeQuerystringParam="size",e.active="",e.config.onRowClick=function(e){t.go("ticket-view",{id:e.id})},e.config.objectName="tickets",e.initiateAllTicket=function(){e.config.url="/tickets/all",e.$parent.active="all"},e.initiateMyTicket=function(){e.config.url="/tickets/my",e.$parent.active="my"},e.initiateToMeTicket=function(){e.config.url="/tickets/to-me",e.$parent.active="tome"}}]);
angular.module("ticketSystem").controller("ViewTicketCtrl",["$scope","$stateParams","$state","TicketFactory","Flash","Authentication","HelperFactory","YgModal","ActionFactory",function(e,t,r,c,n,i,a,o,s){e.ticket={},e.renderDate=function(e){return new Date(Date.parse(e)).toLocaleDateString()},e.edit=function(){r.go("ticket-edit",{id:e.ticket.id})};var d=function(t,r){return function(){s.deleteComment(t,r).then(function(t){console.log(t),e.ticket.comments=t.data.comments,n.create("success","The comment was deleted successfully",5e3,{},!1)}).catch(function(e){n.create("danger","An error occurred while trying to delete comment. Please try again later.",5e3,{},!1)})}};e.deleteComment=function(e,t){o.confirm(d(e,t)),o.open("Are you sure you want to do this?","This will delete the comment permanently")},c.getTicketById(t.id).then(function(t){t.data.errors?(r.go("ticket.my-tickets"),n.create("danger",t.data.errors[0].msg,4e3,{},!1)):(e.ticket=t.data,e.ticket.assignee=e.ticket.assignee?e.ticket.assignee:"Unassigned",e.ticket.createdDate=e.renderDate(e.ticket.createdDate),e.ticket.currentUser=i.getUser().username,(e.ticket.assignee===e.ticket.currentUser||e.ticket.createdBy===e.ticket.currentUser||a.isCurrentUserAdmin()||a.isCurrentUserSupport())&&(e.showEdit=!0))}).catch(function(e){console.log(e),n.create("danger","An error occurred while trying to get ticket details. Please try again later.",5e3,{},!1)})}]);
angular.module("ticketSystem").controller("LoginCtrl",["$scope","$state","$window","UserFactory","Authentication",function(e,t,o,r,n){e.error=!1,e.message="",e.login=function(){r.login(e.username,e.password,e.remember).then(function(o){o.data.isAuthenticated?(n.setUser(o.data.user),e.$emit("successful-login"),t.go("ticket.my-tickets")):(e.error=!0,e.message=o.data.msg)}).catch(function(t){e.error=!0,e.message="An error occurred while trying to log you in. Please try again later"})},e.googleLogin=function(){var e="accounts/auth/google",t=600,r=450,n=(window.outerHeight-r)/2,i=(window.outerWidth-t)/2;o.open(e,"facebook_login","width="+t+",height="+r+",scrollbars=0,top="+n+",left="+i)}}]);
angular.module("ticketSystem").controller("MainLoginCtrl",["$rootScope","$scope","$state",function(t,e,n){e.statename=n.current.name,t.$on("$stateChangeStart",function(t,n,a,o,r){e.statename=n.name})}]);
angular.module("ticketSystem").controller("ProfileCtrl",["$scope","$state","Authentication","UserFactory","HelperFactory","Flash",function(e,a,r,s,t,u){e.user={},e.init=function(){s.getUserByUsername(r.getUser().username).then(function(r){if(r.data.errors){var s=t.createErrorMessage(r.data.errors);u.create("danger",s,5e3,{},!1),a.go("ticket.my-tickets")}else e.user.firstname=r.data.user.firstname;e.user.lastname=r.data.user.lastname,e.user.username=r.data.user.username,e.user.email=r.data.user.email})},e.update=function(){s.updateProfile(e.user).then(function(s){e.user.firstname=s.data.user.firstname,e.user.lastname=s.data.user.lastname,e.user.username=s.data.user.username,e.user.email=s.data.user.email,r.setUser(e.user),u.create("success","User details have been updated successfully",5e3,{},!1),a.go("/")}).catch(function(e){u.create("danger","There was some error trying to update user details. Please try again after some time.",5e3,{},!1)})}}]);
angular.module("ticketSystem").controller("RegisterCtrl",["$scope","$state","UserFactory","HelperFactory","Flash",function(e,r,t,s,a){e.newUser={},e.register=function(){t.registerUser(e.newUser).then(function(e){if(e.data.errors){var t=s.createErrorMessage(e.data.errors);a.create("danger",t,5e3,{},!1)}else a.create("success","User has been created successfully. You can now login.",5e3,{},!1),r.go("users-login.login")}).catch(function(e){a.create("danger","There was some error trying to create the user. Please try again after some time.",5e3,{},!1)})}}]);
angular.module("ticketSystem").controller("SetUserCtrl",["$scope","$stateParams","$state","UserFactory","Flash","Authentication",function(e,s,t,r,a,n){var c=s.id,o=s.email;e.setUsername={},e.setUsername.email=o,e.saveUsername=function(){r.setUsername({id:c,username:e.setUsername.username}).then(function(s){if(s.data.errors){var r=HelperFactory.createErrorMessage(s.data.errors);a.create("danger",r,5e3,{},!1)}else n.setUser(s.data.user),e.$emit("successful-login"),t.go("ticket.my-tickets"),a.create("success","Username has been set successfully.",5e3,{},!1)}).catch(function(e){a.create("danger","There was some error trying to set the username. Please try again after some time.",5e3,{},!1)})}}]);
angular.module("ticketSystem").controller("ActionsCtrl",["$scope","ActionFactory","HelperFactory",function(e,t,a){e.getTask=t.getTask,e.task={},e.setSaveFn=function(t){e.saveTask=t},e.cancelTask=function(){t.setTask(null),e.task.comment="",e.task.showTaskPanel=!1,e.task.showMainPanel=!1},e.setSaveBtnName=function(t){e.saveBtnName=t},e.$watch("getTask()",function(s,n){if(s)switch(e.task.showTaskPanel=!0,e.task.showMainPanel=!0,e.task.name="templates/partials/action/"+s+"-action-partial.html",s){case"comment":e.task.title="Add new comment";break;case"awaitingusersresponse":e.task.title="Awaiting users response";break;case"close":e.task.title="Close ticket";break;case"reopen":e.task.title="Reopen ticket";break;case"acknowledge":e.task.title="Acknowledge ticket";break;case"assign":e.task.title="Assign ticket",t.getAssignees().then(function(t){e.users=t.data.users,e.users=a.removeUserFromUsers(e.users,[e.ticket.createdBy,e.ticket.assignee])});break;case"changestatus":e.task.title="Change ticket status";var c=e.ticket.status;t.getAllowedStatus(c).then(function(t){e.allowedStatus=t.data.status.allowed})}})}]).controller("AssignActionCtrl",["$scope","ActionFactory","Flash",function(e,t,a){e.$watch("users",function(t){t&&(e.assignee=t[0].username)}),e.setSaveFn(function(){t.assign(e.ticket.id,e.assignee,e.task.comment).then(function(t){e.ticket.comments=t.data.comments,e.ticket.assignee=t.data.assignee,a.create("success","The assignee has been changed successfully",5e3,{},!1),e.cancelTask()}).catch(function(t){a.create("danger","There was some error trying to assign the ticket. Please try again after some time.",5e3,{},!1),e.cancelTask()})}),e.setSaveBtnName("Assign Ticket")}]).controller("ChangeStatusActionCtrl",["$scope","ActionFactory","Flash",function(e,t,a){e.$watch("allowedStatus",function(t){t&&(console.log(t),e.newStatus=t[0])}),e.setSaveFn(function(){t.changeStatus(e.ticket.id,e.newStatus,e.task.comment).then(function(t){e.ticket.comments=t.data.comments,e.ticket.status=t.data.status,a.create("success","The assignee has been changed successfully",5e3,{},!1),e.cancelTask()}).catch(function(t){a.create("danger","There was some error trying to change the ticket status. Please try again after some time.",5e3,{},!1),e.cancelTask()})}),e.setSaveBtnName("Change Status")}]).controller("CommentActionCtrl",["$scope","ActionFactory","Flash",function(e,t,a){e.setSaveFn(function(){t.addComment(e.ticket.id,e.task.comment).then(function(t){e.ticket.comments=t.data.comments,a.create("success","The comment has been added successfully",5e3,{},!1),e.cancelTask()}).catch(function(t){a.create("danger","There was some error trying to add comment. Please try again after some time.",5e3,{},!1),e.cancelTask()})}),e.setSaveBtnName("Add Comment")}]).controller("CloseActionCtrl",["$scope","ActionFactory","Flash",function(e,t,a){e.setSaveFn(function(){t.close(e.ticket.id,e.task.comment).then(function(t){e.ticket.comments=t.data.comments,e.ticket.status=t.data.status,a.create("success","The status has been changed successfully",5e3,{},!1),e.cancelTask()}).catch(function(t){a.create("danger","There was some error trying to change the ticket status. Please try again after some time.",5e3,{},!1),e.cancelTask()})}),e.setSaveBtnName("Close")}]).controller("ReopenActionCtrl",["$scope","ActionFactory","Flash",function(e,t,a){e.setSaveFn(function(){t.reopen(e.ticket.id,e.task.comment).then(function(t){e.ticket.comments=t.data.comments,e.ticket.status=t.data.status,a.create("success","The status has been changed successfully",5e3,{},!1),e.cancelTask()}).catch(function(t){a.create("danger","There was some error trying to change the ticket status. Please try again after some time.",5e3,{},!1),e.cancelTask()})}),e.setSaveBtnName("Reopen")}]).controller("AwaitingActionCtrl",["$scope","ActionFactory","Flash",function(e,t,a){e.setSaveFn(function(){t.awaitingUserResponse(e.ticket.id,e.task.comment).then(function(t){e.ticket.comments=t.data.comments,e.ticket.status=t.data.status,a.create("success","The status has been changed successfully",5e3,{},!1),e.cancelTask()}).catch(function(t){a.create("danger","There was some error trying to change the ticket status. Please try again after some time.",5e3,{},!1),e.cancelTask()})}),e.setSaveBtnName("Change Status")}]);
angular.module("ticketSystem").controller("ButtonGroupCtrl",["$scope","ActionFactory",function(t,o){t.buttongroup={},t.$watch("ticket.status",function(n){n&&o.getAllowedButtons(n).then(function(o){t.buttongroup.showAssign=o.assign,t.buttongroup.showComment=o.comment,t.buttongroup.showchangeStatus=o.changeStatus,t.buttongroup.showReopen=o.reopen,t.buttongroup.showClose=o.close,t.buttongroup.showAcknowledge=o.acknowledge,t.buttongroup.showAwaitingUsersResponse=o.awaitingUserResponse})}),t.buttongroup.comment=function(){o.setTask("comment")},t.buttongroup.assign=function(){o.setTask("assign")},t.buttongroup.changeStatus=function(){o.setTask("changestatus")},t.buttongroup.close=function(){o.setTask("close")},t.buttongroup.reopen=function(){o.setTask("reopen")},t.buttongroup.acknowledge=function(){o.setTask("acknowledge")},t.buttongroup.awaitingusersresponse=function(){o.setTask("awaitingusersresponse")}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJtYWluLm1pbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiLFtcIm5nUm91dGVcIixcInRleHRBbmd1bGFyXCIsXCJ5YW5ndWxhci1ncmlkXCIsXCJ5Zy1tb2RhbFwiLFwibmdGbGFzaFwiLFwidWkucm91dGVyXCJdKS5zZXJ2aWNlKFwiYXV0aEludGVyY2VwdG9yXCIsW1wiJHFcIixcIiRpbmplY3RvclwiLFwiQXV0aGVudGljYXRpb25cIixmdW5jdGlvbih0LGUscil7cmV0dXJue3Jlc3BvbnNlOmZ1bmN0aW9uKGUpe3JldHVybiA0MDE9PT1lLnN0YXR1cyYmci5jbGVhclVzZXIoKSxlfHx0LndoZW4oZSl9LHJlc3BvbnNlRXJyb3I6ZnVuY3Rpb24obCl7cmV0dXJuIDQwMT09PWwuc3RhdHVzJiYoci5jbGVhclVzZXIoKSxlLmdldChcIiRzdGF0ZVwiKS5nbyhcInVzZXJzLWxvZ2luLmxvZ2luXCIpKSw0MDM9PT1sLnN0YXR1cyYmZS5nZXQoXCIkc3RhdGVcIikuZ28oXCJ0aWNrZXQubXktdGlja2V0c1wiKSx0LnJlamVjdChsKX19fV0pLmNvbmZpZyhbXCIkaHR0cFByb3ZpZGVyXCIsXCIkc3RhdGVQcm92aWRlclwiLFwiJHVybFJvdXRlclByb3ZpZGVyXCIsZnVuY3Rpb24odCxlLHIpe3Iub3RoZXJ3aXNlKFwiL3RpY2tldC9teS10aWNrZXRzXCIpLGUuc3RhdGUoXCJ0aWNrZXRcIix7dXJsOlwiL3RpY2tldFwiLGNvbnRyb2xsZXI6XCJUaWNrZXRzQ3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3RpY2tldHMvdGlja2V0cy5odG1sXCJ9KS5zdGF0ZShcInRpY2tldC5teS10aWNrZXRzXCIse3VybDpcIi9teS10aWNrZXRzXCIsY29udHJvbGxlcjpcIlRpY2tldHNDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdGlja2V0cy92aWV3LW15LXRpY2tldHMuaHRtbFwifSkuc3RhdGUoXCJ0aWNrZXQudG8tbWUtdGlja2V0c1wiLHt1cmw6XCIvdG9tZS10aWNrZXRzXCIsY29udHJvbGxlcjpcIlRpY2tldHNDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdGlja2V0cy92aWV3LXRvbWUtdGlja2V0cy5odG1sXCJ9KS5zdGF0ZShcInRpY2tldC5hbGwtdGlja2V0c1wiLHt1cmw6XCIvYWxsLXRpY2tldHNcIixjb250cm9sbGVyOlwiVGlja2V0c0N0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy90aWNrZXRzL3ZpZXctYWxsLXRpY2tldHMuaHRtbFwifSkuc3RhdGUoXCJ0aWNrZXQtbmV3XCIse3VybDpcIi90aWNrZXQvbmV3XCIsY29udHJvbGxlcjpcIk5ld1RpY2tldEN0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy90aWNrZXRzL25ldy10aWNrZXQuaHRtbFwifSkuc3RhdGUoXCJ0aWNrZXQtdmlld1wiLHt1cmw6XCIvdGlja2V0L3ZpZXcvOmlkXCIsY29udHJvbGxlcjpcIlZpZXdUaWNrZXRDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdGlja2V0cy92aWV3LXRpY2tldC5odG1sXCJ9KS5zdGF0ZShcInRpY2tldC1lZGl0XCIse3VybDpcIi90aWNrZXQvZWRpdC86aWRcIixjb250cm9sbGVyOlwiRWRpdFRpY2tldEN0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy90aWNrZXRzL2VkaXQtdGlja2V0Lmh0bWxcIn0pLnN0YXRlKFwidXNlcnMtbG9naW5cIix7dXJsOlwiL3VzZXJzXCIsY29udHJvbGxlcjpcIk1haW5Mb2dpbkN0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy91c2Vycy91c2VyLWxvZ2luLmh0bWxcIn0pLnN0YXRlKFwidXNlcnMtbG9naW4ubG9naW5cIix7dXJsOlwiL2xvZ2luXCIsY29udHJvbGxlcjpcIkxvZ2luQ3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3VzZXJzL2xvZ2luLmh0bWxcIn0pLnN0YXRlKFwidXNlcnMtbG9naW4ucmVnaXN0ZXJcIix7dXJsOlwiL3JlZ2lzdGVyXCIsY29udHJvbGxlcjpcIlJlZ2lzdGVyQ3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3VzZXJzL3JlZ2lzdGVyLmh0bWxcIn0pLnN0YXRlKFwidXNlcnMtcHJvZmlsZVwiLHt1cmw6XCIvdXNlcnMvcHJvZmlsZVwiLGNvbnRyb2xsZXI6XCJQcm9maWxlQ3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3VzZXJzL3Byb2ZpbGUuaHRtbFwifSkuc3RhdGUoXCJ1c2Vycy1yZWdpc3RlclwiLHt1cmw6XCIvdXNlcnMvcmVnaXN0ZXJcIixjb250cm9sbGVyOlwiUmVnaXN0ZXJDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdXNlcnMvcmVnaXN0ZXIuaHRtbFwifSkuc3RhdGUoXCJhZG1pbi11c2VyLW1hbmFnZW1lbnRcIix7dXJsOlwiL2FkbWluL3VzZXItbWFuYWdlbWVudFwiLGNvbnRyb2xsZXI6XCJNYW5hZ2VVc2Vyc0N0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy9hZG1pbi9tYW5hZ2UtdXNlcnMuaHRtbFwifSkuc3RhdGUoXCJhdXRoLWdvb2dsZVwiLHt1cmw6XCIvYXV0aC9nb29nbGUvOmlkLzplbWFpbFwiLGNvbnRyb2xsZXI6XCJTZXRVc2VyQ3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3VzZXJzL3NldC11c2VybmFtZS5odG1sXCJ9KS5zdGF0ZShcImFkbWluLWVkaXRcIix7dXJsOlwiL2FkbWluL2VkaXQvOnVzZXJuYW1lXCIsY29udHJvbGxlcjpcIk1hbmFnZVVzZXJzQ3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL2FkbWluL2VkaXQtdXNlci5odG1sXCJ9KS5zdGF0ZShcImFkbWluLXJlc2V0LXBhc3N3b3JkXCIse3VybDpcIi9hZG1pbi9yZXNldC1wYXNzd29yZC86aWRcIixjb250cm9sbGVyOlwiTWFuYWdlVXNlcnNDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvYWRtaW4vcmVzZXQtcGFzc3dvcmQuaHRtbFwifSksdC5pbnRlcmNlcHRvcnMucHVzaChcImF1dGhJbnRlcmNlcHRvclwiKX1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmRpcmVjdGl2ZShcInlnVG9nZ2xlXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIsc2NvcGU6e3RvZ2dsZTpcIj1cIn0scmVwbGFjZTohMCx0ZW1wbGF0ZTonPGRpdiBuZy1zaG93PVwibG9hZGVkXCIgY2xhc3M9XCJ0b2dnbGUtYnV0dG9uXCI+PGRpdiBjbGFzcz1cInRvZ2dsZVwiPjwvZGl2PjwvZGl2PicsbGluazpmdW5jdGlvbihlLHQsbCl7dmFyIG89ZnVuY3Rpb24obCl7ZS5sb2FkZWQ9ITAsbD90LmFkZENsYXNzKFwiaXMtYWN0aXZlXCIpOnQucmVtb3ZlQ2xhc3MoXCJpcy1hY3RpdmVcIil9O2UuJHdhdGNoKFwidG9nZ2xlLnZhbHVlXCIsZnVuY3Rpb24oZSx0KXtcInVuZGVmaW5lZFwiIT10eXBlb2YgZSYmbyhlKX0pLHQub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7ZS50b2dnbGUudmFsdWU9IWUudG9nZ2xlLnZhbHVlLG8oZS50b2dnbGUudmFsdWUpfSl9fX0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuZmFjdG9yeShcIlRpY2tldEZhY3RvcnlcIixbXCIkaHR0cFwiLGZ1bmN0aW9uKHQpe3ZhciBlPXt9O3JldHVybiBlLmNyZWF0ZU5ld1RpY2tldD1mdW5jdGlvbihlKXtyZXR1cm4gdC5wb3N0KFwidGlja2V0cy9uZXdcIixlKX0sZS51cGRhdGVUaWNrZXQ9ZnVuY3Rpb24oZSxpKXtyZXR1cm4gdC5wdXQoXCJ0aWNrZXRzL1wiK2UsaSl9LGUuZ2V0VGlja2V0QnlJZD1mdW5jdGlvbihlKXtyZXR1cm4gdC5nZXQoXCJ0aWNrZXRzL1wiK2UpfSxlLmdldEluaXRpYWxUaWNrZXREYXRhPWZ1bmN0aW9uKGUpe3JldHVybiB0LmdldChcInRpY2tldHMvZWRpdC10aWNrZXQvaW5pdGlhbC1sb2FkL1wiK2UpfSxlfV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuZmFjdG9yeShcIkNvbW1vbkZhY3RvcnlcIixbXCIkaHR0cFwiLGZ1bmN0aW9uKHQpe3ZhciBlPXt9O3JldHVybiBlLmdldEluaXRpYWxTdGF0aWNEYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHQuZ2V0KFwidGlja2V0cy9zdGF0aWMtZGF0YVwiKX0sZX1dKS5maWx0ZXIoXCJyZXZlcnNlXCIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCl7aWYodClyZXR1cm4gdC5zbGljZSgpLnJldmVyc2UoKX19KTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmZhY3RvcnkoXCJVc2VyRmFjdG9yeVwiLFtcIiRodHRwXCIsZnVuY3Rpb24oZSl7dmFyIHQ9e307cmV0dXJuIHQubG9naW49ZnVuY3Rpb24odCxyLG4pe3JldHVybiBlLnBvc3QoXCJhY2NvdW50cy9sb2dpblwiLHt1c2VybmFtZTp0LHBhc3N3b3JkOnIscmVtZW1iZXI6bn0pfSx0LmxvZ291dD1mdW5jdGlvbigpe3JldHVybiBlLmdldChcImFjY291bnRzL2xvZ291dFwiKX0sdC5yZWdpc3RlclVzZXI9ZnVuY3Rpb24odCl7cmV0dXJuIGUucG9zdChcImFjY291bnRzL3JlZ2lzdGVyXCIsdCl9LHQuZ2V0VXNlckJ5VXNlcm5hbWU9ZnVuY3Rpb24odCl7cmV0dXJuIGUuZ2V0KFwidXNlcnMvcHJvZmlsZS9cIit0KX0sdC51cGRhdGVQcm9maWxlPWZ1bmN0aW9uKHQpe3JldHVybiBlLnBvc3QoXCJ1c2Vycy9wcm9maWxlL1wiK3QudXNlcm5hbWUsdCl9LHQuc2V0VXNlcm5hbWU9ZnVuY3Rpb24odCl7cmV0dXJuIGUucG9zdChcImFjY291bnRzL3NldC11c2VybmFtZVwiLHQpfSx0LmdldEFsbFVzZXJEZXRhaWxzPWZ1bmN0aW9uKCl7cmV0dXJuIGUuZ2V0KFwiYWRtaW4vdXNlcnMtZGV0YWlsc1wiKX0sdC5nZXRVc2VyRGV0YWlscz1mdW5jdGlvbih0KXtyZXR1cm4gZS5nZXQoXCJhZG1pbi91c2VyLWRldGFpbHMvXCIrdCl9LHQudXBkYXRlVXNlckRldGFpbHM9ZnVuY3Rpb24odCxyKXtyZXR1cm4gZS5wb3N0KFwiYWRtaW4vdXBkYXRlLXVzZXIvXCIrdCxyKX0sdC5yZXNldFBhc3N3b3JkPWZ1bmN0aW9uKHQscil7cmV0dXJuIGUucG9zdChcImFkbWluL3Jlc2V0LXBhc3N3b3JkL1wiK3Qscil9LHR9XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5mYWN0b3J5KFwiQXV0aGVudGljYXRpb25cIixmdW5jdGlvbigpe3ZhciB0PXt9O3JldHVybiB0LmdldElzQXV0aGVudGljYXRlZD1mdW5jdGlvbigpe2lmKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidGlja2V0U3lzdGVtVXNlclwiKSlyZXR1cm4hMH0sdC5zZXRVc2VyPWZ1bmN0aW9uKHQpe2xvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGlja2V0U3lzdGVtVXNlclwiLEpTT04uc3RyaW5naWZ5KHQpKX0sdC5jbGVhclVzZXI9ZnVuY3Rpb24oKXtsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcInRpY2tldFN5c3RlbVVzZXJcIil9LHQuZ2V0VXNlcj1mdW5jdGlvbigpe3JldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidGlja2V0U3lzdGVtVXNlclwiKSl9LHR9KTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmZhY3RvcnkoXCJIZWxwZXJGYWN0b3J5XCIsW1wiQXV0aGVudGljYXRpb25cIixmdW5jdGlvbihyKXt2YXIgZT17fTtyZXR1cm4gZS5jcmVhdGVFcnJvck1lc3NhZ2U9ZnVuY3Rpb24ocil7Zm9yKHZhciBlPVwiXCIsdD0wO3Q8ci5sZW5ndGg7dCsrKWUrPXJbdF0uZXJyb3IrXCI8YnIvPlwiO3JldHVybiBlfSxlLnNldEFsbFVzZXJzPWZ1bmN0aW9uKHIpe3RoaXMudXNlcnM9cn0sZS5nZXRBbGxVc2Vycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVzZXJzfSxlLmdldEFsbFVzZXJzQnV0U2VsZj1mdW5jdGlvbihlKXt2YXIgdD1yLmdldFVzZXIoKS51c2VybmFtZTtyZXR1cm4gZS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuIHIudXNlcm5hbWUhPT10fSl9LGUucmVtb3ZlVXNlckZyb21Vc2Vycz1mdW5jdGlvbihyLGUpe3JldHVybiByLmZpbHRlcihmdW5jdGlvbihyKXt2YXIgdD1lLmluZGV4T2Yoci51c2VybmFtZSk9PT0tMTtyZXR1cm4gdH0pfSxlLmlzQ3VycmVudFVzZXJBZG1pbj1mdW5jdGlvbigpe3ZhciBlPXIuZ2V0VXNlcigpO3JldHVybiBlLnJvbGUuaW5kZXhPZihcIkFkbWluXCIpPi0xfSxlLmlzQ3VycmVudFVzZXJTdXBwb3J0PWZ1bmN0aW9uKCl7dmFyIGU9ci5nZXRVc2VyKCk7cmV0dXJuIGUucm9sZS5pbmRleE9mKFwiU3VwcG9ydFwiKT4tMX0sZX1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmZhY3RvcnkoXCJBY3Rpb25GYWN0b3J5XCIsW1wiJGh0dHBcIixcIiRxXCIsZnVuY3Rpb24odCxlKXt2YXIgbixvPXt9O3JldHVybiBvLnNldFRhc2s9ZnVuY3Rpb24odCl7bj10fSxvLmdldFRhc2s9ZnVuY3Rpb24oKXtyZXR1cm4gbn0sby5nZXRBc3NpZ25lZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdC5nZXQoXCJzdGF0aWMvYWxsLXVzZXJzXCIpfSxvLmdldEFsbG93ZWRTdGF0dXM9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuZ2V0KFwic3RhdGljL2FsbG93ZWQtc3RhdHVzL1wiK2UpfSxvLmdldEFsbG93ZWRCdXR0b25zPWZ1bmN0aW9uKG4pe3ZhciBvPWUuZGVmZXIoKTtyZXR1cm4gdC5nZXQoXCJzdGF0aWMvYWN0aW9uLWJ1dHRvbnMvXCIrbikudGhlbihmdW5jdGlvbih0KXt2YXIgZT17fTtlLmFzc2lnbj10LmRhdGEuYWN0aW9uQnV0dG9ucy5hc3NpZ24sZS5jb21tZW50PXQuZGF0YS5hY3Rpb25CdXR0b25zLmNvbW1lbnQsZS5jaGFuZ2VTdGF0dXM9dC5kYXRhLmFjdGlvbkJ1dHRvbnMuY2hhbmdlU3RhdHVzLGUucmVvcGVuPXQuZGF0YS5hY3Rpb25CdXR0b25zLnJlb3BlbixlLmNsb3NlPXQuZGF0YS5hY3Rpb25CdXR0b25zLmNsb3NlLGUuYWNrbm93bGVkZ2U9dC5kYXRhLmFjdGlvbkJ1dHRvbnMuYWNrbm93bGVkZ2UsZS5hd2FpdGluZ1VzZXJSZXNwb25zZT10LmRhdGEuYWN0aW9uQnV0dG9ucy5hd2FpdGluZ1VzZXJSZXNwb25zZSxvLnJlc29sdmUoZSl9KS5jYXRjaChmdW5jdGlvbih0KXtvLnJlamVjdCh0KX0pLG8ucHJvbWlzZX0sby5hc3NpZ249ZnVuY3Rpb24oZSxuLG8pe3JldHVybiB0LnBvc3QoXCJ0aWNrZXRzL2Fzc2lnbi9cIitlLHthc3NpZ25lZTpuLGNvbW1lbnQ6b30pfSxvLmNoYW5nZVN0YXR1cz1mdW5jdGlvbihlLG4sbyl7cmV0dXJuIHQucG9zdChcInRpY2tldHMvY2hhbmdlLXN0YXR1cy9cIitlLHtzdGF0dXM6bixjb21tZW50Om99KX0sby5hd2FpdGluZ1VzZXJSZXNwb25zZT1mdW5jdGlvbihlLG4pe3JldHVybiB0LnBvc3QoXCJ0aWNrZXRzL2F3YWl0aW5nLXVzZXItcmVzcG9uc2UvXCIrZSx7Y29tbWVudDpufSl9LG8ucmVvcGVuPWZ1bmN0aW9uKGUsbil7cmV0dXJuIHQucG9zdChcInRpY2tldHMvcmUtb3Blbi9cIitlLHtjb21tZW50Om59KX0sby5jbG9zZT1mdW5jdGlvbihlLG4pe3JldHVybiB0LnBvc3QoXCJ0aWNrZXRzL2Nsb3NlL1wiK2Use2NvbW1lbnQ6bn0pfSxvLmFkZENvbW1lbnQ9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5wb3N0KFwidGlja2V0cy9hZGRDb21tZW50L1wiK2Use2NvbW1lbnQ6bn0pfSxvLmRlbGV0ZUNvbW1lbnQ9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5kZWxldGUoXCJ0aWNrZXRzL2RlbGV0ZUNvbW1lbnQvXCIrZS5faWQrXCI/Y29tbWVudElkPVwiK24uX2lkKX0sb31dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmNvbnRyb2xsZXIoXCJNYWluQ3RybFwiLFtcIiRzY29wZVwiLFwiJHN0YXRlXCIsXCJBdXRoZW50aWNhdGlvblwiLFwiVXNlckZhY3RvcnlcIixcIiR3aW5kb3dcIixcIkZsYXNoXCIsZnVuY3Rpb24oZSx0LGksbixvLHIpe3ZhciBzPWZ1bmN0aW9uKCl7dmFyIHQ9aS5nZXRVc2VyKCk7dC5yb2xlLmluZGV4T2YoXCJBZG1pblwiKT4tMT9lLmlzQWRtaW49ITA6ZS5pc0FkbWluPSExLGUuaXNSZWd1bGFyVXNlcj0hMCwoaS5nZXRVc2VyKCkucm9sZS5pbmRleE9mKFwiU3VwcG9ydFwiKT4tMXx8aS5nZXRVc2VyKCkucm9sZS5pbmRleE9mKFwiQWRtaW5cIik+LTEpJiYoZS5pc1JlZ3VsYXJVc2VyPSExKX07ZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9aS5nZXRVc2VyKCk7dCYmKHQucm9sZS5pbmRleE9mKFwiQWRtaW5cIik+LTE/ZS5pc0FkbWluPSEwOmUuaXNBZG1pbj0hMSl9LGUuZ2V0VXNlcj1pLmdldFVzZXIsZS5pc0F1dGhlbnRpY2F0ZWQ9aS5nZXRJc0F1dGhlbnRpY2F0ZWQsZS5sb2dvdXQ9ZnVuY3Rpb24oKXtuLmxvZ291dCgpLnRoZW4oZnVuY3Rpb24oKXtpLmNsZWFyVXNlcigpLHQuZ28oXCJ1c2Vycy1sb2dpbi5sb2dpblwiKX0pfSxlLiRvbihcInN1Y2Nlc3NmdWwtbG9naW5cIixzKSxlLmdldFByb2ZpbGU9ZnVuY3Rpb24oKXt0LmdvKFwidXNlcnMtcHJvZmlsZVwiKX0sby5hcHA9e30sby5hcHAuYXV0aD1mdW5jdGlvbihlLG4pe1wiXCIhPT1lP3IuY3JlYXRlKFwiZGFuZ2VyXCIsZS50b1N0cmluZygpLDVlMyx7fSwhMSk6bi51c2VybmFtZSYmXCJcIiE9PW4udXNlcm5hbWU/biYmKGkuc2V0VXNlcihuKSxzKCksdC5nbyhcInRpY2tldC5teS10aWNrZXRzXCIpKTp0LmdvKFwiYXV0aC1nb29nbGVcIix7aWQ6bi5faWQudG9TdHJpbmcoKSxlbWFpbDpuLmVtYWlsfSl9fV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIk1hbmFnZVVzZXJzQ3RybFwiLFtcIiRzY29wZVwiLFwiJHN0YXRlXCIsXCIkc3RhdGVQYXJhbXNcIixcIkF1dGhlbnRpY2F0aW9uXCIsXCJIZWxwZXJGYWN0b3J5XCIsXCJVc2VyRmFjdG9yeVwiLFwiRmxhc2hcIixmdW5jdGlvbihlLHMsYSxyLHQsaSxuKXt2YXIgdT1mdW5jdGlvbigpe3JldHVyblwiXCJ9LGM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT0hMD9cImZhIGZhLWNoZWNrXCI6XCJmYSBmYS1yZW1vdmVcIn0sbz1mdW5jdGlvbigpe3JldHVyblwiXCJ9LGw9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5kZXhPZihcIkFkbWluXCIpPi0xP1wiZmEgZmEtY2hlY2tcIjpcImZhIGZhLXJlbW92ZVwifTtlLmNvbmZpZz17fSxlLmNvbmZpZy51cmw9XCIvYWRtaW4vdXNlcnMtZGV0YWlsc1wiLGUuY29uZmlnLmNvbHVtbnM9W10sZS5jb25maWcuY29sdW1ucy5wdXNoKHtrZXk6XCJ1c2VybmFtZVwiLG5hbWU6XCJVc2VybmFtZVwiLGNzc0NsYXNzOlwiY29sLW1kLTZcIn0pLGUuY29uZmlnLmNvbHVtbnMucHVzaCh7a2V5OlwiaXNBY3RpdmVcIixuYW1lOlwiSXMgQWN0aXZlXCIsY3NzQ2xhc3M6XCJjb2wtbWQtM1wiLHJlbmRlcjp1LHJlbmRlckNsYXNzOmN9KSxlLmNvbmZpZy5jb2x1bW5zLnB1c2goe2tleTpcInJvbGVcIixuYW1lOlwiSXMgQWRtaW5cIixjc3NDbGFzczpcImNvbC1tZC0zXCIscmVuZGVyOm8scmVuZGVyQ2xhc3M6bH0pLGUuY29uZmlnLnNvcnRRdWVyeXN0cmluZ1BhcmFtPVwic29ydFwiLGUuY29uZmlnLm9yZGVyUXVlcnlzdHJpbmdQYXJhbT1cIm9yZGVyXCIsZS5jb25maWcucGFnZVF1ZXJ5c3RyaW5nUGFyYW09XCJwYWdlXCIsZS5jb25maWcuc2l6ZVF1ZXJ5c3RyaW5nUGFyYW09XCJzaXplXCIsZS5jb25maWcub2JqZWN0TmFtZT1cInVzZXJzXCIsZS5jb25maWcub25Sb3dDbGljaz1mdW5jdGlvbihlKXtzLmdvKFwiYWRtaW4tZWRpdFwiLHt1c2VybmFtZTplLnVzZXJuYW1lfSl9LGUuaXNBY3RpdmU9e30sZS5pc0FkbWluPXt9LGUudXNlckRldGFpbHM9e30sZS51c2VyRGV0YWlscy5nZXRVc2VyRGV0YWlscz1mdW5jdGlvbigpe3ZhciBzPWEudXNlcm5hbWU7aS5nZXRVc2VyRGV0YWlscyhzKS50aGVuKGZ1bmN0aW9uKHMpe2UudXNlckRldGFpbHMudXNlcm5hbWU9cy5kYXRhLnVzZXIudXNlcm5hbWUsZS51c2VyRGV0YWlscy5maXJzdG5hbWU9cy5kYXRhLnVzZXIuZmlyc3RuYW1lLGUudXNlckRldGFpbHMubGFzdG5hbWU9cy5kYXRhLnVzZXIubGFzdG5hbWUsZS51c2VyRGV0YWlscy5pZD1zLmRhdGEudXNlci5faWQ7dmFyIGE9cy5kYXRhLnVzZXIucm9sZTthLmluZGV4T2YoXCJBZG1pblwiKT4tMT9lLnVzZXJEZXRhaWxzLmlzQWRtaW49ITA6ZS51c2VyRGV0YWlscy5pc0FkbWluPSExLGUudXNlckRldGFpbHMuaXNBY3RpdmU9cy5kYXRhLnVzZXIuaXNBY3RpdmUsZS51c2VyRGV0YWlscy5lbWFpbD1zLmRhdGEudXNlci5lbWFpbCxlLmlzQWN0aXZlLmtleT1cImlzQWN0aXZlXCIsZS5pc0FjdGl2ZS52YWx1ZT1lLnVzZXJEZXRhaWxzLmlzQWN0aXZlLGUuaXNBZG1pbi5rZXk9XCJpc0FkbWluXCIsZS5pc0FkbWluLnZhbHVlPWUudXNlckRldGFpbHMuaXNBZG1pbn0pLmNhdGNoKGZ1bmN0aW9uKGUpe24uY3JlYXRlKFwiZGFuZ2VyXCIsXCJUaGVyZSB3YXMgc29tZSBlcnJvciB0cnlpbmcgdG8gZmV0Y2ggdXNlciBkZXRhaWxzLiBQbGVhc2UgdHJ5IGFnYWluIGFmdGVyIHNvbWUgdGltZS5cIiw1ZTMse30sITEpfSl9LGUudXNlckRldGFpbHMudXBkYXRlPWZ1bmN0aW9uKCl7ZS51c2VyRGV0YWlscy5pc0FkbWluPWUuaXNBZG1pbi52YWx1ZSxlLnVzZXJEZXRhaWxzLmlzQWN0aXZlPWUuaXNBY3RpdmUudmFsdWUsaS51cGRhdGVVc2VyRGV0YWlscyhlLnVzZXJEZXRhaWxzLnVzZXJuYW1lLGUudXNlckRldGFpbHMpLnRoZW4oZnVuY3Rpb24oZSl7bi5jcmVhdGUoXCJzdWNjZXNzXCIsXCJVc2VyIGRldGFpbHMgdXBkYXRlZCBzdWNjZXNzZnVsbHlcIiw1ZTMse30sITEpfSkuY2F0Y2goZnVuY3Rpb24oZSl7bi5jcmVhdGUoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byB1cGRhdGUgdXNlciBkZXRhaWxzLiBQbGVhc2UgdHJ5IGFnYWluIGFmdGVyIHNvbWUgdGltZS5cIiw1ZTMse30sITEpfSl9LGUucmVzZXRQYXNzd29yZD17fSxlLnJlc2V0UGFzc3dvcmQucmVzZXQ9ZnVuY3Rpb24oKXt2YXIgcj1hLmlkO2kucmVzZXRQYXNzd29yZChyLGUucmVzZXRQYXNzd29yZCkudGhlbihmdW5jdGlvbihlKXtpZihlLmRhdGEuZXJyb3JzKXt2YXIgYT10LmNyZWF0ZUVycm9yTWVzc2FnZShlLmRhdGEuZXJyb3JzKTtuLmNyZWF0ZShcImRhbmdlclwiLGEsNWUzLHt9LCExKX1lbHNlIG4uY3JlYXRlKFwic3VjY2Vzc1wiLFwiUGFzc3dvcmQgaGFzIGJlZW4gcmVzZXQgc3VjY2Vzc2Z1bGx5XCIsNWUzLHt9LCExKSxzLmdvKFwiYWRtaW4tdXNlci1tYW5hZ2VtZW50XCIpfSkuY2F0Y2goZnVuY3Rpb24oZSl7bi5jcmVhdGUoXCJkYW5nZXJcIixcIlRoZSByZXF1ZXN0IGNvdWxkIG5vdCBiZW4gbWFkZSBzdWNjZXNzZnVsbHkuIFBsZWFzZSB0cnkgbGF0ZXJcIiw1ZTMse30sITEpfSl9fV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIkVkaXRUaWNrZXRDdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVQYXJhbXNcIixcIiRzdGF0ZVwiLFwiVGlja2V0RmFjdG9yeVwiLFwiRmxhc2hcIixcIkhlbHBlckZhY3RvcnlcIixcIkF1dGhlbnRpY2F0aW9uXCIsZnVuY3Rpb24oZSx0LGEscixpLGMsbil7ZS50b29sYmFyQ29uZmlnPVtbXCJoMVwiLFwicFwiLFwicHJlXCIsXCJxdW90ZVwiXSxbXCJib2xkXCIsXCJpdGFsaWNzXCIsXCJ1bmRlcmxpbmVcIixcInN0cmlrZVRocm91Z2hcIixcInVsXCIsXCJvbFwiLFwicmVkb1wiLFwidW5kb1wiLFwiY2xlYXJcIl0sW10sW1wiaW5zZXJ0TGlua1wiXV0sZS5jYW5jZWw9ZnVuY3Rpb24oKXthLmdvKFwidGlja2V0LXZpZXdcIix7aWQ6ZS50aWNrZXQuaWR9KX0sZS5yZW5kZXJEYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgRGF0ZShEYXRlLnBhcnNlKGUpKS50b0xvY2FsZURhdGVTdHJpbmcoKX0sci5nZXRUaWNrZXRCeUlkKHQuaWQpLnRoZW4oZnVuY3Rpb24odCl7aWYodC5kYXRhLmVycm9ycyl7YS5nbyhcInRpY2tldC5teS10aWNrZXRzXCIpO3ZhciBzPWMuY3JlYXRlRXJyb3JNZXNzYWdlKHQuZGF0YS5lcnJvcnMpO2kuY3JlYXRlKFwiZGFuZ2VyXCIscyw0ZTMse30sITEpfWVsc2UgZS50aWNrZXQ9dC5kYXRhLGUudGlja2V0LmN1cnJlbnRVc2VyPW4uZ2V0VXNlcigpLnVzZXJuYW1lLHIuZ2V0SW5pdGlhbFRpY2tldERhdGEoZS50aWNrZXQuc3RhdHVzKS50aGVuKGZ1bmN0aW9uKHQpe2UucHJpb3JpdGllcz10LmRhdGEucHJpb3JpdGllcy52YWx1ZXMsZS50eXBlcz10LmRhdGEudHlwZXMudmFsdWVzLGUudXNlcnM9dC5kYXRhLnVzZXJzLGMuc2V0QWxsVXNlcnMoZS51c2VycyksZS5zdGF0dXNlcz10LmRhdGEuc3RhdHVzZXN9KS5jYXRjaChmdW5jdGlvbihlKXtjb25zb2xlLmxvZyhlKSxpLmNyZWF0ZShcImRhbmdlclwiLFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIGRldGNoIHRoZSBzdGF0aWMgZGF0YS5cIiw1ZTMse30sITEpfSl9KS5jYXRjaChmdW5jdGlvbihlKXtjb25zb2xlLmxvZyhlKSxpLmNyZWF0ZShcImRhbmdlclwiLFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIGdldCB0aWNrZXQgZGV0YWlscy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIiw1ZTMse30sITEpfSksZS51cGRhdGU9ZnVuY3Rpb24oKXtyLnVwZGF0ZVRpY2tldChlLnRpY2tldC5faWQsZS50aWNrZXQpLnRoZW4oZnVuY3Rpb24odCl7ZS50aWNrZXQ9dC5kYXRhLGkuY3JlYXRlKFwic3VjY2Vzc1wiLFwiVGlja2V0IHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5LlwiLDVlMyx7fSwhMSksYS5nbyhcInRpY2tldC12aWV3XCIse2lkOnQuZGF0YS5pZH0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7Y29uc29sZS5sb2coZSksaS5jcmVhdGUoXCJkYW5nZXJcIixcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byB1cGRhdGUgdGlja2V0IGRldGFpbHMuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCIsNWUzLHt9LCExKX0pfX1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmNvbnRyb2xsZXIoXCJOZXdUaWNrZXRDdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVcIixcIlRpY2tldEZhY3RvcnlcIixcIkZsYXNoXCIsXCJDb21tb25GYWN0b3J5XCIsXCJIZWxwZXJGYWN0b3J5XCIsZnVuY3Rpb24oZSx0LHIsaSxhLG4pe2EuZ2V0SW5pdGlhbFN0YXRpY0RhdGEoKS50aGVuKGZ1bmN0aW9uKHQpe2UucHJpb3JpdGllcz10LmRhdGEucHJpb3JpdGllcy52YWx1ZXMsZS50eXBlcz10LmRhdGEudHlwZXMudmFsdWVzLGUudXNlcnM9dC5kYXRhLnVzZXJzLGUubmV3VGlja2V0LnByaW9yaXR5PWUucHJpb3JpdGllc1swXS52YWx1ZSxlLm5ld1RpY2tldC50eXBlPWUudHlwZXNbMF0udmFsdWUsZS5uZXdUaWNrZXQuYXNzaWduZWU9ZS51c2Vyc1swXS51c2VybmFtZX0pLGUubmV3VGlja2V0PXt9LGUudG9vbGJhckNvbmZpZz1bW1wiaDFcIixcInBcIixcInByZVwiLFwicXVvdGVcIl0sW1wiYm9sZFwiLFwiaXRhbGljc1wiLFwidW5kZXJsaW5lXCIsXCJzdHJpa2VUaHJvdWdoXCIsXCJ1bFwiLFwib2xcIixcInJlZG9cIixcInVuZG9cIixcImNsZWFyXCJdLFtdLFtcImluc2VydExpbmtcIl1dLGUuc2F2ZT1mdW5jdGlvbigpe3IuY3JlYXRlTmV3VGlja2V0KHt0aXRsZTplLm5ld1RpY2tldC50aXRsZSxkZXNjcmlwdGlvbjplLm5ld1RpY2tldC5kZXNjcmlwdGlvbix0eXBlOmUubmV3VGlja2V0LnR5cGV9KS50aGVuKGZ1bmN0aW9uKGUpe2lmKGUuZGF0YS5lcnJvcnMpe3ZhciByPW4uY3JlYXRlRXJyb3JNZXNzYWdlKGUuZGF0YS5lcnJvcnMpO2kuY3JlYXRlKFwiZGFuZ2VyXCIsciw1ZTMse30sITEpfWVsc2UgdC5nbyhcInRpY2tldC12aWV3XCIse2lkOmUuZGF0YS5pZH0pfSxmdW5jdGlvbihlKXtpLmNyZWF0ZShcImRhbmdlclwiLFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIGNyZWF0ZSBuZXcgdGlja2V0LiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiLDVlMyx7fSwhMSksY29uc29sZS5sb2coZSl9KX19XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiVGFza0N0cmxcIixbXCIkc2NvcGVcIixcIlRhc2tGYWN0b3J5XCIsZnVuY3Rpb24oYSx0KXtjb25zb2xlLmxvZyh0KSxhLmdldFRhc2s9dC5nZXRUYXNrLGEudGFzaz17fSxhLmNvbW1lbnRQYXJ0aWFsPVwidGVtcGxhdGVzL3BhcnRpYWxzL2NvbW1lbnRzLXBhcnRpYWwuaHRtbFwiLGEuJHdhdGNoKFwiZ2V0VGFzaygpXCIsZnVuY3Rpb24odCxzKXtzd2l0Y2goY29uc29sZS5sb2codCksYS50YXNrLm5hbWU9XCJ0ZW1wbGF0ZXMvcGFydGlhbHMvXCIrdCtcIi1wYXJ0aWFsLmh0bWxcIix0KXtjYXNlXCJjb21tZW50XCI6YS50YXNrLnNob3dUYXNrUGFuZWw9ITAsYS50YXNrLnRpdGxlPVwiQWRkIG5ldyBjb21tZW50XCIsYS50YXNrLnNob3dNYWluUGFuZWw9ITEsYS50YXNrLnNob3dDb21tZW50c1BhbmVsPSEwO2JyZWFrO2Nhc2VcImFzc2lnblwiOmEudGFzay5zaG93VGFza1BhbmVsPSEwLGEudGFzay50aXRsZT1cIkFzc2lnbiB0aWNrZXRcIixhLnRhc2suc2hvd01haW5QYW5lbD0hMCxhLnRhc2suc2hvd0NvbW1lbnRzUGFuZWw9ITB9fSl9XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiVGlja2V0c0N0cmxcIixbXCIkc2NvcGVcIixcIiRzdGF0ZVwiLGZ1bmN0aW9uKGUsdCl7ZS5pc1N1cHBvcnQ9ITE7dmFyIG49SlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRpY2tldFN5c3RlbVVzZXJcIikpO24mJihuLnJvbGUuaW5kZXhPZihcIkFkbWluXCIpPi0xfHxuLnJvbGUuaW5kZXhPZihcIlN1cHBvcnRcIik+LTEpJiYoZS5pc1N1cHBvcnQ9ITApO3ZhciBpPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgRGF0ZShEYXRlLnBhcnNlKGUpKS50b0xvY2FsZURhdGVTdHJpbmcoKX0sYz1mdW5jdGlvbihlKXtyZXR1cm4gZT9TdHJpbmcoZSkucmVwbGFjZSgvPFtePl0rPi9nbSxcIlwiKTpcIlwifSxzPWZ1bmN0aW9uKGUpe3JldHVybiBlP2U6XCJVbmFzc2lnbmVkXCJ9O2UuY29uZmlnPXt9LGUuY29uZmlnLmNvbHVtbnM9W10sZS5jb25maWcuY29sdW1ucy5wdXNoKHtrZXk6XCJpZFwiLG5hbWU6XCJJRFwiLGNzc0NsYXNzOlwiY29sLW1kLTFcIn0pLGUuY29uZmlnLmNvbHVtbnMucHVzaCh7a2V5OlwidGl0bGVcIixuYW1lOlwiVGl0bGVcIixjc3NDbGFzczpcImNvbC1tZC0yXCJ9KSxlLmNvbmZpZy5jb2x1bW5zLnB1c2goe2tleTpcImRlc2NyaXB0aW9uXCIsbmFtZTpcIkRlc2NyaXB0aW9uXCIsY3NzQ2xhc3M6XCJjb2wtbWQtMlwiLHJlbmRlcjpjfSksZS5jb25maWcuY29sdW1ucy5wdXNoKHtrZXk6XCJ0eXBlXCIsbmFtZTpcIlR5cGVcIixjc3NDbGFzczpcImNvbC1tZC0xXCJ9KSxlLmNvbmZpZy5jb2x1bW5zLnB1c2goe2tleTpcImFzc2lnbmVlXCIsbmFtZTpcIkFzc2lnbmVlXCIsY3NzQ2xhc3M6XCJjb2wtbWQtMlwiLHJlbmRlcjpzfSksZS5jb25maWcuY29sdW1ucy5wdXNoKHtrZXk6XCJjcmVhdGVkRGF0ZVwiLG5hbWU6XCJDcmVhdGVkIERhdGVcIixjc3NDbGFzczpcImNvbC1tZC0yXCIscmVuZGVyOml9KSxlLmNvbmZpZy5jb2x1bW5zLnB1c2goe2tleTpcImNyZWF0ZWRCeVwiLG5hbWU6XCJDcmVhdGVkIEJ5XCIsY3NzQ2xhc3M6XCJjb2wtbWQtMlwifSksZS5jb25maWcuc29ydFF1ZXJ5c3RyaW5nUGFyYW09XCJzb3J0XCIsZS5jb25maWcub3JkZXJRdWVyeXN0cmluZ1BhcmFtPVwib3JkZXJcIixlLmNvbmZpZy5wYWdlUXVlcnlzdHJpbmdQYXJhbT1cInBhZ2VcIixlLmNvbmZpZy5zaXplUXVlcnlzdHJpbmdQYXJhbT1cInNpemVcIixlLmFjdGl2ZT1cIlwiLGUuY29uZmlnLm9uUm93Q2xpY2s9ZnVuY3Rpb24oZSl7dC5nbyhcInRpY2tldC12aWV3XCIse2lkOmUuaWR9KX0sZS5jb25maWcub2JqZWN0TmFtZT1cInRpY2tldHNcIixlLmluaXRpYXRlQWxsVGlja2V0PWZ1bmN0aW9uKCl7ZS5jb25maWcudXJsPVwiL3RpY2tldHMvYWxsXCIsZS4kcGFyZW50LmFjdGl2ZT1cImFsbFwifSxlLmluaXRpYXRlTXlUaWNrZXQ9ZnVuY3Rpb24oKXtlLmNvbmZpZy51cmw9XCIvdGlja2V0cy9teVwiLGUuJHBhcmVudC5hY3RpdmU9XCJteVwifSxlLmluaXRpYXRlVG9NZVRpY2tldD1mdW5jdGlvbigpe2UuY29uZmlnLnVybD1cIi90aWNrZXRzL3RvLW1lXCIsZS4kcGFyZW50LmFjdGl2ZT1cInRvbWVcIn19XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiVmlld1RpY2tldEN0cmxcIixbXCIkc2NvcGVcIixcIiRzdGF0ZVBhcmFtc1wiLFwiJHN0YXRlXCIsXCJUaWNrZXRGYWN0b3J5XCIsXCJGbGFzaFwiLFwiQXV0aGVudGljYXRpb25cIixcIkhlbHBlckZhY3RvcnlcIixcIllnTW9kYWxcIixcIkFjdGlvbkZhY3RvcnlcIixmdW5jdGlvbihlLHQscixjLG4saSxhLG8scyl7ZS50aWNrZXQ9e30sZS5yZW5kZXJEYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgRGF0ZShEYXRlLnBhcnNlKGUpKS50b0xvY2FsZURhdGVTdHJpbmcoKX0sZS5lZGl0PWZ1bmN0aW9uKCl7ci5nbyhcInRpY2tldC1lZGl0XCIse2lkOmUudGlja2V0LmlkfSl9O3ZhciBkPWZ1bmN0aW9uKHQscil7cmV0dXJuIGZ1bmN0aW9uKCl7cy5kZWxldGVDb21tZW50KHQscikudGhlbihmdW5jdGlvbih0KXtjb25zb2xlLmxvZyh0KSxlLnRpY2tldC5jb21tZW50cz10LmRhdGEuY29tbWVudHMsbi5jcmVhdGUoXCJzdWNjZXNzXCIsXCJUaGUgY29tbWVudCB3YXMgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIiw1ZTMse30sITEpfSkuY2F0Y2goZnVuY3Rpb24oZSl7bi5jcmVhdGUoXCJkYW5nZXJcIixcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byBkZWxldGUgY29tbWVudC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIiw1ZTMse30sITEpfSl9fTtlLmRlbGV0ZUNvbW1lbnQ9ZnVuY3Rpb24oZSx0KXtvLmNvbmZpcm0oZChlLHQpKSxvLm9wZW4oXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZG8gdGhpcz9cIixcIlRoaXMgd2lsbCBkZWxldGUgdGhlIGNvbW1lbnQgcGVybWFuZW50bHlcIil9LGMuZ2V0VGlja2V0QnlJZCh0LmlkKS50aGVuKGZ1bmN0aW9uKHQpe3QuZGF0YS5lcnJvcnM/KHIuZ28oXCJ0aWNrZXQubXktdGlja2V0c1wiKSxuLmNyZWF0ZShcImRhbmdlclwiLHQuZGF0YS5lcnJvcnNbMF0ubXNnLDRlMyx7fSwhMSkpOihlLnRpY2tldD10LmRhdGEsZS50aWNrZXQuYXNzaWduZWU9ZS50aWNrZXQuYXNzaWduZWU/ZS50aWNrZXQuYXNzaWduZWU6XCJVbmFzc2lnbmVkXCIsZS50aWNrZXQuY3JlYXRlZERhdGU9ZS5yZW5kZXJEYXRlKGUudGlja2V0LmNyZWF0ZWREYXRlKSxlLnRpY2tldC5jdXJyZW50VXNlcj1pLmdldFVzZXIoKS51c2VybmFtZSwoZS50aWNrZXQuYXNzaWduZWU9PT1lLnRpY2tldC5jdXJyZW50VXNlcnx8ZS50aWNrZXQuY3JlYXRlZEJ5PT09ZS50aWNrZXQuY3VycmVudFVzZXJ8fGEuaXNDdXJyZW50VXNlckFkbWluKCl8fGEuaXNDdXJyZW50VXNlclN1cHBvcnQoKSkmJihlLnNob3dFZGl0PSEwKSl9KS5jYXRjaChmdW5jdGlvbihlKXtjb25zb2xlLmxvZyhlKSxuLmNyZWF0ZShcImRhbmdlclwiLFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIGdldCB0aWNrZXQgZGV0YWlscy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIiw1ZTMse30sITEpfSl9XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiTG9naW5DdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVcIixcIiR3aW5kb3dcIixcIlVzZXJGYWN0b3J5XCIsXCJBdXRoZW50aWNhdGlvblwiLGZ1bmN0aW9uKGUsdCxvLHIsbil7ZS5lcnJvcj0hMSxlLm1lc3NhZ2U9XCJcIixlLmxvZ2luPWZ1bmN0aW9uKCl7ci5sb2dpbihlLnVzZXJuYW1lLGUucGFzc3dvcmQsZS5yZW1lbWJlcikudGhlbihmdW5jdGlvbihvKXtvLmRhdGEuaXNBdXRoZW50aWNhdGVkPyhuLnNldFVzZXIoby5kYXRhLnVzZXIpLGUuJGVtaXQoXCJzdWNjZXNzZnVsLWxvZ2luXCIpLHQuZ28oXCJ0aWNrZXQubXktdGlja2V0c1wiKSk6KGUuZXJyb3I9ITAsZS5tZXNzYWdlPW8uZGF0YS5tc2cpfSkuY2F0Y2goZnVuY3Rpb24odCl7ZS5lcnJvcj0hMCxlLm1lc3NhZ2U9XCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB0cnlpbmcgdG8gbG9nIHlvdSBpbi4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlclwifSl9LGUuZ29vZ2xlTG9naW49ZnVuY3Rpb24oKXt2YXIgZT1cImFjY291bnRzL2F1dGgvZ29vZ2xlXCIsdD02MDAscj00NTAsbj0od2luZG93Lm91dGVySGVpZ2h0LXIpLzIsaT0od2luZG93Lm91dGVyV2lkdGgtdCkvMjtvLm9wZW4oZSxcImZhY2Vib29rX2xvZ2luXCIsXCJ3aWR0aD1cIit0K1wiLGhlaWdodD1cIityK1wiLHNjcm9sbGJhcnM9MCx0b3A9XCIrbitcIixsZWZ0PVwiK2kpfX1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmNvbnRyb2xsZXIoXCJNYWluTG9naW5DdHJsXCIsW1wiJHJvb3RTY29wZVwiLFwiJHNjb3BlXCIsXCIkc3RhdGVcIixmdW5jdGlvbih0LGUsbil7ZS5zdGF0ZW5hbWU9bi5jdXJyZW50Lm5hbWUsdC4kb24oXCIkc3RhdGVDaGFuZ2VTdGFydFwiLGZ1bmN0aW9uKHQsbixhLG8scil7ZS5zdGF0ZW5hbWU9bi5uYW1lfSl9XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiUHJvZmlsZUN0cmxcIixbXCIkc2NvcGVcIixcIiRzdGF0ZVwiLFwiQXV0aGVudGljYXRpb25cIixcIlVzZXJGYWN0b3J5XCIsXCJIZWxwZXJGYWN0b3J5XCIsXCJGbGFzaFwiLGZ1bmN0aW9uKGUsYSxyLHMsdCx1KXtlLnVzZXI9e30sZS5pbml0PWZ1bmN0aW9uKCl7cy5nZXRVc2VyQnlVc2VybmFtZShyLmdldFVzZXIoKS51c2VybmFtZSkudGhlbihmdW5jdGlvbihyKXtpZihyLmRhdGEuZXJyb3JzKXt2YXIgcz10LmNyZWF0ZUVycm9yTWVzc2FnZShyLmRhdGEuZXJyb3JzKTt1LmNyZWF0ZShcImRhbmdlclwiLHMsNWUzLHt9LCExKSxhLmdvKFwidGlja2V0Lm15LXRpY2tldHNcIil9ZWxzZSBlLnVzZXIuZmlyc3RuYW1lPXIuZGF0YS51c2VyLmZpcnN0bmFtZTtlLnVzZXIubGFzdG5hbWU9ci5kYXRhLnVzZXIubGFzdG5hbWUsZS51c2VyLnVzZXJuYW1lPXIuZGF0YS51c2VyLnVzZXJuYW1lLGUudXNlci5lbWFpbD1yLmRhdGEudXNlci5lbWFpbH0pfSxlLnVwZGF0ZT1mdW5jdGlvbigpe3MudXBkYXRlUHJvZmlsZShlLnVzZXIpLnRoZW4oZnVuY3Rpb24ocyl7ZS51c2VyLmZpcnN0bmFtZT1zLmRhdGEudXNlci5maXJzdG5hbWUsZS51c2VyLmxhc3RuYW1lPXMuZGF0YS51c2VyLmxhc3RuYW1lLGUudXNlci51c2VybmFtZT1zLmRhdGEudXNlci51c2VybmFtZSxlLnVzZXIuZW1haWw9cy5kYXRhLnVzZXIuZW1haWwsci5zZXRVc2VyKGUudXNlciksdS5jcmVhdGUoXCJzdWNjZXNzXCIsXCJVc2VyIGRldGFpbHMgaGF2ZSBiZWVuIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5XCIsNWUzLHt9LCExKSxhLmdvKFwiL1wiKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3UuY3JlYXRlKFwiZGFuZ2VyXCIsXCJUaGVyZSB3YXMgc29tZSBlcnJvciB0cnlpbmcgdG8gdXBkYXRlIHVzZXIgZGV0YWlscy4gUGxlYXNlIHRyeSBhZ2FpbiBhZnRlciBzb21lIHRpbWUuXCIsNWUzLHt9LCExKX0pfX1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmNvbnRyb2xsZXIoXCJSZWdpc3RlckN0cmxcIixbXCIkc2NvcGVcIixcIiRzdGF0ZVwiLFwiVXNlckZhY3RvcnlcIixcIkhlbHBlckZhY3RvcnlcIixcIkZsYXNoXCIsZnVuY3Rpb24oZSxyLHQscyxhKXtlLm5ld1VzZXI9e30sZS5yZWdpc3Rlcj1mdW5jdGlvbigpe3QucmVnaXN0ZXJVc2VyKGUubmV3VXNlcikudGhlbihmdW5jdGlvbihlKXtpZihlLmRhdGEuZXJyb3JzKXt2YXIgdD1zLmNyZWF0ZUVycm9yTWVzc2FnZShlLmRhdGEuZXJyb3JzKTthLmNyZWF0ZShcImRhbmdlclwiLHQsNWUzLHt9LCExKX1lbHNlIGEuY3JlYXRlKFwic3VjY2Vzc1wiLFwiVXNlciBoYXMgYmVlbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseS4gWW91IGNhbiBub3cgbG9naW4uXCIsNWUzLHt9LCExKSxyLmdvKFwidXNlcnMtbG9naW4ubG9naW5cIil9KS5jYXRjaChmdW5jdGlvbihlKXthLmNyZWF0ZShcImRhbmdlclwiLFwiVGhlcmUgd2FzIHNvbWUgZXJyb3IgdHJ5aW5nIHRvIGNyZWF0ZSB0aGUgdXNlci4gUGxlYXNlIHRyeSBhZ2FpbiBhZnRlciBzb21lIHRpbWUuXCIsNWUzLHt9LCExKX0pfX1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmNvbnRyb2xsZXIoXCJTZXRVc2VyQ3RybFwiLFtcIiRzY29wZVwiLFwiJHN0YXRlUGFyYW1zXCIsXCIkc3RhdGVcIixcIlVzZXJGYWN0b3J5XCIsXCJGbGFzaFwiLFwiQXV0aGVudGljYXRpb25cIixmdW5jdGlvbihlLHMsdCxyLGEsbil7dmFyIGM9cy5pZCxvPXMuZW1haWw7ZS5zZXRVc2VybmFtZT17fSxlLnNldFVzZXJuYW1lLmVtYWlsPW8sZS5zYXZlVXNlcm5hbWU9ZnVuY3Rpb24oKXtyLnNldFVzZXJuYW1lKHtpZDpjLHVzZXJuYW1lOmUuc2V0VXNlcm5hbWUudXNlcm5hbWV9KS50aGVuKGZ1bmN0aW9uKHMpe2lmKHMuZGF0YS5lcnJvcnMpe3ZhciByPUhlbHBlckZhY3RvcnkuY3JlYXRlRXJyb3JNZXNzYWdlKHMuZGF0YS5lcnJvcnMpO2EuY3JlYXRlKFwiZGFuZ2VyXCIsciw1ZTMse30sITEpfWVsc2Ugbi5zZXRVc2VyKHMuZGF0YS51c2VyKSxlLiRlbWl0KFwic3VjY2Vzc2Z1bC1sb2dpblwiKSx0LmdvKFwidGlja2V0Lm15LXRpY2tldHNcIiksYS5jcmVhdGUoXCJzdWNjZXNzXCIsXCJVc2VybmFtZSBoYXMgYmVlbiBzZXQgc3VjY2Vzc2Z1bGx5LlwiLDVlMyx7fSwhMSl9KS5jYXRjaChmdW5jdGlvbihlKXthLmNyZWF0ZShcImRhbmdlclwiLFwiVGhlcmUgd2FzIHNvbWUgZXJyb3IgdHJ5aW5nIHRvIHNldCB0aGUgdXNlcm5hbWUuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyx7fSwhMSl9KX19XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiQWN0aW9uc0N0cmxcIixbXCIkc2NvcGVcIixcIkFjdGlvbkZhY3RvcnlcIixcIkhlbHBlckZhY3RvcnlcIixmdW5jdGlvbihlLHQsYSl7ZS5nZXRUYXNrPXQuZ2V0VGFzayxlLnRhc2s9e30sZS5zZXRTYXZlRm49ZnVuY3Rpb24odCl7ZS5zYXZlVGFzaz10fSxlLmNhbmNlbFRhc2s9ZnVuY3Rpb24oKXt0LnNldFRhc2sobnVsbCksZS50YXNrLmNvbW1lbnQ9XCJcIixlLnRhc2suc2hvd1Rhc2tQYW5lbD0hMSxlLnRhc2suc2hvd01haW5QYW5lbD0hMX0sZS5zZXRTYXZlQnRuTmFtZT1mdW5jdGlvbih0KXtlLnNhdmVCdG5OYW1lPXR9LGUuJHdhdGNoKFwiZ2V0VGFzaygpXCIsZnVuY3Rpb24ocyxuKXtpZihzKXN3aXRjaChlLnRhc2suc2hvd1Rhc2tQYW5lbD0hMCxlLnRhc2suc2hvd01haW5QYW5lbD0hMCxlLnRhc2submFtZT1cInRlbXBsYXRlcy9wYXJ0aWFscy9hY3Rpb24vXCIrcytcIi1hY3Rpb24tcGFydGlhbC5odG1sXCIscyl7Y2FzZVwiY29tbWVudFwiOmUudGFzay50aXRsZT1cIkFkZCBuZXcgY29tbWVudFwiO2JyZWFrO2Nhc2VcImF3YWl0aW5ndXNlcnNyZXNwb25zZVwiOmUudGFzay50aXRsZT1cIkF3YWl0aW5nIHVzZXJzIHJlc3BvbnNlXCI7YnJlYWs7Y2FzZVwiY2xvc2VcIjplLnRhc2sudGl0bGU9XCJDbG9zZSB0aWNrZXRcIjticmVhaztjYXNlXCJyZW9wZW5cIjplLnRhc2sudGl0bGU9XCJSZW9wZW4gdGlja2V0XCI7YnJlYWs7Y2FzZVwiYWNrbm93bGVkZ2VcIjplLnRhc2sudGl0bGU9XCJBY2tub3dsZWRnZSB0aWNrZXRcIjticmVhaztjYXNlXCJhc3NpZ25cIjplLnRhc2sudGl0bGU9XCJBc3NpZ24gdGlja2V0XCIsdC5nZXRBc3NpZ25lZXMoKS50aGVuKGZ1bmN0aW9uKHQpe2UudXNlcnM9dC5kYXRhLnVzZXJzLGUudXNlcnM9YS5yZW1vdmVVc2VyRnJvbVVzZXJzKGUudXNlcnMsW2UudGlja2V0LmNyZWF0ZWRCeSxlLnRpY2tldC5hc3NpZ25lZV0pfSk7YnJlYWs7Y2FzZVwiY2hhbmdlc3RhdHVzXCI6ZS50YXNrLnRpdGxlPVwiQ2hhbmdlIHRpY2tldCBzdGF0dXNcIjt2YXIgYz1lLnRpY2tldC5zdGF0dXM7dC5nZXRBbGxvd2VkU3RhdHVzKGMpLnRoZW4oZnVuY3Rpb24odCl7ZS5hbGxvd2VkU3RhdHVzPXQuZGF0YS5zdGF0dXMuYWxsb3dlZH0pfX0pfV0pLmNvbnRyb2xsZXIoXCJBc3NpZ25BY3Rpb25DdHJsXCIsW1wiJHNjb3BlXCIsXCJBY3Rpb25GYWN0b3J5XCIsXCJGbGFzaFwiLGZ1bmN0aW9uKGUsdCxhKXtlLiR3YXRjaChcInVzZXJzXCIsZnVuY3Rpb24odCl7dCYmKGUuYXNzaWduZWU9dFswXS51c2VybmFtZSl9KSxlLnNldFNhdmVGbihmdW5jdGlvbigpe3QuYXNzaWduKGUudGlja2V0LmlkLGUuYXNzaWduZWUsZS50YXNrLmNvbW1lbnQpLnRoZW4oZnVuY3Rpb24odCl7ZS50aWNrZXQuY29tbWVudHM9dC5kYXRhLmNvbW1lbnRzLGUudGlja2V0LmFzc2lnbmVlPXQuZGF0YS5hc3NpZ25lZSxhLmNyZWF0ZShcInN1Y2Nlc3NcIixcIlRoZSBhc3NpZ25lZSBoYXMgYmVlbiBjaGFuZ2VkIHN1Y2Nlc3NmdWxseVwiLDVlMyx7fSwhMSksZS5jYW5jZWxUYXNrKCl9KS5jYXRjaChmdW5jdGlvbih0KXthLmNyZWF0ZShcImRhbmdlclwiLFwiVGhlcmUgd2FzIHNvbWUgZXJyb3IgdHJ5aW5nIHRvIGFzc2lnbiB0aGUgdGlja2V0LiBQbGVhc2UgdHJ5IGFnYWluIGFmdGVyIHNvbWUgdGltZS5cIiw1ZTMse30sITEpLGUuY2FuY2VsVGFzaygpfSl9KSxlLnNldFNhdmVCdG5OYW1lKFwiQXNzaWduIFRpY2tldFwiKX1dKS5jb250cm9sbGVyKFwiQ2hhbmdlU3RhdHVzQWN0aW9uQ3RybFwiLFtcIiRzY29wZVwiLFwiQWN0aW9uRmFjdG9yeVwiLFwiRmxhc2hcIixmdW5jdGlvbihlLHQsYSl7ZS4kd2F0Y2goXCJhbGxvd2VkU3RhdHVzXCIsZnVuY3Rpb24odCl7dCYmKGNvbnNvbGUubG9nKHQpLGUubmV3U3RhdHVzPXRbMF0pfSksZS5zZXRTYXZlRm4oZnVuY3Rpb24oKXt0LmNoYW5nZVN0YXR1cyhlLnRpY2tldC5pZCxlLm5ld1N0YXR1cyxlLnRhc2suY29tbWVudCkudGhlbihmdW5jdGlvbih0KXtlLnRpY2tldC5jb21tZW50cz10LmRhdGEuY29tbWVudHMsZS50aWNrZXQuc3RhdHVzPXQuZGF0YS5zdGF0dXMsYS5jcmVhdGUoXCJzdWNjZXNzXCIsXCJUaGUgYXNzaWduZWUgaGFzIGJlZW4gY2hhbmdlZCBzdWNjZXNzZnVsbHlcIiw1ZTMse30sITEpLGUuY2FuY2VsVGFzaygpfSkuY2F0Y2goZnVuY3Rpb24odCl7YS5jcmVhdGUoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byBjaGFuZ2UgdGhlIHRpY2tldCBzdGF0dXMuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyx7fSwhMSksZS5jYW5jZWxUYXNrKCl9KX0pLGUuc2V0U2F2ZUJ0bk5hbWUoXCJDaGFuZ2UgU3RhdHVzXCIpfV0pLmNvbnRyb2xsZXIoXCJDb21tZW50QWN0aW9uQ3RybFwiLFtcIiRzY29wZVwiLFwiQWN0aW9uRmFjdG9yeVwiLFwiRmxhc2hcIixmdW5jdGlvbihlLHQsYSl7ZS5zZXRTYXZlRm4oZnVuY3Rpb24oKXt0LmFkZENvbW1lbnQoZS50aWNrZXQuaWQsZS50YXNrLmNvbW1lbnQpLnRoZW4oZnVuY3Rpb24odCl7ZS50aWNrZXQuY29tbWVudHM9dC5kYXRhLmNvbW1lbnRzLGEuY3JlYXRlKFwic3VjY2Vzc1wiLFwiVGhlIGNvbW1lbnQgaGFzIGJlZW4gYWRkZWQgc3VjY2Vzc2Z1bGx5XCIsNWUzLHt9LCExKSxlLmNhbmNlbFRhc2soKX0pLmNhdGNoKGZ1bmN0aW9uKHQpe2EuY3JlYXRlKFwiZGFuZ2VyXCIsXCJUaGVyZSB3YXMgc29tZSBlcnJvciB0cnlpbmcgdG8gYWRkIGNvbW1lbnQuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyx7fSwhMSksZS5jYW5jZWxUYXNrKCl9KX0pLGUuc2V0U2F2ZUJ0bk5hbWUoXCJBZGQgQ29tbWVudFwiKX1dKS5jb250cm9sbGVyKFwiQ2xvc2VBY3Rpb25DdHJsXCIsW1wiJHNjb3BlXCIsXCJBY3Rpb25GYWN0b3J5XCIsXCJGbGFzaFwiLGZ1bmN0aW9uKGUsdCxhKXtlLnNldFNhdmVGbihmdW5jdGlvbigpe3QuY2xvc2UoZS50aWNrZXQuaWQsZS50YXNrLmNvbW1lbnQpLnRoZW4oZnVuY3Rpb24odCl7ZS50aWNrZXQuY29tbWVudHM9dC5kYXRhLmNvbW1lbnRzLGUudGlja2V0LnN0YXR1cz10LmRhdGEuc3RhdHVzLGEuY3JlYXRlKFwic3VjY2Vzc1wiLFwiVGhlIHN0YXR1cyBoYXMgYmVlbiBjaGFuZ2VkIHN1Y2Nlc3NmdWxseVwiLDVlMyx7fSwhMSksZS5jYW5jZWxUYXNrKCl9KS5jYXRjaChmdW5jdGlvbih0KXthLmNyZWF0ZShcImRhbmdlclwiLFwiVGhlcmUgd2FzIHNvbWUgZXJyb3IgdHJ5aW5nIHRvIGNoYW5nZSB0aGUgdGlja2V0IHN0YXR1cy4gUGxlYXNlIHRyeSBhZ2FpbiBhZnRlciBzb21lIHRpbWUuXCIsNWUzLHt9LCExKSxlLmNhbmNlbFRhc2soKX0pfSksZS5zZXRTYXZlQnRuTmFtZShcIkNsb3NlXCIpfV0pLmNvbnRyb2xsZXIoXCJSZW9wZW5BY3Rpb25DdHJsXCIsW1wiJHNjb3BlXCIsXCJBY3Rpb25GYWN0b3J5XCIsXCJGbGFzaFwiLGZ1bmN0aW9uKGUsdCxhKXtlLnNldFNhdmVGbihmdW5jdGlvbigpe3QucmVvcGVuKGUudGlja2V0LmlkLGUudGFzay5jb21tZW50KS50aGVuKGZ1bmN0aW9uKHQpe2UudGlja2V0LmNvbW1lbnRzPXQuZGF0YS5jb21tZW50cyxlLnRpY2tldC5zdGF0dXM9dC5kYXRhLnN0YXR1cyxhLmNyZWF0ZShcInN1Y2Nlc3NcIixcIlRoZSBzdGF0dXMgaGFzIGJlZW4gY2hhbmdlZCBzdWNjZXNzZnVsbHlcIiw1ZTMse30sITEpLGUuY2FuY2VsVGFzaygpfSkuY2F0Y2goZnVuY3Rpb24odCl7YS5jcmVhdGUoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byBjaGFuZ2UgdGhlIHRpY2tldCBzdGF0dXMuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyx7fSwhMSksZS5jYW5jZWxUYXNrKCl9KX0pLGUuc2V0U2F2ZUJ0bk5hbWUoXCJSZW9wZW5cIil9XSkuY29udHJvbGxlcihcIkF3YWl0aW5nQWN0aW9uQ3RybFwiLFtcIiRzY29wZVwiLFwiQWN0aW9uRmFjdG9yeVwiLFwiRmxhc2hcIixmdW5jdGlvbihlLHQsYSl7ZS5zZXRTYXZlRm4oZnVuY3Rpb24oKXt0LmF3YWl0aW5nVXNlclJlc3BvbnNlKGUudGlja2V0LmlkLGUudGFzay5jb21tZW50KS50aGVuKGZ1bmN0aW9uKHQpe2UudGlja2V0LmNvbW1lbnRzPXQuZGF0YS5jb21tZW50cyxlLnRpY2tldC5zdGF0dXM9dC5kYXRhLnN0YXR1cyxhLmNyZWF0ZShcInN1Y2Nlc3NcIixcIlRoZSBzdGF0dXMgaGFzIGJlZW4gY2hhbmdlZCBzdWNjZXNzZnVsbHlcIiw1ZTMse30sITEpLGUuY2FuY2VsVGFzaygpfSkuY2F0Y2goZnVuY3Rpb24odCl7YS5jcmVhdGUoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byBjaGFuZ2UgdGhlIHRpY2tldCBzdGF0dXMuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyx7fSwhMSksZS5jYW5jZWxUYXNrKCl9KX0pLGUuc2V0U2F2ZUJ0bk5hbWUoXCJDaGFuZ2UgU3RhdHVzXCIpfV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIkJ1dHRvbkdyb3VwQ3RybFwiLFtcIiRzY29wZVwiLFwiQWN0aW9uRmFjdG9yeVwiLGZ1bmN0aW9uKHQsbyl7dC5idXR0b25ncm91cD17fSx0LiR3YXRjaChcInRpY2tldC5zdGF0dXNcIixmdW5jdGlvbihuKXtuJiZvLmdldEFsbG93ZWRCdXR0b25zKG4pLnRoZW4oZnVuY3Rpb24obyl7dC5idXR0b25ncm91cC5zaG93QXNzaWduPW8uYXNzaWduLHQuYnV0dG9uZ3JvdXAuc2hvd0NvbW1lbnQ9by5jb21tZW50LHQuYnV0dG9uZ3JvdXAuc2hvd2NoYW5nZVN0YXR1cz1vLmNoYW5nZVN0YXR1cyx0LmJ1dHRvbmdyb3VwLnNob3dSZW9wZW49by5yZW9wZW4sdC5idXR0b25ncm91cC5zaG93Q2xvc2U9by5jbG9zZSx0LmJ1dHRvbmdyb3VwLnNob3dBY2tub3dsZWRnZT1vLmFja25vd2xlZGdlLHQuYnV0dG9uZ3JvdXAuc2hvd0F3YWl0aW5nVXNlcnNSZXNwb25zZT1vLmF3YWl0aW5nVXNlclJlc3BvbnNlfSl9KSx0LmJ1dHRvbmdyb3VwLmNvbW1lbnQ9ZnVuY3Rpb24oKXtvLnNldFRhc2soXCJjb21tZW50XCIpfSx0LmJ1dHRvbmdyb3VwLmFzc2lnbj1mdW5jdGlvbigpe28uc2V0VGFzayhcImFzc2lnblwiKX0sdC5idXR0b25ncm91cC5jaGFuZ2VTdGF0dXM9ZnVuY3Rpb24oKXtvLnNldFRhc2soXCJjaGFuZ2VzdGF0dXNcIil9LHQuYnV0dG9uZ3JvdXAuY2xvc2U9ZnVuY3Rpb24oKXtvLnNldFRhc2soXCJjbG9zZVwiKX0sdC5idXR0b25ncm91cC5yZW9wZW49ZnVuY3Rpb24oKXtvLnNldFRhc2soXCJyZW9wZW5cIil9LHQuYnV0dG9uZ3JvdXAuYWNrbm93bGVkZ2U9ZnVuY3Rpb24oKXtvLnNldFRhc2soXCJhY2tub3dsZWRnZVwiKX0sdC5idXR0b25ncm91cC5hd2FpdGluZ3VzZXJzcmVzcG9uc2U9ZnVuY3Rpb24oKXtvLnNldFRhc2soXCJhd2FpdGluZ3VzZXJzcmVzcG9uc2VcIil9fV0pOyJdLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
