angular.module("ticketSystem",["ngRoute","textAngular","yangular-grid","yg-modal","ngFlash","ui.router"]).service("authInterceptor",["$q","$injector","Authentication",function(t,e,r){return{response:function(e){return 401===e.status&&r.clearUser(),e||t.when(e)},responseError:function(l){return 401===l.status&&(r.clearUser(),e.get("$state").go("users-login.login")),403===l.status&&e.get("$state").go("ticket.my-tickets"),t.reject(l)}}}]).config(["$httpProvider","$stateProvider","$urlRouterProvider",function(t,e,r){r.otherwise("/ticket/my-tickets"),e.state("ticket",{url:"/ticket",controller:"TicketsCtrl",templateUrl:"templates/tickets/tickets.html"}).state("ticket.my-tickets",{url:"/my-tickets",controller:"TicketsCtrl",templateUrl:"templates/tickets/view-my-tickets.html"}).state("ticket.to-me-tickets",{url:"/tome-tickets",controller:"TicketsCtrl",templateUrl:"templates/tickets/view-tome-tickets.html"}).state("ticket.all-tickets",{url:"/all-tickets",controller:"TicketsCtrl",templateUrl:"templates/tickets/view-all-tickets.html"}).state("ticket-new",{url:"/ticket/new",controller:"NewTicketCtrl",templateUrl:"templates/tickets/new-ticket.html"}).state("ticket-view",{url:"/ticket/view/:id",controller:"ViewTicketCtrl",templateUrl:"templates/tickets/view-ticket.html"}).state("ticket-edit",{url:"/ticket/edit/:id",controller:"EditTicketCtrl",templateUrl:"templates/tickets/edit-ticket.html"}).state("users-login",{url:"/users",controller:"MainLoginCtrl",templateUrl:"templates/users/user-login.html"}).state("users-login.login",{url:"/login",controller:"LoginCtrl",templateUrl:"templates/users/login.html"}).state("users-login.register",{url:"/register",controller:"RegisterCtrl",templateUrl:"templates/users/register.html"}).state("users-profile",{url:"/users/profile",controller:"ProfileCtrl",templateUrl:"templates/users/profile.html"}).state("users-register",{url:"/users/register",controller:"RegisterCtrl",templateUrl:"templates/users/register.html"}).state("admin-user-management",{url:"/admin/user-management",controller:"ManageUsersCtrl",templateUrl:"templates/admin/manage-users.html"}).state("auth-google",{url:"/auth/google/:id/:email",controller:"SetUserCtrl",templateUrl:"templates/users/set-username.html"}).state("admin-edit",{url:"/admin/edit/:username",controller:"ManageUsersCtrl",templateUrl:"templates/admin/edit-user.html"}).state("admin-reset-password",{url:"/admin/reset-password/:id",controller:"ManageUsersCtrl",templateUrl:"templates/admin/reset-password.html"}),t.interceptors.push("authInterceptor")}]);
angular.module("ticketSystem").directive("ygToggle",function(){return{restrict:"E",scope:{toggle:"="},replace:!0,template:'<div ng-show="loaded" class="toggle-button"><div class="toggle"></div></div>',link:function(e,t,l){var o=function(l){e.loaded=!0,l?t.addClass("is-active"):t.removeClass("is-active")};e.$watch("toggle.value",function(e,t){"undefined"!=typeof e&&o(e)}),t.on("click",function(){e.toggle.value=!e.toggle.value,o(e.toggle.value)})}}});
angular.module("ticketSystem").factory("TicketFactory",["$http",function(t){var e={};return e.createNewTicket=function(e){return t.post("tickets/new",e)},e.updateTicket=function(e,n){return t.put("tickets/"+e,n)},e.getTicketById=function(e){return t.get("tickets/"+e)},e.addComment=function(e,n){return t.post("tickets/addComment/"+e,n)},e.deleteComment=function(e,n){return t.delete("tickets/deleteComment/"+e._id+"?commentId="+n._id)},e.getInitialTicketData=function(e){return t.get("tickets/edit-ticket/initial-load/"+e)},e}]);
angular.module("ticketSystem").factory("CommonFactory",["$http",function(t){var e={};return e.getInitialStaticData=function(){return t.get("tickets/static-data")},e}]).factory("TaskFactory",["$http",function(t){var e,n={};return n.setTask=function(t){e=t},n.getTask=function(){return e},n.getAssignees=function(){return t.get("static/all-users")},n.getAllowedStatus=function(e){return t.get("static/allowed-status/"+e)},n}]).filter("reverse",function(){return function(t){if(t)return t.slice().reverse()}});
angular.module("ticketSystem").factory("UserFactory",["$http",function(e){var t={};return t.login=function(t,r,n){return e.post("accounts/login",{username:t,password:r,remember:n})},t.logout=function(){return e.get("accounts/logout")},t.registerUser=function(t){return e.post("accounts/register",t)},t.getUserByUsername=function(t){return e.get("users/profile/"+t)},t.updateProfile=function(t){return e.post("users/profile/"+t.username,t)},t.setUsername=function(t){return e.post("accounts/set-username",t)},t.getAllUserDetails=function(){return e.get("admin/users-details")},t.getUserDetails=function(t){return e.get("admin/user-details/"+t)},t.updateUserDetails=function(t,r){return e.post("admin/update-user/"+t,r)},t.resetPassword=function(t,r){return e.post("admin/reset-password/"+t,r)},t}]);
angular.module("ticketSystem").factory("HelperFactory",function(){var r={};return r.createErrorMessage=function(r){for(var e="",t=0;t<r.length;t++)e+=r[t].error+"<br/>";return e},r.setAllUsers=function(r){this.users=r},r.getAllUsers=function(){return this.users},r});
angular.module("ticketSystem").factory("Authentication",function(){var t={};return t.getIsAuthenticated=function(){if(localStorage.getItem("ticketSystemUser"))return!0},t.setUser=function(t){localStorage.setItem("ticketSystemUser",JSON.stringify(t))},t.clearUser=function(){localStorage.removeItem("ticketSystemUser")},t.getUser=function(){return JSON.parse(localStorage.getItem("ticketSystemUser"))},t});
angular.module("ticketSystem").controller("MainCtrl",["$scope","$state","Authentication","UserFactory","$window","Flash",function(e,t,i,n,o,r){var s=function(){var t=i.getUser();t.role.indexOf("Admin")>-1?e.isAdmin=!0:e.isAdmin=!1,e.isRegularUser=!0,(i.getUser().role.indexOf("Support")>-1||i.getUser().role.indexOf("Admin")>-1)&&(e.isRegularUser=!1)};e.init=function(){var t=i.getUser();t&&(t.role.indexOf("Admin")>-1?e.isAdmin=!0:e.isAdmin=!1)},e.getUser=i.getUser,e.isAuthenticated=i.getIsAuthenticated,e.logout=function(){n.logout().then(function(){i.clearUser(),t.go("users-login.login")})},e.$on("successful-login",s),e.getProfile=function(){t.go("users-profile")},o.app={},o.app.auth=function(e,n){""!==e?r.create("danger",e.toString(),5e3,{},!1):n.username&&""!==n.username?n&&(i.setUser(n),s(),t.go("ticket.my-tickets")):t.go("auth-google",{id:n._id.toString(),email:n.email})}}]);
angular.module("ticketSystem").controller("ManageUsersCtrl",["$scope","$state","$stateParams","Authentication","HelperFactory","UserFactory","Flash",function(e,s,a,r,t,i,n){var u=function(){return""},c=function(e){return e===!0?"fa fa-check":"fa fa-remove"},o=function(){return""},l=function(e){return e.indexOf("Admin")>-1?"fa fa-check":"fa fa-remove"};e.config={},e.config.url="/admin/users-details",e.config.columns=[],e.config.columns.push({key:"username",name:"Username",cssClass:"col-md-6"}),e.config.columns.push({key:"isActive",name:"Is Active",cssClass:"col-md-3",render:u,renderClass:c}),e.config.columns.push({key:"role",name:"Is Admin",cssClass:"col-md-3",render:o,renderClass:l}),e.config.sortQuerystringParam="sort",e.config.orderQuerystringParam="order",e.config.pageQuerystringParam="page",e.config.sizeQuerystringParam="size",e.config.objectName="users",e.config.onRowClick=function(e){s.go("admin-edit",{username:e.username})},e.isActive={},e.isAdmin={},e.userDetails={},e.userDetails.getUserDetails=function(){var s=a.username;i.getUserDetails(s).then(function(s){e.userDetails.username=s.data.user.username,e.userDetails.firstname=s.data.user.firstname,e.userDetails.lastname=s.data.user.lastname,e.userDetails.id=s.data.user._id;var a=s.data.user.role;a.indexOf("Admin")>-1?e.userDetails.isAdmin=!0:e.userDetails.isAdmin=!1,e.userDetails.isActive=s.data.user.isActive,e.userDetails.email=s.data.user.email,e.isActive.key="isActive",e.isActive.value=e.userDetails.isActive,e.isAdmin.key="isAdmin",e.isAdmin.value=e.userDetails.isAdmin}).catch(function(e){n.create("danger","There was some error trying to fetch user details. Please try again after some time.",5e3,{},!1)})},e.userDetails.update=function(){e.userDetails.isAdmin=e.isAdmin.value,e.userDetails.isActive=e.isActive.value,i.updateUserDetails(e.userDetails.username,e.userDetails).then(function(e){n.create("success","User details updated successfully",5e3,{},!1)}).catch(function(e){n.create("danger","There was some error trying to update user details. Please try again after some time.",5e3,{},!1)})},e.resetPassword={},e.resetPassword.reset=function(){var r=a.id;i.resetPassword(r,e.resetPassword).then(function(e){if(e.data.errors){var a=t.createErrorMessage(e.data.errors);n.create("danger",a,5e3,{},!1)}else n.create("success","Password has been reset successfully",5e3,{},!1),s.go("admin-user-management")}).catch(function(e){n.create("danger","The request could not ben made successfully. Please try later",5e3,{},!1)})}}]);
angular.module("ticketSystem").controller("EditTicketCtrl",["$scope","$stateParams","$state","TicketFactory","Flash","HelperFactory","Authentication","TaskFactory",function(t,e,a,r,i,c,s,n){t.toolbarConfig=[["h1","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],[],["insertLink"]],t.cancel=function(){a.go("ticket-view",{id:t.ticket.id})},t.renderDate=function(t){return new Date(Date.parse(t)).toLocaleDateString()},r.getTicketById(e.id).then(function(e){if(e.data.errors){a.go("ticket.my-tickets");var n=c.createErrorMessage(e.data.errors);i.create("danger",n,4e3,{},!1)}else t.ticket=e.data,t.ticket.currentUser=s.getUser().username,r.getInitialTicketData(t.ticket.status).then(function(e){t.priorities=e.data.priorities.values,t.types=e.data.types.values,t.users=e.data.users,c.setAllUsers(t.users),t.statuses=e.data.statuses}).catch(function(t){console.log(t),i.create("danger","An error occurred while trying to detch the static data.",5e3,{},!1)})}).catch(function(t){console.log(t),i.create("danger","An error occurred while trying to get ticket details. Please try again later.",5e3,{},!1)}),t.update=function(){r.updateTicket(t.ticket._id,t.ticket).then(function(e){t.ticket=e.data,i.create("success","Ticket updated successfully.",5e3,{},!1),a.go("ticket-view",{id:e.data.id})}).catch(function(t){console.log(t),i.create("danger","An error occurred while trying to update ticket details. Please try again later.",5e3,{},!1)})},t.taskpartial="templates/partials/task-partial.html"}]);
angular.module("ticketSystem").controller("NewTicketCtrl",["$scope","$state","TicketFactory","Flash","CommonFactory","HelperFactory",function(e,t,r,i,a,n){a.getInitialStaticData().then(function(t){e.priorities=t.data.priorities.values,e.types=t.data.types.values,e.users=t.data.users,e.newTicket.priority=e.priorities[0].value,e.newTicket.type=e.types[0].value,e.newTicket.assignee=e.users[0].username}),e.newTicket={},e.toolbarConfig=[["h1","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],[],["insertLink"]],e.save=function(){r.createNewTicket({title:e.newTicket.title,description:e.newTicket.description,type:e.newTicket.type}).then(function(e){if(e.data.errors){var r=n.createErrorMessage(e.data.errors);i.create("danger",r,5e3,{},!1)}else t.go("ticket-view",{id:e.data.id})},function(e){i.create("danger","An error occurred while trying to create new ticket. Please try again later.",5e3,{},!1),console.log(e)})}}]);
angular.module("ticketSystem").controller("TaskCtrl",["$scope","TaskFactory",function(a,t){console.log(t),a.getTask=t.getTask,a.task={},a.commentPartial="templates/partials/comments-partial.html",a.$watch("getTask()",function(t,s){switch(console.log(t),a.task.name="templates/partials/"+t+"-partial.html",t){case"comment":a.task.showTaskPanel=!0,a.task.title="Add new comment",a.task.showMainPanel=!1,a.task.showCommentsPanel=!0;break;case"assign":a.task.showTaskPanel=!0,a.task.title="Assign ticket",a.task.showMainPanel=!0,a.task.showCommentsPanel=!0}})}]);
angular.module("ticketSystem").controller("TicketsCtrl",["$scope","$state",function(e,t){e.isSupport=!1;var n=JSON.parse(localStorage.getItem("ticketSystemUser"));n&&(n.role.indexOf("Admin")>-1||n.role.indexOf("Support")>-1)&&(e.isSupport=!0);var i=function(e){return new Date(Date.parse(e)).toLocaleDateString()},c=function(e){return e?String(e).replace(/<[^>]+>/gm,""):""},s=function(e){return e?e:"Unassigned"};e.config={},e.config.columns=[],e.config.columns.push({key:"id",name:"ID",cssClass:"col-md-1"}),e.config.columns.push({key:"title",name:"Title",cssClass:"col-md-2"}),e.config.columns.push({key:"description",name:"Description",cssClass:"col-md-2",render:c}),e.config.columns.push({key:"type",name:"Type",cssClass:"col-md-1"}),e.config.columns.push({key:"assignee",name:"Assignee",cssClass:"col-md-2",render:s}),e.config.columns.push({key:"createdDate",name:"Created Date",cssClass:"col-md-2",render:i}),e.config.columns.push({key:"createdBy",name:"Created By",cssClass:"col-md-2"}),e.config.sortQuerystringParam="sort",e.config.orderQuerystringParam="order",e.config.pageQuerystringParam="page",e.config.sizeQuerystringParam="size",e.active="",e.config.onRowClick=function(e){t.go("ticket-view",{id:e.id})},e.config.objectName="tickets",e.initiateAllTicket=function(){e.config.url="/tickets/all",e.$parent.active="all"},e.initiateMyTicket=function(){e.config.url="/tickets/my",e.$parent.active="my"},e.initiateToMeTicket=function(){e.config.url="/tickets/to-me",e.$parent.active="tome"}}]);
angular.module("ticketSystem").controller("ViewTicketCtrl",["$scope","$stateParams","$state","TicketFactory","Flash","Authentication",function(e,t,a,r,c,i){e.ticket={},e.renderDate=function(e){return new Date(Date.parse(e)).toLocaleDateString()},e.edit=function(){a.go("ticket-edit",{id:e.ticket.id})},r.getTicketById(t.id).then(function(t){t.data.errors?(a.go("ticket.my-tickets"),c.create("danger",t.data.errors[0].msg,4e3,{},!1)):(e.ticket=t.data,e.ticket.assignee=e.ticket.assignee?e.ticket.assignee:"Unassigned",e.ticket.createdDate=e.renderDate(e.ticket.createdDate),e.ticket.currentUser=i.getUser().username)}).catch(function(e){console.log(e),c.create("danger","An error occurred while trying to get ticket details. Please try again later.",5e3,{},!1)})}]).controller("CommentCtrl",["$scope","$window","YgModal","TicketFactory","Flash",function(e,t,a,r,c){}]);
angular.module("ticketSystem").controller("LoginCtrl",["$scope","$state","$window","UserFactory","Authentication",function(e,t,o,r,n){e.error=!1,e.message="",e.login=function(){r.login(e.username,e.password,e.remember).then(function(o){o.data.isAuthenticated?(n.setUser(o.data.user),e.$emit("successful-login"),t.go("ticket.my-tickets")):(e.error=!0,e.message=o.data.msg)}).catch(function(t){e.error=!0,e.message="An error occurred while trying to log you in. Please try again later"})},e.googleLogin=function(){var e="accounts/auth/google",t=600,r=450,n=(window.outerHeight-r)/2,i=(window.outerWidth-t)/2;o.open(e,"facebook_login","width="+t+",height="+r+",scrollbars=0,top="+n+",left="+i)}}]);
angular.module("ticketSystem").controller("MainLoginCtrl",["$rootScope","$scope","$state",function(t,e,n){e.statename=n.current.name,t.$on("$stateChangeStart",function(t,n,a,o,r){e.statename=n.name})}]);
angular.module("ticketSystem").controller("ProfileCtrl",["$scope","$state","Authentication","UserFactory","HelperFactory","Flash",function(e,a,r,s,t,u){e.user={},e.init=function(){s.getUserByUsername(r.getUser().username).then(function(r){if(r.data.errors){var s=t.createErrorMessage(r.data.errors);u.create("danger",s,5e3,{},!1),a.go("ticket.my-tickets")}else e.user.firstname=r.data.user.firstname;e.user.lastname=r.data.user.lastname,e.user.username=r.data.user.username,e.user.email=r.data.user.email})},e.update=function(){s.updateProfile(e.user).then(function(s){e.user.firstname=s.data.user.firstname,e.user.lastname=s.data.user.lastname,e.user.username=s.data.user.username,e.user.email=s.data.user.email,r.setUser(e.user),u.create("success","User details have been updated successfully",5e3,{},!1),a.go("/")}).catch(function(e){u.create("danger","There was some error trying to update user details. Please try again after some time.",5e3,{},!1)})}}]);
angular.module("ticketSystem").controller("RegisterCtrl",["$scope","$state","UserFactory","HelperFactory","Flash",function(e,r,t,s,a){e.newUser={},e.register=function(){t.registerUser(e.newUser).then(function(e){if(e.data.errors){var t=s.createErrorMessage(e.data.errors);a.create("danger",t,5e3,{},!1)}else a.create("success","User has been created successfully. You can now login.",5e3,{},!1),r.go("users-login.login")}).catch(function(e){a.create("danger","There was some error trying to create the user. Please try again after some time.",5e3,{},!1)})}}]);
angular.module("ticketSystem").controller("SetUserCtrl",["$scope","$stateParams","$state","UserFactory","Flash","Authentication",function(e,s,t,r,a,n){var c=s.id,o=s.email;e.setUsername={},e.setUsername.email=o,e.saveUsername=function(){r.setUsername({id:c,username:e.setUsername.username}).then(function(s){if(s.data.errors){var r=HelperFactory.createErrorMessage(s.data.errors);a.create("danger",r,5e3,{},!1)}else n.setUser(s.data.user),e.$emit("successful-login"),t.go("ticket.my-tickets"),a.create("success","Username has been set successfully.",5e3,{},!1)}).catch(function(e){a.create("danger","There was some error trying to set the username. Please try again after some time.",5e3,{},!1)})}}]);
angular.module("ticketSystem").controller("ButtonGroupCtrl",["$scope","TaskFactory",function(t,o){t.buttongroup={},t.buttongroup.showAssign=!0,t.buttongroup.showComment=!0,t.buttongroup.showEdit=!0,t.buttongroup.showchangeStatus=!0,t.buttongroup.comment=function(){o.setTask("comment")},t.buttongroup.assign=function(){o.setTask("assign")},t.buttongroup.changeStatus=function(){o.setTask("changestatus")}}]);
angular.module("ticketSystem").controller("TaskCtrl",["$scope","TaskFactory",function(t,a){t.getTask=a.getTask,t.task={},t.setSaveFn=function(a){t.saveTask=a},t.setCancelFn=function(a){t.cancelTask=a},t.$watch("getTask()",function(e,s){if(e)switch(t.task.showTaskPanel=!0,t.task.showMainPanel=!0,t.task.name="templates/partials/action/"+e+"-action-partial.html",e){case"comment":t.task.title="Add new comment";break;case"assign":t.task.title="Assign ticket",a.getAssignees().then(function(a){t.users=a.data.users});break;case"changestatus":t.task.title="Change ticket status";var n=t.ticket.status;a.getAllowedStatus(n).then(function(a){t.allowedStatus=a.data.status.allowed,t.newStatus=a.data.status.allowed[0]})}})}]).controller("AssignActionCtrl",["$scope",function(t){t.$watch("users",function(a){a&&(t.assignee=a[0].username)}),t.setSaveFn(function(){})}]).controller("ChangeStatusActionCtrl",["$scope",function(t){t.setSaveFn(function(){})}]).controller("CommentActionCtrl",["$scope",function(t){t.setSaveFn(function(){})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJtYWluLm1pbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiLFtcIm5nUm91dGVcIixcInRleHRBbmd1bGFyXCIsXCJ5YW5ndWxhci1ncmlkXCIsXCJ5Zy1tb2RhbFwiLFwibmdGbGFzaFwiLFwidWkucm91dGVyXCJdKS5zZXJ2aWNlKFwiYXV0aEludGVyY2VwdG9yXCIsW1wiJHFcIixcIiRpbmplY3RvclwiLFwiQXV0aGVudGljYXRpb25cIixmdW5jdGlvbih0LGUscil7cmV0dXJue3Jlc3BvbnNlOmZ1bmN0aW9uKGUpe3JldHVybiA0MDE9PT1lLnN0YXR1cyYmci5jbGVhclVzZXIoKSxlfHx0LndoZW4oZSl9LHJlc3BvbnNlRXJyb3I6ZnVuY3Rpb24obCl7cmV0dXJuIDQwMT09PWwuc3RhdHVzJiYoci5jbGVhclVzZXIoKSxlLmdldChcIiRzdGF0ZVwiKS5nbyhcInVzZXJzLWxvZ2luLmxvZ2luXCIpKSw0MDM9PT1sLnN0YXR1cyYmZS5nZXQoXCIkc3RhdGVcIikuZ28oXCJ0aWNrZXQubXktdGlja2V0c1wiKSx0LnJlamVjdChsKX19fV0pLmNvbmZpZyhbXCIkaHR0cFByb3ZpZGVyXCIsXCIkc3RhdGVQcm92aWRlclwiLFwiJHVybFJvdXRlclByb3ZpZGVyXCIsZnVuY3Rpb24odCxlLHIpe3Iub3RoZXJ3aXNlKFwiL3RpY2tldC9teS10aWNrZXRzXCIpLGUuc3RhdGUoXCJ0aWNrZXRcIix7dXJsOlwiL3RpY2tldFwiLGNvbnRyb2xsZXI6XCJUaWNrZXRzQ3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3RpY2tldHMvdGlja2V0cy5odG1sXCJ9KS5zdGF0ZShcInRpY2tldC5teS10aWNrZXRzXCIse3VybDpcIi9teS10aWNrZXRzXCIsY29udHJvbGxlcjpcIlRpY2tldHNDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdGlja2V0cy92aWV3LW15LXRpY2tldHMuaHRtbFwifSkuc3RhdGUoXCJ0aWNrZXQudG8tbWUtdGlja2V0c1wiLHt1cmw6XCIvdG9tZS10aWNrZXRzXCIsY29udHJvbGxlcjpcIlRpY2tldHNDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdGlja2V0cy92aWV3LXRvbWUtdGlja2V0cy5odG1sXCJ9KS5zdGF0ZShcInRpY2tldC5hbGwtdGlja2V0c1wiLHt1cmw6XCIvYWxsLXRpY2tldHNcIixjb250cm9sbGVyOlwiVGlja2V0c0N0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy90aWNrZXRzL3ZpZXctYWxsLXRpY2tldHMuaHRtbFwifSkuc3RhdGUoXCJ0aWNrZXQtbmV3XCIse3VybDpcIi90aWNrZXQvbmV3XCIsY29udHJvbGxlcjpcIk5ld1RpY2tldEN0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy90aWNrZXRzL25ldy10aWNrZXQuaHRtbFwifSkuc3RhdGUoXCJ0aWNrZXQtdmlld1wiLHt1cmw6XCIvdGlja2V0L3ZpZXcvOmlkXCIsY29udHJvbGxlcjpcIlZpZXdUaWNrZXRDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdGlja2V0cy92aWV3LXRpY2tldC5odG1sXCJ9KS5zdGF0ZShcInRpY2tldC1lZGl0XCIse3VybDpcIi90aWNrZXQvZWRpdC86aWRcIixjb250cm9sbGVyOlwiRWRpdFRpY2tldEN0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy90aWNrZXRzL2VkaXQtdGlja2V0Lmh0bWxcIn0pLnN0YXRlKFwidXNlcnMtbG9naW5cIix7dXJsOlwiL3VzZXJzXCIsY29udHJvbGxlcjpcIk1haW5Mb2dpbkN0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy91c2Vycy91c2VyLWxvZ2luLmh0bWxcIn0pLnN0YXRlKFwidXNlcnMtbG9naW4ubG9naW5cIix7dXJsOlwiL2xvZ2luXCIsY29udHJvbGxlcjpcIkxvZ2luQ3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3VzZXJzL2xvZ2luLmh0bWxcIn0pLnN0YXRlKFwidXNlcnMtbG9naW4ucmVnaXN0ZXJcIix7dXJsOlwiL3JlZ2lzdGVyXCIsY29udHJvbGxlcjpcIlJlZ2lzdGVyQ3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3VzZXJzL3JlZ2lzdGVyLmh0bWxcIn0pLnN0YXRlKFwidXNlcnMtcHJvZmlsZVwiLHt1cmw6XCIvdXNlcnMvcHJvZmlsZVwiLGNvbnRyb2xsZXI6XCJQcm9maWxlQ3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3VzZXJzL3Byb2ZpbGUuaHRtbFwifSkuc3RhdGUoXCJ1c2Vycy1yZWdpc3RlclwiLHt1cmw6XCIvdXNlcnMvcmVnaXN0ZXJcIixjb250cm9sbGVyOlwiUmVnaXN0ZXJDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdXNlcnMvcmVnaXN0ZXIuaHRtbFwifSkuc3RhdGUoXCJhZG1pbi11c2VyLW1hbmFnZW1lbnRcIix7dXJsOlwiL2FkbWluL3VzZXItbWFuYWdlbWVudFwiLGNvbnRyb2xsZXI6XCJNYW5hZ2VVc2Vyc0N0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy9hZG1pbi9tYW5hZ2UtdXNlcnMuaHRtbFwifSkuc3RhdGUoXCJhdXRoLWdvb2dsZVwiLHt1cmw6XCIvYXV0aC9nb29nbGUvOmlkLzplbWFpbFwiLGNvbnRyb2xsZXI6XCJTZXRVc2VyQ3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3VzZXJzL3NldC11c2VybmFtZS5odG1sXCJ9KS5zdGF0ZShcImFkbWluLWVkaXRcIix7dXJsOlwiL2FkbWluL2VkaXQvOnVzZXJuYW1lXCIsY29udHJvbGxlcjpcIk1hbmFnZVVzZXJzQ3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL2FkbWluL2VkaXQtdXNlci5odG1sXCJ9KS5zdGF0ZShcImFkbWluLXJlc2V0LXBhc3N3b3JkXCIse3VybDpcIi9hZG1pbi9yZXNldC1wYXNzd29yZC86aWRcIixjb250cm9sbGVyOlwiTWFuYWdlVXNlcnNDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvYWRtaW4vcmVzZXQtcGFzc3dvcmQuaHRtbFwifSksdC5pbnRlcmNlcHRvcnMucHVzaChcImF1dGhJbnRlcmNlcHRvclwiKX1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmRpcmVjdGl2ZShcInlnVG9nZ2xlXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIsc2NvcGU6e3RvZ2dsZTpcIj1cIn0scmVwbGFjZTohMCx0ZW1wbGF0ZTonPGRpdiBuZy1zaG93PVwibG9hZGVkXCIgY2xhc3M9XCJ0b2dnbGUtYnV0dG9uXCI+PGRpdiBjbGFzcz1cInRvZ2dsZVwiPjwvZGl2PjwvZGl2PicsbGluazpmdW5jdGlvbihlLHQsbCl7dmFyIG89ZnVuY3Rpb24obCl7ZS5sb2FkZWQ9ITAsbD90LmFkZENsYXNzKFwiaXMtYWN0aXZlXCIpOnQucmVtb3ZlQ2xhc3MoXCJpcy1hY3RpdmVcIil9O2UuJHdhdGNoKFwidG9nZ2xlLnZhbHVlXCIsZnVuY3Rpb24oZSx0KXtcInVuZGVmaW5lZFwiIT10eXBlb2YgZSYmbyhlKX0pLHQub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7ZS50b2dnbGUudmFsdWU9IWUudG9nZ2xlLnZhbHVlLG8oZS50b2dnbGUudmFsdWUpfSl9fX0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuZmFjdG9yeShcIlRpY2tldEZhY3RvcnlcIixbXCIkaHR0cFwiLGZ1bmN0aW9uKHQpe3ZhciBlPXt9O3JldHVybiBlLmNyZWF0ZU5ld1RpY2tldD1mdW5jdGlvbihlKXtyZXR1cm4gdC5wb3N0KFwidGlja2V0cy9uZXdcIixlKX0sZS51cGRhdGVUaWNrZXQ9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5wdXQoXCJ0aWNrZXRzL1wiK2Usbil9LGUuZ2V0VGlja2V0QnlJZD1mdW5jdGlvbihlKXtyZXR1cm4gdC5nZXQoXCJ0aWNrZXRzL1wiK2UpfSxlLmFkZENvbW1lbnQ9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5wb3N0KFwidGlja2V0cy9hZGRDb21tZW50L1wiK2Usbil9LGUuZGVsZXRlQ29tbWVudD1mdW5jdGlvbihlLG4pe3JldHVybiB0LmRlbGV0ZShcInRpY2tldHMvZGVsZXRlQ29tbWVudC9cIitlLl9pZCtcIj9jb21tZW50SWQ9XCIrbi5faWQpfSxlLmdldEluaXRpYWxUaWNrZXREYXRhPWZ1bmN0aW9uKGUpe3JldHVybiB0LmdldChcInRpY2tldHMvZWRpdC10aWNrZXQvaW5pdGlhbC1sb2FkL1wiK2UpfSxlfV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuZmFjdG9yeShcIkNvbW1vbkZhY3RvcnlcIixbXCIkaHR0cFwiLGZ1bmN0aW9uKHQpe3ZhciBlPXt9O3JldHVybiBlLmdldEluaXRpYWxTdGF0aWNEYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHQuZ2V0KFwidGlja2V0cy9zdGF0aWMtZGF0YVwiKX0sZX1dKS5mYWN0b3J5KFwiVGFza0ZhY3RvcnlcIixbXCIkaHR0cFwiLGZ1bmN0aW9uKHQpe3ZhciBlLG49e307cmV0dXJuIG4uc2V0VGFzaz1mdW5jdGlvbih0KXtlPXR9LG4uZ2V0VGFzaz1mdW5jdGlvbigpe3JldHVybiBlfSxuLmdldEFzc2lnbmVlcz1mdW5jdGlvbigpe3JldHVybiB0LmdldChcInN0YXRpYy9hbGwtdXNlcnNcIil9LG4uZ2V0QWxsb3dlZFN0YXR1cz1mdW5jdGlvbihlKXtyZXR1cm4gdC5nZXQoXCJzdGF0aWMvYWxsb3dlZC1zdGF0dXMvXCIrZSl9LG59XSkuZmlsdGVyKFwicmV2ZXJzZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQpe2lmKHQpcmV0dXJuIHQuc2xpY2UoKS5yZXZlcnNlKCl9fSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5mYWN0b3J5KFwiVXNlckZhY3RvcnlcIixbXCIkaHR0cFwiLGZ1bmN0aW9uKGUpe3ZhciB0PXt9O3JldHVybiB0LmxvZ2luPWZ1bmN0aW9uKHQscixuKXtyZXR1cm4gZS5wb3N0KFwiYWNjb3VudHMvbG9naW5cIix7dXNlcm5hbWU6dCxwYXNzd29yZDpyLHJlbWVtYmVyOm59KX0sdC5sb2dvdXQ9ZnVuY3Rpb24oKXtyZXR1cm4gZS5nZXQoXCJhY2NvdW50cy9sb2dvdXRcIil9LHQucmVnaXN0ZXJVc2VyPWZ1bmN0aW9uKHQpe3JldHVybiBlLnBvc3QoXCJhY2NvdW50cy9yZWdpc3RlclwiLHQpfSx0LmdldFVzZXJCeVVzZXJuYW1lPWZ1bmN0aW9uKHQpe3JldHVybiBlLmdldChcInVzZXJzL3Byb2ZpbGUvXCIrdCl9LHQudXBkYXRlUHJvZmlsZT1mdW5jdGlvbih0KXtyZXR1cm4gZS5wb3N0KFwidXNlcnMvcHJvZmlsZS9cIit0LnVzZXJuYW1lLHQpfSx0LnNldFVzZXJuYW1lPWZ1bmN0aW9uKHQpe3JldHVybiBlLnBvc3QoXCJhY2NvdW50cy9zZXQtdXNlcm5hbWVcIix0KX0sdC5nZXRBbGxVc2VyRGV0YWlscz1mdW5jdGlvbigpe3JldHVybiBlLmdldChcImFkbWluL3VzZXJzLWRldGFpbHNcIil9LHQuZ2V0VXNlckRldGFpbHM9ZnVuY3Rpb24odCl7cmV0dXJuIGUuZ2V0KFwiYWRtaW4vdXNlci1kZXRhaWxzL1wiK3QpfSx0LnVwZGF0ZVVzZXJEZXRhaWxzPWZ1bmN0aW9uKHQscil7cmV0dXJuIGUucG9zdChcImFkbWluL3VwZGF0ZS11c2VyL1wiK3Qscil9LHQucmVzZXRQYXNzd29yZD1mdW5jdGlvbih0LHIpe3JldHVybiBlLnBvc3QoXCJhZG1pbi9yZXNldC1wYXNzd29yZC9cIit0LHIpfSx0fV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuZmFjdG9yeShcIkhlbHBlckZhY3RvcnlcIixmdW5jdGlvbigpe3ZhciByPXt9O3JldHVybiByLmNyZWF0ZUVycm9yTWVzc2FnZT1mdW5jdGlvbihyKXtmb3IodmFyIGU9XCJcIix0PTA7dDxyLmxlbmd0aDt0KyspZSs9clt0XS5lcnJvcitcIjxici8+XCI7cmV0dXJuIGV9LHIuc2V0QWxsVXNlcnM9ZnVuY3Rpb24ocil7dGhpcy51c2Vycz1yfSxyLmdldEFsbFVzZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXNlcnN9LHJ9KTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmZhY3RvcnkoXCJBdXRoZW50aWNhdGlvblwiLGZ1bmN0aW9uKCl7dmFyIHQ9e307cmV0dXJuIHQuZ2V0SXNBdXRoZW50aWNhdGVkPWZ1bmN0aW9uKCl7aWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0aWNrZXRTeXN0ZW1Vc2VyXCIpKXJldHVybiEwfSx0LnNldFVzZXI9ZnVuY3Rpb24odCl7bG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0aWNrZXRTeXN0ZW1Vc2VyXCIsSlNPTi5zdHJpbmdpZnkodCkpfSx0LmNsZWFyVXNlcj1mdW5jdGlvbigpe2xvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwidGlja2V0U3lzdGVtVXNlclwiKX0sdC5nZXRVc2VyPWZ1bmN0aW9uKCl7cmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0aWNrZXRTeXN0ZW1Vc2VyXCIpKX0sdH0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIk1haW5DdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVcIixcIkF1dGhlbnRpY2F0aW9uXCIsXCJVc2VyRmFjdG9yeVwiLFwiJHdpbmRvd1wiLFwiRmxhc2hcIixmdW5jdGlvbihlLHQsaSxuLG8scil7dmFyIHM9ZnVuY3Rpb24oKXt2YXIgdD1pLmdldFVzZXIoKTt0LnJvbGUuaW5kZXhPZihcIkFkbWluXCIpPi0xP2UuaXNBZG1pbj0hMDplLmlzQWRtaW49ITEsZS5pc1JlZ3VsYXJVc2VyPSEwLChpLmdldFVzZXIoKS5yb2xlLmluZGV4T2YoXCJTdXBwb3J0XCIpPi0xfHxpLmdldFVzZXIoKS5yb2xlLmluZGV4T2YoXCJBZG1pblwiKT4tMSkmJihlLmlzUmVndWxhclVzZXI9ITEpfTtlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD1pLmdldFVzZXIoKTt0JiYodC5yb2xlLmluZGV4T2YoXCJBZG1pblwiKT4tMT9lLmlzQWRtaW49ITA6ZS5pc0FkbWluPSExKX0sZS5nZXRVc2VyPWkuZ2V0VXNlcixlLmlzQXV0aGVudGljYXRlZD1pLmdldElzQXV0aGVudGljYXRlZCxlLmxvZ291dD1mdW5jdGlvbigpe24ubG9nb3V0KCkudGhlbihmdW5jdGlvbigpe2kuY2xlYXJVc2VyKCksdC5nbyhcInVzZXJzLWxvZ2luLmxvZ2luXCIpfSl9LGUuJG9uKFwic3VjY2Vzc2Z1bC1sb2dpblwiLHMpLGUuZ2V0UHJvZmlsZT1mdW5jdGlvbigpe3QuZ28oXCJ1c2Vycy1wcm9maWxlXCIpfSxvLmFwcD17fSxvLmFwcC5hdXRoPWZ1bmN0aW9uKGUsbil7XCJcIiE9PWU/ci5jcmVhdGUoXCJkYW5nZXJcIixlLnRvU3RyaW5nKCksNWUzLHt9LCExKTpuLnVzZXJuYW1lJiZcIlwiIT09bi51c2VybmFtZT9uJiYoaS5zZXRVc2VyKG4pLHMoKSx0LmdvKFwidGlja2V0Lm15LXRpY2tldHNcIikpOnQuZ28oXCJhdXRoLWdvb2dsZVwiLHtpZDpuLl9pZC50b1N0cmluZygpLGVtYWlsOm4uZW1haWx9KX19XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiTWFuYWdlVXNlcnNDdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVcIixcIiRzdGF0ZVBhcmFtc1wiLFwiQXV0aGVudGljYXRpb25cIixcIkhlbHBlckZhY3RvcnlcIixcIlVzZXJGYWN0b3J5XCIsXCJGbGFzaFwiLGZ1bmN0aW9uKGUscyxhLHIsdCxpLG4pe3ZhciB1PWZ1bmN0aW9uKCl7cmV0dXJuXCJcIn0sYz1mdW5jdGlvbihlKXtyZXR1cm4gZT09PSEwP1wiZmEgZmEtY2hlY2tcIjpcImZhIGZhLXJlbW92ZVwifSxvPWZ1bmN0aW9uKCl7cmV0dXJuXCJcIn0sbD1mdW5jdGlvbihlKXtyZXR1cm4gZS5pbmRleE9mKFwiQWRtaW5cIik+LTE/XCJmYSBmYS1jaGVja1wiOlwiZmEgZmEtcmVtb3ZlXCJ9O2UuY29uZmlnPXt9LGUuY29uZmlnLnVybD1cIi9hZG1pbi91c2Vycy1kZXRhaWxzXCIsZS5jb25maWcuY29sdW1ucz1bXSxlLmNvbmZpZy5jb2x1bW5zLnB1c2goe2tleTpcInVzZXJuYW1lXCIsbmFtZTpcIlVzZXJuYW1lXCIsY3NzQ2xhc3M6XCJjb2wtbWQtNlwifSksZS5jb25maWcuY29sdW1ucy5wdXNoKHtrZXk6XCJpc0FjdGl2ZVwiLG5hbWU6XCJJcyBBY3RpdmVcIixjc3NDbGFzczpcImNvbC1tZC0zXCIscmVuZGVyOnUscmVuZGVyQ2xhc3M6Y30pLGUuY29uZmlnLmNvbHVtbnMucHVzaCh7a2V5Olwicm9sZVwiLG5hbWU6XCJJcyBBZG1pblwiLGNzc0NsYXNzOlwiY29sLW1kLTNcIixyZW5kZXI6byxyZW5kZXJDbGFzczpsfSksZS5jb25maWcuc29ydFF1ZXJ5c3RyaW5nUGFyYW09XCJzb3J0XCIsZS5jb25maWcub3JkZXJRdWVyeXN0cmluZ1BhcmFtPVwib3JkZXJcIixlLmNvbmZpZy5wYWdlUXVlcnlzdHJpbmdQYXJhbT1cInBhZ2VcIixlLmNvbmZpZy5zaXplUXVlcnlzdHJpbmdQYXJhbT1cInNpemVcIixlLmNvbmZpZy5vYmplY3ROYW1lPVwidXNlcnNcIixlLmNvbmZpZy5vblJvd0NsaWNrPWZ1bmN0aW9uKGUpe3MuZ28oXCJhZG1pbi1lZGl0XCIse3VzZXJuYW1lOmUudXNlcm5hbWV9KX0sZS5pc0FjdGl2ZT17fSxlLmlzQWRtaW49e30sZS51c2VyRGV0YWlscz17fSxlLnVzZXJEZXRhaWxzLmdldFVzZXJEZXRhaWxzPWZ1bmN0aW9uKCl7dmFyIHM9YS51c2VybmFtZTtpLmdldFVzZXJEZXRhaWxzKHMpLnRoZW4oZnVuY3Rpb24ocyl7ZS51c2VyRGV0YWlscy51c2VybmFtZT1zLmRhdGEudXNlci51c2VybmFtZSxlLnVzZXJEZXRhaWxzLmZpcnN0bmFtZT1zLmRhdGEudXNlci5maXJzdG5hbWUsZS51c2VyRGV0YWlscy5sYXN0bmFtZT1zLmRhdGEudXNlci5sYXN0bmFtZSxlLnVzZXJEZXRhaWxzLmlkPXMuZGF0YS51c2VyLl9pZDt2YXIgYT1zLmRhdGEudXNlci5yb2xlO2EuaW5kZXhPZihcIkFkbWluXCIpPi0xP2UudXNlckRldGFpbHMuaXNBZG1pbj0hMDplLnVzZXJEZXRhaWxzLmlzQWRtaW49ITEsZS51c2VyRGV0YWlscy5pc0FjdGl2ZT1zLmRhdGEudXNlci5pc0FjdGl2ZSxlLnVzZXJEZXRhaWxzLmVtYWlsPXMuZGF0YS51c2VyLmVtYWlsLGUuaXNBY3RpdmUua2V5PVwiaXNBY3RpdmVcIixlLmlzQWN0aXZlLnZhbHVlPWUudXNlckRldGFpbHMuaXNBY3RpdmUsZS5pc0FkbWluLmtleT1cImlzQWRtaW5cIixlLmlzQWRtaW4udmFsdWU9ZS51c2VyRGV0YWlscy5pc0FkbWlufSkuY2F0Y2goZnVuY3Rpb24oZSl7bi5jcmVhdGUoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byBmZXRjaCB1c2VyIGRldGFpbHMuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyx7fSwhMSl9KX0sZS51c2VyRGV0YWlscy51cGRhdGU9ZnVuY3Rpb24oKXtlLnVzZXJEZXRhaWxzLmlzQWRtaW49ZS5pc0FkbWluLnZhbHVlLGUudXNlckRldGFpbHMuaXNBY3RpdmU9ZS5pc0FjdGl2ZS52YWx1ZSxpLnVwZGF0ZVVzZXJEZXRhaWxzKGUudXNlckRldGFpbHMudXNlcm5hbWUsZS51c2VyRGV0YWlscykudGhlbihmdW5jdGlvbihlKXtuLmNyZWF0ZShcInN1Y2Nlc3NcIixcIlVzZXIgZGV0YWlscyB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiLDVlMyx7fSwhMSl9KS5jYXRjaChmdW5jdGlvbihlKXtuLmNyZWF0ZShcImRhbmdlclwiLFwiVGhlcmUgd2FzIHNvbWUgZXJyb3IgdHJ5aW5nIHRvIHVwZGF0ZSB1c2VyIGRldGFpbHMuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyx7fSwhMSl9KX0sZS5yZXNldFBhc3N3b3JkPXt9LGUucmVzZXRQYXNzd29yZC5yZXNldD1mdW5jdGlvbigpe3ZhciByPWEuaWQ7aS5yZXNldFBhc3N3b3JkKHIsZS5yZXNldFBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uKGUpe2lmKGUuZGF0YS5lcnJvcnMpe3ZhciBhPXQuY3JlYXRlRXJyb3JNZXNzYWdlKGUuZGF0YS5lcnJvcnMpO24uY3JlYXRlKFwiZGFuZ2VyXCIsYSw1ZTMse30sITEpfWVsc2Ugbi5jcmVhdGUoXCJzdWNjZXNzXCIsXCJQYXNzd29yZCBoYXMgYmVlbiByZXNldCBzdWNjZXNzZnVsbHlcIiw1ZTMse30sITEpLHMuZ28oXCJhZG1pbi11c2VyLW1hbmFnZW1lbnRcIil9KS5jYXRjaChmdW5jdGlvbihlKXtuLmNyZWF0ZShcImRhbmdlclwiLFwiVGhlIHJlcXVlc3QgY291bGQgbm90IGJlbiBtYWRlIHN1Y2Nlc3NmdWxseS4gUGxlYXNlIHRyeSBsYXRlclwiLDVlMyx7fSwhMSl9KX19XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiRWRpdFRpY2tldEN0cmxcIixbXCIkc2NvcGVcIixcIiRzdGF0ZVBhcmFtc1wiLFwiJHN0YXRlXCIsXCJUaWNrZXRGYWN0b3J5XCIsXCJGbGFzaFwiLFwiSGVscGVyRmFjdG9yeVwiLFwiQXV0aGVudGljYXRpb25cIixcIlRhc2tGYWN0b3J5XCIsZnVuY3Rpb24odCxlLGEscixpLGMscyxuKXt0LnRvb2xiYXJDb25maWc9W1tcImgxXCIsXCJwXCIsXCJwcmVcIixcInF1b3RlXCJdLFtcImJvbGRcIixcIml0YWxpY3NcIixcInVuZGVybGluZVwiLFwic3RyaWtlVGhyb3VnaFwiLFwidWxcIixcIm9sXCIsXCJyZWRvXCIsXCJ1bmRvXCIsXCJjbGVhclwiXSxbXSxbXCJpbnNlcnRMaW5rXCJdXSx0LmNhbmNlbD1mdW5jdGlvbigpe2EuZ28oXCJ0aWNrZXQtdmlld1wiLHtpZDp0LnRpY2tldC5pZH0pfSx0LnJlbmRlckRhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBEYXRlKERhdGUucGFyc2UodCkpLnRvTG9jYWxlRGF0ZVN0cmluZygpfSxyLmdldFRpY2tldEJ5SWQoZS5pZCkudGhlbihmdW5jdGlvbihlKXtpZihlLmRhdGEuZXJyb3JzKXthLmdvKFwidGlja2V0Lm15LXRpY2tldHNcIik7dmFyIG49Yy5jcmVhdGVFcnJvck1lc3NhZ2UoZS5kYXRhLmVycm9ycyk7aS5jcmVhdGUoXCJkYW5nZXJcIixuLDRlMyx7fSwhMSl9ZWxzZSB0LnRpY2tldD1lLmRhdGEsdC50aWNrZXQuY3VycmVudFVzZXI9cy5nZXRVc2VyKCkudXNlcm5hbWUsci5nZXRJbml0aWFsVGlja2V0RGF0YSh0LnRpY2tldC5zdGF0dXMpLnRoZW4oZnVuY3Rpb24oZSl7dC5wcmlvcml0aWVzPWUuZGF0YS5wcmlvcml0aWVzLnZhbHVlcyx0LnR5cGVzPWUuZGF0YS50eXBlcy52YWx1ZXMsdC51c2Vycz1lLmRhdGEudXNlcnMsYy5zZXRBbGxVc2Vycyh0LnVzZXJzKSx0LnN0YXR1c2VzPWUuZGF0YS5zdGF0dXNlc30pLmNhdGNoKGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKHQpLGkuY3JlYXRlKFwiZGFuZ2VyXCIsXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB0cnlpbmcgdG8gZGV0Y2ggdGhlIHN0YXRpYyBkYXRhLlwiLDVlMyx7fSwhMSl9KX0pLmNhdGNoKGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKHQpLGkuY3JlYXRlKFwiZGFuZ2VyXCIsXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB0cnlpbmcgdG8gZ2V0IHRpY2tldCBkZXRhaWxzLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiLDVlMyx7fSwhMSl9KSx0LnVwZGF0ZT1mdW5jdGlvbigpe3IudXBkYXRlVGlja2V0KHQudGlja2V0Ll9pZCx0LnRpY2tldCkudGhlbihmdW5jdGlvbihlKXt0LnRpY2tldD1lLmRhdGEsaS5jcmVhdGUoXCJzdWNjZXNzXCIsXCJUaWNrZXQgdXBkYXRlZCBzdWNjZXNzZnVsbHkuXCIsNWUzLHt9LCExKSxhLmdvKFwidGlja2V0LXZpZXdcIix7aWQ6ZS5kYXRhLmlkfSl9KS5jYXRjaChmdW5jdGlvbih0KXtjb25zb2xlLmxvZyh0KSxpLmNyZWF0ZShcImRhbmdlclwiLFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIHVwZGF0ZSB0aWNrZXQgZGV0YWlscy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIiw1ZTMse30sITEpfSl9LHQudGFza3BhcnRpYWw9XCJ0ZW1wbGF0ZXMvcGFydGlhbHMvdGFzay1wYXJ0aWFsLmh0bWxcIn1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmNvbnRyb2xsZXIoXCJOZXdUaWNrZXRDdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVcIixcIlRpY2tldEZhY3RvcnlcIixcIkZsYXNoXCIsXCJDb21tb25GYWN0b3J5XCIsXCJIZWxwZXJGYWN0b3J5XCIsZnVuY3Rpb24oZSx0LHIsaSxhLG4pe2EuZ2V0SW5pdGlhbFN0YXRpY0RhdGEoKS50aGVuKGZ1bmN0aW9uKHQpe2UucHJpb3JpdGllcz10LmRhdGEucHJpb3JpdGllcy52YWx1ZXMsZS50eXBlcz10LmRhdGEudHlwZXMudmFsdWVzLGUudXNlcnM9dC5kYXRhLnVzZXJzLGUubmV3VGlja2V0LnByaW9yaXR5PWUucHJpb3JpdGllc1swXS52YWx1ZSxlLm5ld1RpY2tldC50eXBlPWUudHlwZXNbMF0udmFsdWUsZS5uZXdUaWNrZXQuYXNzaWduZWU9ZS51c2Vyc1swXS51c2VybmFtZX0pLGUubmV3VGlja2V0PXt9LGUudG9vbGJhckNvbmZpZz1bW1wiaDFcIixcInBcIixcInByZVwiLFwicXVvdGVcIl0sW1wiYm9sZFwiLFwiaXRhbGljc1wiLFwidW5kZXJsaW5lXCIsXCJzdHJpa2VUaHJvdWdoXCIsXCJ1bFwiLFwib2xcIixcInJlZG9cIixcInVuZG9cIixcImNsZWFyXCJdLFtdLFtcImluc2VydExpbmtcIl1dLGUuc2F2ZT1mdW5jdGlvbigpe3IuY3JlYXRlTmV3VGlja2V0KHt0aXRsZTplLm5ld1RpY2tldC50aXRsZSxkZXNjcmlwdGlvbjplLm5ld1RpY2tldC5kZXNjcmlwdGlvbix0eXBlOmUubmV3VGlja2V0LnR5cGV9KS50aGVuKGZ1bmN0aW9uKGUpe2lmKGUuZGF0YS5lcnJvcnMpe3ZhciByPW4uY3JlYXRlRXJyb3JNZXNzYWdlKGUuZGF0YS5lcnJvcnMpO2kuY3JlYXRlKFwiZGFuZ2VyXCIsciw1ZTMse30sITEpfWVsc2UgdC5nbyhcInRpY2tldC12aWV3XCIse2lkOmUuZGF0YS5pZH0pfSxmdW5jdGlvbihlKXtpLmNyZWF0ZShcImRhbmdlclwiLFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIGNyZWF0ZSBuZXcgdGlja2V0LiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiLDVlMyx7fSwhMSksY29uc29sZS5sb2coZSl9KX19XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiVGFza0N0cmxcIixbXCIkc2NvcGVcIixcIlRhc2tGYWN0b3J5XCIsZnVuY3Rpb24oYSx0KXtjb25zb2xlLmxvZyh0KSxhLmdldFRhc2s9dC5nZXRUYXNrLGEudGFzaz17fSxhLmNvbW1lbnRQYXJ0aWFsPVwidGVtcGxhdGVzL3BhcnRpYWxzL2NvbW1lbnRzLXBhcnRpYWwuaHRtbFwiLGEuJHdhdGNoKFwiZ2V0VGFzaygpXCIsZnVuY3Rpb24odCxzKXtzd2l0Y2goY29uc29sZS5sb2codCksYS50YXNrLm5hbWU9XCJ0ZW1wbGF0ZXMvcGFydGlhbHMvXCIrdCtcIi1wYXJ0aWFsLmh0bWxcIix0KXtjYXNlXCJjb21tZW50XCI6YS50YXNrLnNob3dUYXNrUGFuZWw9ITAsYS50YXNrLnRpdGxlPVwiQWRkIG5ldyBjb21tZW50XCIsYS50YXNrLnNob3dNYWluUGFuZWw9ITEsYS50YXNrLnNob3dDb21tZW50c1BhbmVsPSEwO2JyZWFrO2Nhc2VcImFzc2lnblwiOmEudGFzay5zaG93VGFza1BhbmVsPSEwLGEudGFzay50aXRsZT1cIkFzc2lnbiB0aWNrZXRcIixhLnRhc2suc2hvd01haW5QYW5lbD0hMCxhLnRhc2suc2hvd0NvbW1lbnRzUGFuZWw9ITB9fSl9XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiVGlja2V0c0N0cmxcIixbXCIkc2NvcGVcIixcIiRzdGF0ZVwiLGZ1bmN0aW9uKGUsdCl7ZS5pc1N1cHBvcnQ9ITE7dmFyIG49SlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRpY2tldFN5c3RlbVVzZXJcIikpO24mJihuLnJvbGUuaW5kZXhPZihcIkFkbWluXCIpPi0xfHxuLnJvbGUuaW5kZXhPZihcIlN1cHBvcnRcIik+LTEpJiYoZS5pc1N1cHBvcnQ9ITApO3ZhciBpPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgRGF0ZShEYXRlLnBhcnNlKGUpKS50b0xvY2FsZURhdGVTdHJpbmcoKX0sYz1mdW5jdGlvbihlKXtyZXR1cm4gZT9TdHJpbmcoZSkucmVwbGFjZSgvPFtePl0rPi9nbSxcIlwiKTpcIlwifSxzPWZ1bmN0aW9uKGUpe3JldHVybiBlP2U6XCJVbmFzc2lnbmVkXCJ9O2UuY29uZmlnPXt9LGUuY29uZmlnLmNvbHVtbnM9W10sZS5jb25maWcuY29sdW1ucy5wdXNoKHtrZXk6XCJpZFwiLG5hbWU6XCJJRFwiLGNzc0NsYXNzOlwiY29sLW1kLTFcIn0pLGUuY29uZmlnLmNvbHVtbnMucHVzaCh7a2V5OlwidGl0bGVcIixuYW1lOlwiVGl0bGVcIixjc3NDbGFzczpcImNvbC1tZC0yXCJ9KSxlLmNvbmZpZy5jb2x1bW5zLnB1c2goe2tleTpcImRlc2NyaXB0aW9uXCIsbmFtZTpcIkRlc2NyaXB0aW9uXCIsY3NzQ2xhc3M6XCJjb2wtbWQtMlwiLHJlbmRlcjpjfSksZS5jb25maWcuY29sdW1ucy5wdXNoKHtrZXk6XCJ0eXBlXCIsbmFtZTpcIlR5cGVcIixjc3NDbGFzczpcImNvbC1tZC0xXCJ9KSxlLmNvbmZpZy5jb2x1bW5zLnB1c2goe2tleTpcImFzc2lnbmVlXCIsbmFtZTpcIkFzc2lnbmVlXCIsY3NzQ2xhc3M6XCJjb2wtbWQtMlwiLHJlbmRlcjpzfSksZS5jb25maWcuY29sdW1ucy5wdXNoKHtrZXk6XCJjcmVhdGVkRGF0ZVwiLG5hbWU6XCJDcmVhdGVkIERhdGVcIixjc3NDbGFzczpcImNvbC1tZC0yXCIscmVuZGVyOml9KSxlLmNvbmZpZy5jb2x1bW5zLnB1c2goe2tleTpcImNyZWF0ZWRCeVwiLG5hbWU6XCJDcmVhdGVkIEJ5XCIsY3NzQ2xhc3M6XCJjb2wtbWQtMlwifSksZS5jb25maWcuc29ydFF1ZXJ5c3RyaW5nUGFyYW09XCJzb3J0XCIsZS5jb25maWcub3JkZXJRdWVyeXN0cmluZ1BhcmFtPVwib3JkZXJcIixlLmNvbmZpZy5wYWdlUXVlcnlzdHJpbmdQYXJhbT1cInBhZ2VcIixlLmNvbmZpZy5zaXplUXVlcnlzdHJpbmdQYXJhbT1cInNpemVcIixlLmFjdGl2ZT1cIlwiLGUuY29uZmlnLm9uUm93Q2xpY2s9ZnVuY3Rpb24oZSl7dC5nbyhcInRpY2tldC12aWV3XCIse2lkOmUuaWR9KX0sZS5jb25maWcub2JqZWN0TmFtZT1cInRpY2tldHNcIixlLmluaXRpYXRlQWxsVGlja2V0PWZ1bmN0aW9uKCl7ZS5jb25maWcudXJsPVwiL3RpY2tldHMvYWxsXCIsZS4kcGFyZW50LmFjdGl2ZT1cImFsbFwifSxlLmluaXRpYXRlTXlUaWNrZXQ9ZnVuY3Rpb24oKXtlLmNvbmZpZy51cmw9XCIvdGlja2V0cy9teVwiLGUuJHBhcmVudC5hY3RpdmU9XCJteVwifSxlLmluaXRpYXRlVG9NZVRpY2tldD1mdW5jdGlvbigpe2UuY29uZmlnLnVybD1cIi90aWNrZXRzL3RvLW1lXCIsZS4kcGFyZW50LmFjdGl2ZT1cInRvbWVcIn19XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiVmlld1RpY2tldEN0cmxcIixbXCIkc2NvcGVcIixcIiRzdGF0ZVBhcmFtc1wiLFwiJHN0YXRlXCIsXCJUaWNrZXRGYWN0b3J5XCIsXCJGbGFzaFwiLFwiQXV0aGVudGljYXRpb25cIixmdW5jdGlvbihlLHQsYSxyLGMsaSl7ZS50aWNrZXQ9e30sZS5yZW5kZXJEYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgRGF0ZShEYXRlLnBhcnNlKGUpKS50b0xvY2FsZURhdGVTdHJpbmcoKX0sZS5lZGl0PWZ1bmN0aW9uKCl7YS5nbyhcInRpY2tldC1lZGl0XCIse2lkOmUudGlja2V0LmlkfSl9LHIuZ2V0VGlja2V0QnlJZCh0LmlkKS50aGVuKGZ1bmN0aW9uKHQpe3QuZGF0YS5lcnJvcnM/KGEuZ28oXCJ0aWNrZXQubXktdGlja2V0c1wiKSxjLmNyZWF0ZShcImRhbmdlclwiLHQuZGF0YS5lcnJvcnNbMF0ubXNnLDRlMyx7fSwhMSkpOihlLnRpY2tldD10LmRhdGEsZS50aWNrZXQuYXNzaWduZWU9ZS50aWNrZXQuYXNzaWduZWU/ZS50aWNrZXQuYXNzaWduZWU6XCJVbmFzc2lnbmVkXCIsZS50aWNrZXQuY3JlYXRlZERhdGU9ZS5yZW5kZXJEYXRlKGUudGlja2V0LmNyZWF0ZWREYXRlKSxlLnRpY2tldC5jdXJyZW50VXNlcj1pLmdldFVzZXIoKS51c2VybmFtZSl9KS5jYXRjaChmdW5jdGlvbihlKXtjb25zb2xlLmxvZyhlKSxjLmNyZWF0ZShcImRhbmdlclwiLFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIGdldCB0aWNrZXQgZGV0YWlscy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIiw1ZTMse30sITEpfSl9XSkuY29udHJvbGxlcihcIkNvbW1lbnRDdHJsXCIsW1wiJHNjb3BlXCIsXCIkd2luZG93XCIsXCJZZ01vZGFsXCIsXCJUaWNrZXRGYWN0b3J5XCIsXCJGbGFzaFwiLGZ1bmN0aW9uKGUsdCxhLHIsYyl7fV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIkxvZ2luQ3RybFwiLFtcIiRzY29wZVwiLFwiJHN0YXRlXCIsXCIkd2luZG93XCIsXCJVc2VyRmFjdG9yeVwiLFwiQXV0aGVudGljYXRpb25cIixmdW5jdGlvbihlLHQsbyxyLG4pe2UuZXJyb3I9ITEsZS5tZXNzYWdlPVwiXCIsZS5sb2dpbj1mdW5jdGlvbigpe3IubG9naW4oZS51c2VybmFtZSxlLnBhc3N3b3JkLGUucmVtZW1iZXIpLnRoZW4oZnVuY3Rpb24obyl7by5kYXRhLmlzQXV0aGVudGljYXRlZD8obi5zZXRVc2VyKG8uZGF0YS51c2VyKSxlLiRlbWl0KFwic3VjY2Vzc2Z1bC1sb2dpblwiKSx0LmdvKFwidGlja2V0Lm15LXRpY2tldHNcIikpOihlLmVycm9yPSEwLGUubWVzc2FnZT1vLmRhdGEubXNnKX0pLmNhdGNoKGZ1bmN0aW9uKHQpe2UuZXJyb3I9ITAsZS5tZXNzYWdlPVwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIGxvZyB5b3UgaW4uIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXJcIn0pfSxlLmdvb2dsZUxvZ2luPWZ1bmN0aW9uKCl7dmFyIGU9XCJhY2NvdW50cy9hdXRoL2dvb2dsZVwiLHQ9NjAwLHI9NDUwLG49KHdpbmRvdy5vdXRlckhlaWdodC1yKS8yLGk9KHdpbmRvdy5vdXRlcldpZHRoLXQpLzI7by5vcGVuKGUsXCJmYWNlYm9va19sb2dpblwiLFwid2lkdGg9XCIrdCtcIixoZWlnaHQ9XCIrcitcIixzY3JvbGxiYXJzPTAsdG9wPVwiK24rXCIsbGVmdD1cIitpKX19XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiTWFpbkxvZ2luQ3RybFwiLFtcIiRyb290U2NvcGVcIixcIiRzY29wZVwiLFwiJHN0YXRlXCIsZnVuY3Rpb24odCxlLG4pe2Uuc3RhdGVuYW1lPW4uY3VycmVudC5uYW1lLHQuJG9uKFwiJHN0YXRlQ2hhbmdlU3RhcnRcIixmdW5jdGlvbih0LG4sYSxvLHIpe2Uuc3RhdGVuYW1lPW4ubmFtZX0pfV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIlByb2ZpbGVDdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVcIixcIkF1dGhlbnRpY2F0aW9uXCIsXCJVc2VyRmFjdG9yeVwiLFwiSGVscGVyRmFjdG9yeVwiLFwiRmxhc2hcIixmdW5jdGlvbihlLGEscixzLHQsdSl7ZS51c2VyPXt9LGUuaW5pdD1mdW5jdGlvbigpe3MuZ2V0VXNlckJ5VXNlcm5hbWUoci5nZXRVc2VyKCkudXNlcm5hbWUpLnRoZW4oZnVuY3Rpb24ocil7aWYoci5kYXRhLmVycm9ycyl7dmFyIHM9dC5jcmVhdGVFcnJvck1lc3NhZ2Uoci5kYXRhLmVycm9ycyk7dS5jcmVhdGUoXCJkYW5nZXJcIixzLDVlMyx7fSwhMSksYS5nbyhcInRpY2tldC5teS10aWNrZXRzXCIpfWVsc2UgZS51c2VyLmZpcnN0bmFtZT1yLmRhdGEudXNlci5maXJzdG5hbWU7ZS51c2VyLmxhc3RuYW1lPXIuZGF0YS51c2VyLmxhc3RuYW1lLGUudXNlci51c2VybmFtZT1yLmRhdGEudXNlci51c2VybmFtZSxlLnVzZXIuZW1haWw9ci5kYXRhLnVzZXIuZW1haWx9KX0sZS51cGRhdGU9ZnVuY3Rpb24oKXtzLnVwZGF0ZVByb2ZpbGUoZS51c2VyKS50aGVuKGZ1bmN0aW9uKHMpe2UudXNlci5maXJzdG5hbWU9cy5kYXRhLnVzZXIuZmlyc3RuYW1lLGUudXNlci5sYXN0bmFtZT1zLmRhdGEudXNlci5sYXN0bmFtZSxlLnVzZXIudXNlcm5hbWU9cy5kYXRhLnVzZXIudXNlcm5hbWUsZS51c2VyLmVtYWlsPXMuZGF0YS51c2VyLmVtYWlsLHIuc2V0VXNlcihlLnVzZXIpLHUuY3JlYXRlKFwic3VjY2Vzc1wiLFwiVXNlciBkZXRhaWxzIGhhdmUgYmVlbiB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiLDVlMyx7fSwhMSksYS5nbyhcIi9cIil9KS5jYXRjaChmdW5jdGlvbihlKXt1LmNyZWF0ZShcImRhbmdlclwiLFwiVGhlcmUgd2FzIHNvbWUgZXJyb3IgdHJ5aW5nIHRvIHVwZGF0ZSB1c2VyIGRldGFpbHMuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyx7fSwhMSl9KX19XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiUmVnaXN0ZXJDdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVcIixcIlVzZXJGYWN0b3J5XCIsXCJIZWxwZXJGYWN0b3J5XCIsXCJGbGFzaFwiLGZ1bmN0aW9uKGUscix0LHMsYSl7ZS5uZXdVc2VyPXt9LGUucmVnaXN0ZXI9ZnVuY3Rpb24oKXt0LnJlZ2lzdGVyVXNlcihlLm5ld1VzZXIpLnRoZW4oZnVuY3Rpb24oZSl7aWYoZS5kYXRhLmVycm9ycyl7dmFyIHQ9cy5jcmVhdGVFcnJvck1lc3NhZ2UoZS5kYXRhLmVycm9ycyk7YS5jcmVhdGUoXCJkYW5nZXJcIix0LDVlMyx7fSwhMSl9ZWxzZSBhLmNyZWF0ZShcInN1Y2Nlc3NcIixcIlVzZXIgaGFzIGJlZW4gY3JlYXRlZCBzdWNjZXNzZnVsbHkuIFlvdSBjYW4gbm93IGxvZ2luLlwiLDVlMyx7fSwhMSksci5nbyhcInVzZXJzLWxvZ2luLmxvZ2luXCIpfSkuY2F0Y2goZnVuY3Rpb24oZSl7YS5jcmVhdGUoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byBjcmVhdGUgdGhlIHVzZXIuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyx7fSwhMSl9KX19XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiU2V0VXNlckN0cmxcIixbXCIkc2NvcGVcIixcIiRzdGF0ZVBhcmFtc1wiLFwiJHN0YXRlXCIsXCJVc2VyRmFjdG9yeVwiLFwiRmxhc2hcIixcIkF1dGhlbnRpY2F0aW9uXCIsZnVuY3Rpb24oZSxzLHQscixhLG4pe3ZhciBjPXMuaWQsbz1zLmVtYWlsO2Uuc2V0VXNlcm5hbWU9e30sZS5zZXRVc2VybmFtZS5lbWFpbD1vLGUuc2F2ZVVzZXJuYW1lPWZ1bmN0aW9uKCl7ci5zZXRVc2VybmFtZSh7aWQ6Yyx1c2VybmFtZTplLnNldFVzZXJuYW1lLnVzZXJuYW1lfSkudGhlbihmdW5jdGlvbihzKXtpZihzLmRhdGEuZXJyb3JzKXt2YXIgcj1IZWxwZXJGYWN0b3J5LmNyZWF0ZUVycm9yTWVzc2FnZShzLmRhdGEuZXJyb3JzKTthLmNyZWF0ZShcImRhbmdlclwiLHIsNWUzLHt9LCExKX1lbHNlIG4uc2V0VXNlcihzLmRhdGEudXNlciksZS4kZW1pdChcInN1Y2Nlc3NmdWwtbG9naW5cIiksdC5nbyhcInRpY2tldC5teS10aWNrZXRzXCIpLGEuY3JlYXRlKFwic3VjY2Vzc1wiLFwiVXNlcm5hbWUgaGFzIGJlZW4gc2V0IHN1Y2Nlc3NmdWxseS5cIiw1ZTMse30sITEpfSkuY2F0Y2goZnVuY3Rpb24oZSl7YS5jcmVhdGUoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byBzZXQgdGhlIHVzZXJuYW1lLiBQbGVhc2UgdHJ5IGFnYWluIGFmdGVyIHNvbWUgdGltZS5cIiw1ZTMse30sITEpfSl9fV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIkJ1dHRvbkdyb3VwQ3RybFwiLFtcIiRzY29wZVwiLFwiVGFza0ZhY3RvcnlcIixmdW5jdGlvbih0LG8pe3QuYnV0dG9uZ3JvdXA9e30sdC5idXR0b25ncm91cC5zaG93QXNzaWduPSEwLHQuYnV0dG9uZ3JvdXAuc2hvd0NvbW1lbnQ9ITAsdC5idXR0b25ncm91cC5zaG93RWRpdD0hMCx0LmJ1dHRvbmdyb3VwLnNob3djaGFuZ2VTdGF0dXM9ITAsdC5idXR0b25ncm91cC5jb21tZW50PWZ1bmN0aW9uKCl7by5zZXRUYXNrKFwiY29tbWVudFwiKX0sdC5idXR0b25ncm91cC5hc3NpZ249ZnVuY3Rpb24oKXtvLnNldFRhc2soXCJhc3NpZ25cIil9LHQuYnV0dG9uZ3JvdXAuY2hhbmdlU3RhdHVzPWZ1bmN0aW9uKCl7by5zZXRUYXNrKFwiY2hhbmdlc3RhdHVzXCIpfX1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmNvbnRyb2xsZXIoXCJUYXNrQ3RybFwiLFtcIiRzY29wZVwiLFwiVGFza0ZhY3RvcnlcIixmdW5jdGlvbih0LGEpe3QuZ2V0VGFzaz1hLmdldFRhc2ssdC50YXNrPXt9LHQuc2V0U2F2ZUZuPWZ1bmN0aW9uKGEpe3Quc2F2ZVRhc2s9YX0sdC5zZXRDYW5jZWxGbj1mdW5jdGlvbihhKXt0LmNhbmNlbFRhc2s9YX0sdC4kd2F0Y2goXCJnZXRUYXNrKClcIixmdW5jdGlvbihlLHMpe2lmKGUpc3dpdGNoKHQudGFzay5zaG93VGFza1BhbmVsPSEwLHQudGFzay5zaG93TWFpblBhbmVsPSEwLHQudGFzay5uYW1lPVwidGVtcGxhdGVzL3BhcnRpYWxzL2FjdGlvbi9cIitlK1wiLWFjdGlvbi1wYXJ0aWFsLmh0bWxcIixlKXtjYXNlXCJjb21tZW50XCI6dC50YXNrLnRpdGxlPVwiQWRkIG5ldyBjb21tZW50XCI7YnJlYWs7Y2FzZVwiYXNzaWduXCI6dC50YXNrLnRpdGxlPVwiQXNzaWduIHRpY2tldFwiLGEuZ2V0QXNzaWduZWVzKCkudGhlbihmdW5jdGlvbihhKXt0LnVzZXJzPWEuZGF0YS51c2Vyc30pO2JyZWFrO2Nhc2VcImNoYW5nZXN0YXR1c1wiOnQudGFzay50aXRsZT1cIkNoYW5nZSB0aWNrZXQgc3RhdHVzXCI7dmFyIG49dC50aWNrZXQuc3RhdHVzO2EuZ2V0QWxsb3dlZFN0YXR1cyhuKS50aGVuKGZ1bmN0aW9uKGEpe3QuYWxsb3dlZFN0YXR1cz1hLmRhdGEuc3RhdHVzLmFsbG93ZWQsdC5uZXdTdGF0dXM9YS5kYXRhLnN0YXR1cy5hbGxvd2VkWzBdfSl9fSl9XSkuY29udHJvbGxlcihcIkFzc2lnbkFjdGlvbkN0cmxcIixbXCIkc2NvcGVcIixmdW5jdGlvbih0KXt0LiR3YXRjaChcInVzZXJzXCIsZnVuY3Rpb24oYSl7YSYmKHQuYXNzaWduZWU9YVswXS51c2VybmFtZSl9KSx0LnNldFNhdmVGbihmdW5jdGlvbigpe30pfV0pLmNvbnRyb2xsZXIoXCJDaGFuZ2VTdGF0dXNBY3Rpb25DdHJsXCIsW1wiJHNjb3BlXCIsZnVuY3Rpb24odCl7dC5zZXRTYXZlRm4oZnVuY3Rpb24oKXt9KX1dKS5jb250cm9sbGVyKFwiQ29tbWVudEFjdGlvbkN0cmxcIixbXCIkc2NvcGVcIixmdW5jdGlvbih0KXt0LnNldFNhdmVGbihmdW5jdGlvbigpe30pfV0pOyJdLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
