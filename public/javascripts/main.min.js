angular.module("ticketSystem",["ngRoute","textAngular","yangular-grid","yg-modal","ngFlash","ui.router","yg-notification"]).service("authInterceptor",["$q","$injector","Authentication",function(t,e,r){return{response:function(e){return 401===e.status&&r.clearUser(),e||t.when(e)},responseError:function(l){return 401===l.status&&(r.clearUser(),e.get("$state").go("users-login.login")),403===l.status&&e.get("$state").go("ticket.my-tickets"),t.reject(l)}}}]).config(["$httpProvider","$stateProvider","$urlRouterProvider",function(t,e,r){r.otherwise("/ticket/my-tickets"),e.state("ticket",{url:"/ticket",controller:"TicketsCtrl",templateUrl:"templates/tickets/tickets.html"}).state("ticket.my-tickets",{url:"/my-tickets",controller:"TicketsCtrl",templateUrl:"templates/tickets/view-my-tickets.html"}).state("ticket.to-me-tickets",{url:"/tome-tickets",controller:"TicketsCtrl",templateUrl:"templates/tickets/view-tome-tickets.html"}).state("ticket.all-tickets",{url:"/all-tickets",controller:"TicketsCtrl",templateUrl:"templates/tickets/view-all-tickets.html"}).state("ticket-new",{url:"/ticket/new",controller:"NewTicketCtrl",templateUrl:"templates/tickets/new-ticket.html"}).state("ticket-view",{url:"/ticket/view/:id",controller:"ViewTicketCtrl",templateUrl:"templates/tickets/view-ticket.html"}).state("ticket-edit",{url:"/ticket/edit/:id",controller:"EditTicketCtrl",templateUrl:"templates/tickets/edit-ticket.html"}).state("users-login",{url:"/users",controller:"MainLoginCtrl",templateUrl:"templates/users/user-login.html"}).state("users-login.login",{url:"/login",controller:"LoginCtrl",templateUrl:"templates/users/login.html"}).state("users-login.register",{url:"/register",controller:"RegisterCtrl",templateUrl:"templates/users/register.html"}).state("users-profile",{url:"/users/profile",controller:"ProfileCtrl",templateUrl:"templates/users/profile.html"}).state("users-register",{url:"/users/register",controller:"RegisterCtrl",templateUrl:"templates/users/register.html"}).state("admin-user-management",{url:"/admin/user-management",controller:"ManageUsersCtrl",templateUrl:"templates/admin/manage-users.html"}).state("auth-google",{url:"/auth/google/:id/:email",controller:"SetUserCtrl",templateUrl:"templates/users/set-username.html"}).state("admin-edit",{url:"/admin/edit/:username",controller:"ManageUsersCtrl",templateUrl:"templates/admin/edit-user.html"}).state("admin-reset-password",{url:"/admin/reset-password/:id",controller:"ManageUsersCtrl",templateUrl:"templates/admin/reset-password.html"}),t.interceptors.push("authInterceptor")}]);
angular.module("ticketSystem").directive("ygToggle",function(){return{restrict:"E",scope:{toggle:"="},replace:!0,template:'<div ng-show="loaded" class="toggle-button"><div class="toggle"></div></div>',link:function(e,t,l){var o=function(l){e.loaded=!0,l?t.addClass("is-active"):t.removeClass("is-active")};e.$watch("toggle.value",function(e,t){"undefined"!=typeof e&&o(e)}),t.on("click",function(){e.toggle.value=!e.toggle.value,o(e.toggle.value)})}}});
angular.module("ticketSystem").factory("TicketFactory",["$http",function(t){var e={};return e.createNewTicket=function(e){return t.post("tickets/new",e)},e.updateTicket=function(e,i){return t.put("tickets/"+e,i)},e.getTicketById=function(e){return t.get("tickets/"+e)},e.getInitialTicketData=function(e){return t.get("tickets/edit-ticket/initial-load/"+e)},e}]);
angular.module("ticketSystem").factory("CommonFactory",["$http",function(t){var e={};return e.getInitialStaticData=function(){return t.get("tickets/static-data")},e}]).filter("reverse",function(){return function(t){if(t)return t.slice().reverse()}});
angular.module("ticketSystem").factory("UserFactory",["$http",function(e){var t={};return t.login=function(t,r,n){return e.post("accounts/login",{username:t,password:r,remember:n})},t.logout=function(){return e.get("accounts/logout")},t.registerUser=function(t){return e.post("accounts/register",t)},t.getUserByUsername=function(t){return e.get("users/profile/"+t)},t.updateProfile=function(t){return e.post("users/profile/"+t.username,t)},t.setUsername=function(t){return e.post("accounts/set-username",t)},t.getAllUserDetails=function(){return e.get("admin/users-details")},t.getUserDetails=function(t){return e.get("admin/user-details/"+t)},t.updateUserDetails=function(t,r){return e.post("admin/update-user/"+t,r)},t.resetPassword=function(t,r){return e.post("admin/reset-password/"+t,r)},t}]);
angular.module("ticketSystem").factory("Authentication",function(){var t={};return t.getIsAuthenticated=function(){if(localStorage.getItem("ticketSystemUser"))return!0},t.setUser=function(t){localStorage.setItem("ticketSystemUser",JSON.stringify(t))},t.clearUser=function(){localStorage.removeItem("ticketSystemUser")},t.getUser=function(){return JSON.parse(localStorage.getItem("ticketSystemUser"))},t});
angular.module("ticketSystem").factory("HelperFactory",["Authentication",function(r){var e={};return e.createErrorMessage=function(r){for(var e=[],t=0;t<r.length;t++)e.push(r[t].error);return e},e.setAllUsers=function(r){this.users=r},e.getAllUsers=function(){return this.users},e.getAllUsersButSelf=function(e){var t=r.getUser().username;return e.filter(function(r){return r.username!==t})},e.removeUserFromUsers=function(r,e){return r.filter(function(r){var t=e.indexOf(r.username)===-1;return t})},e.isCurrentUserAdmin=function(){var e=r.getUser();return e.role.indexOf("Admin")>-1},e.isCurrentUserSupport=function(){var e=r.getUser();return e.role.indexOf("Support")>-1},e}]);
angular.module("ticketSystem").factory("ActionFactory",["$http","$q",function(t,e){var n,o={};return o.setTask=function(t){n=t},o.getTask=function(){return n},o.getAssignees=function(){return t.get("static/all-users")},o.getAllowedStatus=function(e){return t.get("static/allowed-status/"+e)},o.getAllowedButtons=function(n){var o=e.defer();return t.get("static/action-buttons/"+n).then(function(t){var e={};e.assign=t.data.actionButtons.assign,e.comment=t.data.actionButtons.comment,e.changeStatus=t.data.actionButtons.changeStatus,e.reopen=t.data.actionButtons.reopen,e.close=t.data.actionButtons.close,e.acknowledge=t.data.actionButtons.acknowledge,e.awaitingUserResponse=t.data.actionButtons.awaitingUserResponse,o.resolve(e)}).catch(function(t){o.reject(t)}),o.promise},o.assign=function(e,n,o){return t.post("tickets/assign/"+e,{assignee:n,comment:o})},o.changeStatus=function(e,n,o){return t.post("tickets/change-status/"+e,{status:n,comment:o})},o.awaitingUserResponse=function(e,n){return t.post("tickets/awaiting-user-response/"+e,{comment:n})},o.reopen=function(e,n){return t.post("tickets/re-open/"+e,{comment:n})},o.close=function(e,n){return t.post("tickets/close/"+e,{comment:n})},o.addComment=function(e,n){return t.post("tickets/addComment/"+e,{comment:n})},o.deleteComment=function(e,n){return t.delete("tickets/deleteComment/"+e._id+"?commentId="+n._id)},o.acknowledgeTicket=function(e,n){return t.post("tickets/acknowledge/"+e,{comment:n})},o}]);
angular.module("ticketSystem").controller("MainCtrl",["$scope","$state","Authentication","UserFactory","$window","YgNotify",function(e,i,t,n,o,r){var s=function(){var i=t.getUser();i.role.indexOf("Admin")>-1?e.isAdmin=!0:e.isAdmin=!1,e.isRegularUser=!0,(t.getUser().role.indexOf("Support")>-1||t.getUser().role.indexOf("Admin")>-1)&&(e.isRegularUser=!1)};e.init=function(){var i=t.getUser();i&&(i.role.indexOf("Admin")>-1?e.isAdmin=!0:e.isAdmin=!1)},e.loading=!1,e.setLoading=function(i){e.loading=i},e.getUser=t.getUser,e.isAuthenticated=t.getIsAuthenticated,e.logout=function(){n.logout().then(function(){t.clearUser(),i.go("users-login.login")})},e.$on("successful-login",s),e.getProfile=function(){i.go("users-profile")},o.app={},o.app.auth=function(e,n){""!==e?r.alert("danger",e.toString(),5e3):n.username&&""!==n.username?n&&(t.setUser(n),s(),i.go("ticket.my-tickets")):i.go("auth-google",{id:n._id.toString(),email:n.email})}}]);
angular.module("ticketSystem").controller("ManageUsersCtrl",["$scope","$state","$stateParams","Authentication","HelperFactory","UserFactory","YgNotify",function(e,s,a,r,t,i,n){var u=function(){return""},c=function(e){return e===!0?"fa fa-check":"fa fa-remove"},o=function(){return""},l=function(e){return e.indexOf("Admin")>-1?"fa fa-check":"fa fa-remove"};e.config={},e.config.url="/admin/users-details",e.config.columns=[],e.config.columns.push({key:"username",name:"Username",cssClass:"col-md-6"}),e.config.columns.push({key:"isActive",name:"Is Active",cssClass:"col-md-3",render:u,renderClass:c}),e.config.columns.push({key:"role",name:"Is Admin",cssClass:"col-md-3",render:o,renderClass:l}),e.config.sortQuerystringParam="sort",e.config.orderQuerystringParam="order",e.config.pageQuerystringParam="page",e.config.sizeQuerystringParam="size",e.config.objectName="users",e.config.onRowClick=function(e){s.go("admin-edit",{username:e.username})},e.isActive={},e.isAdmin={},e.userDetails={},e.userDetails.getUserDetails=function(){var s=a.username;i.getUserDetails(s).then(function(s){e.userDetails.username=s.data.user.username,e.userDetails.firstname=s.data.user.firstname,e.userDetails.lastname=s.data.user.lastname,e.userDetails.id=s.data.user._id;var a=s.data.user.role;a.indexOf("Admin")>-1?e.userDetails.isAdmin=!0:e.userDetails.isAdmin=!1,e.userDetails.isActive=s.data.user.isActive,e.userDetails.email=s.data.user.email,e.isActive.key="isActive",e.isActive.value=e.userDetails.isActive,e.isAdmin.key="isAdmin",e.isAdmin.value=e.userDetails.isAdmin}).catch(function(e){n.alert("danger","There was some error trying to fetch user details. Please try again after some time.",5e3)})},e.userDetails.update=function(){e.userDetails.isAdmin=e.isAdmin.value,e.userDetails.isActive=e.isActive.value,i.updateUserDetails(e.userDetails.username,e.userDetails).then(function(e){n.alert("success","User details updated successfully",5e3)}).catch(function(e){n.alert("danger","There was some error trying to update user details. Please try again after some time.",5e3)})},e.resetPassword={},e.resetPassword.reset=function(){var r=a.id;i.resetPassword(r,e.resetPassword).then(function(e){if(e.data.errors){var a=t.createErrorMessage(e.data.errors);a.forEach(function(e){n.alert("danger",e,5e3)})}else n.alert("success","Password has been reset successfully",5e3),s.go("admin-user-management")}).catch(function(e){n.alert("danger","The request could not ben made successfully. Please try later",5e3)})}}]);
angular.module("ticketSystem").controller("EditTicketCtrl",["$scope","$stateParams","$state","TicketFactory","YgNotify","HelperFactory","Authentication",function(t,e,a,r,i,c,n){t.toolbarConfig=[["h1","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],[],["insertLink"]],t.cancel=function(){a.go("ticket-view",{id:t.ticket.id})},t.renderDate=function(t){return new Date(Date.parse(t)).toLocaleDateString()},r.getTicketById(e.id).then(function(e){if(e.data.errors){a.go("ticket.my-tickets");var o=c.createErrorMessage(e.data.errors);o.forEach(function(t){i.alert("danger",t,5e3)})}else t.ticket=e.data,t.ticket.currentUser=n.getUser().username,r.getInitialTicketData(t.ticket.status).then(function(e){t.priorities=e.data.priorities.values,t.types=e.data.types.values,t.users=e.data.users,c.setAllUsers(t.users),t.statuses=e.data.statuses}).catch(function(t){console.log(t),i.alert("danger","An error occurred while trying to detch the static data.")})}).catch(function(t){console.log(t),i.alert("danger","An error occurred while trying to get ticket details. Please try again later.",5e3)}),t.update=function(){r.updateTicket(t.ticket._id,t.ticket).then(function(e){t.ticket=e.data,i.alert("success","Ticket updated successfully.",5e3),a.go("ticket-view",{id:e.data.id})}).catch(function(t){console.log(t),i.alert("danger","An error occurred while trying to update ticket details. Please try again later.",5e3)})}}]);
angular.module("ticketSystem").controller("NewTicketCtrl",["$scope","$state","TicketFactory","YgNotify","CommonFactory","HelperFactory",function(e,t,i,r,n,o){n.getInitialStaticData().then(function(t){e.newTicket.types=t.data.types.values,e.newTicket.type=e.newTicket.types[0].value}),e.newTicket={},e.toolbarConfig=[["h1","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],[],["insertLink"]],e.save=function(){return e.newTicketForm.$invalid?(e.newTicketForm.title.$touched=!0,void(e.newTicketForm.description.$touched=!0)):void i.createNewTicket({title:e.newTicket.title,description:e.newTicket.description,type:e.newTicket.type}).then(function(e){if(e.data.errors){var i=o.createErrorMessage(e.data.errors);i.forEach(function(e){r.alert("danger",e,5e3)})}else t.go("ticket-view",{id:e.data.id})},function(e){r.alert("danger","An error occurred while trying to create new ticket. Please try again later.",5e3),console.log(e)})}}]);
angular.module("ticketSystem").controller("TaskCtrl",["$scope","TaskFactory",function(a,t){console.log(t),a.getTask=t.getTask,a.task={},a.commentPartial="templates/partials/comments-partial.html",a.$watch("getTask()",function(t,s){switch(console.log(t),a.task.name="templates/partials/"+t+"-partial.html",t){case"comment":a.task.showTaskPanel=!0,a.task.title="Add new comment",a.task.showMainPanel=!1,a.task.showCommentsPanel=!0;break;case"assign":a.task.showTaskPanel=!0,a.task.title="Assign ticket",a.task.showMainPanel=!0,a.task.showCommentsPanel=!0}})}]);
angular.module("ticketSystem").controller("TicketsCtrl",["$scope","$state","agSortFactory",function(e,t,n){e.isSupport=!1;var i=JSON.parse(localStorage.getItem("ticketSystemUser"));i&&(i.role.indexOf("Admin")>-1||i.role.indexOf("Support")>-1)&&(e.isSupport=!0);var c=function(e){return new Date(Date.parse(e)).toLocaleDateString()},o=function(e){return e?String(e).replace(/<[^>]+>/gm,""):""},s=function(e){return e?e:"Unassigned"};e.config={},e.config.columns=[],e.config.columns.push({key:"id",name:"ID",cssClass:"col-md-1"}),e.config.columns.push({key:"title",name:"Title",cssClass:"col-md-2"}),e.config.columns.push({key:"description",name:"Description",cssClass:"col-md-2",render:o}),e.config.columns.push({key:"type",name:"Type",cssClass:"col-md-1"}),e.config.columns.push({key:"assignee",name:"Assignee",cssClass:"col-md-2",render:s}),e.config.columns.push({key:"createdDate",name:"Created Date",cssClass:"col-md-2",render:c}),e.config.columns.push({key:"createdBy",name:"Created By",cssClass:"col-md-2"}),e.config.sortQuerystringParam="sort",e.config.orderQuerystringParam="order",e.config.pageQuerystringParam="page",e.config.sizeQuerystringParam="size",e.active="",e.agLoading=n.getLoading,e.config.onRowClick=function(e){t.go("ticket-view",{id:e.id})},e.config.objectName="tickets",e.initiateAllTicket=function(){e.config.url="/tickets/all",e.$parent.active="all"},e.initiateMyTicket=function(){e.config.url="/tickets/my",e.$parent.active="my"},e.initiateToMeTicket=function(){e.config.url="/tickets/to-me",e.$parent.active="tome"},e.$watch("agLoading()",function(t,n){e.setLoading(t)})}]);
angular.module("ticketSystem").controller("ViewTicketCtrl",["$scope","$stateParams","$state","TicketFactory","YgNotify","Authentication","HelperFactory","YgModal","ActionFactory",function(e,t,r,n,i,a,c,o,s){e.ticket={},e.renderDate=function(e){return new Date(Date.parse(e)).toLocaleDateString()},e.edit=function(){r.go("ticket-edit",{id:e.ticket.id})};var d=function(t,r){return function(){e.setLoading(!0),s.deleteComment(t,r).then(function(t){e.ticket.comments=t.data.comments,i.alert("success","The comment was deleted successfully",5e3),e.setLoading(!1)}).catch(function(t){i.alert("danger","An error occurred while trying to delete comment. Please try again later.",5e3),e.setLoading(!1)})}};e.deleteComment=function(e,t){o.confirm(d(e,t)),o.open("Are you sure you want to do this?","This will delete the comment permanently")},e.setLoading(!0),n.getTicketById(t.id).then(function(t){if(t.data.errors){r.go("ticket.my-tickets");var n=c.createErrorMessage(t.data.errors);n.forEach(function(e){i.alert("danger",e,5e3)})}else e.ticket=t.data,e.ticket.assignee=e.ticket.assignee?e.ticket.assignee:"Unassigned",e.ticket.createdDate=e.renderDate(e.ticket.createdDate),e.ticket.currentUser=a.getUser().username,(e.ticket.assignee===e.ticket.currentUser||e.ticket.createdBy===e.ticket.currentUser||c.isCurrentUserAdmin()||c.isCurrentUserSupport())&&(e.showEdit=!0);e.setLoading(!1)}).catch(function(t){console.log(t),i.alert("danger","An error occurred while trying to get ticket details. Please try again later.",5e3),e.setLoading(!1)})}]);
angular.module("ticketSystem").controller("LoginCtrl",["$scope","$state","$window","UserFactory","Authentication",function(e,t,o,r,n){e.error=!1,e.message="",e.login=function(){r.login(e.username,e.password,e.remember).then(function(o){o.data.isAuthenticated?(n.setUser(o.data.user),e.$emit("successful-login"),t.go("ticket.my-tickets")):(e.error=!0,e.message=o.data.msg)}).catch(function(t){e.error=!0,e.message="An error occurred while trying to log you in. Please try again later"})},e.googleLogin=function(){var e="accounts/auth/google",t=600,r=450,n=(window.outerHeight-r)/2,i=(window.outerWidth-t)/2;o.open(e,"facebook_login","width="+t+",height="+r+",scrollbars=0,top="+n+",left="+i)}}]);
angular.module("ticketSystem").controller("MainLoginCtrl",["$rootScope","$scope","$state",function(t,e,n){e.statename=n.current.name,t.$on("$stateChangeStart",function(t,n,a,o,r){e.statename=n.name})}]);
angular.module("ticketSystem").controller("ProfileCtrl",["$scope","$state","Authentication","UserFactory","HelperFactory","YgNotify",function(e,a,r,t,s,u){e.user={},e.init=function(){t.getUserByUsername(r.getUser().username).then(function(r){if(r.data.errors){var t=s.createErrorMessage(r.data.errors);t.forEach(function(e){u.alert("danger",t,5e3)}),a.go("ticket.my-tickets")}else e.user.firstname=r.data.user.firstname;e.user.lastname=r.data.user.lastname,e.user.username=r.data.user.username,e.user.email=r.data.user.email})},e.update=function(){t.updateProfile(e.user).then(function(t){e.user.firstname=t.data.user.firstname,e.user.lastname=t.data.user.lastname,e.user.username=t.data.user.username,e.user.email=t.data.user.email,r.setUser(e.user),u.alert("success","User details have been updated successfully",5e3),a.go("/")}).catch(function(e){u.alert("danger","There was some error trying to update user details. Please try again after some time.",5e3)})}}]);
angular.module("ticketSystem").controller("RegisterCtrl",["$scope","$state","UserFactory","HelperFactory","YgNotify",function(e,r,t,s,a){e.newUser={},e.register=function(){t.registerUser(e.newUser).then(function(e){if(e.data.errors){var t=s.createErrorMessage(e.data.errors);t.forEach(function(e){a.alert("danger",e,5e3)})}else a.alert("success","User has been created successfully. You can now login.",5e3),r.go("users-login.login")}).catch(function(e){a.alert("danger","There was some error trying to create the user. Please try again after some time.",5e3)})}}]);
angular.module("ticketSystem").controller("SetUserCtrl",["$scope","$stateParams","$state","UserFactory","YgNotify","Authentication",function(e,t,r,s,a,n){var c=t.id,o=t.email;e.setUsername={},e.setUsername.email=o,e.saveUsername=function(){s.setUsername({id:c,username:e.setUsername.username}).then(function(t){if(t.data.errors){var s=HelperFactory.createErrorMessage(t.data.errors);s.forEach(function(e){a.alert("danger",e,5e3)})}else n.setUser(t.data.user),e.$emit("successful-login"),r.go("ticket.my-tickets"),a.alert("success","Username has been set successfully.",5e3)}).catch(function(e){a.alert("danger","There was some error trying to set the username. Please try again after some time.",5e3)})}}]);
angular.module("ticketSystem").controller("ActionsCtrl",["$scope","ActionFactory","HelperFactory","$rootScope",function(t,e,a,n){t.getTask=e.getTask,t.task={},t.task.showTaskPanel=!1,t.task.showMainPanel=!1,e.setTask(null),t.setSaveFn=function(e){t.saveTask=e},t.cancelTask=function(){e.setTask(null),t.task.comment="",t.task.showTaskPanel=!1,t.task.showMainPanel=!1},t.setSaveBtnName=function(e){t.saveBtnName=e},t.$watch("getTask()",function(e,a){if(e)switch(t.setLoading(!0),t.task.showTaskPanel=!0,t.task.showMainPanel=!0,t.task.name="templates/partials/action/"+e+"-action-partial.html",e){case"comment":t.task.title="Add new comment";break;case"awaitingusersresponse":t.task.title="Awaiting users response";break;case"close":t.task.title="Close ticket";break;case"reopen":t.task.title="Reopen ticket";break;case"acknowledge":t.task.title="Acknowledge ticket";break;case"assign":t.task.title="Assign ticket";break;case"changestatus":t.task.title="Change ticket status"}else t.task.name=null})}]).controller("AssignActionCtrl",["$scope","ActionFactory","YgNotify","HelperFactory",function(t,e,a,n){console.log("set assignee"),e.getAssignees().then(function(e){t.users=e.data.users,t.users=n.removeUserFromUsers(t.users,[t.ticket.createdBy,t.ticket.assignee]),t.assignee=t.users[0].username,t.setLoading(!1)}),t.setSaveFn(function(){return t.actionForm.comment.$invalid||t.actionForm.assignee.$invalid?(t.actionForm.comment.$touched=!0,void(t.actionForm.assignee.$touched=!0)):(t.setLoading(!0),void e.assign(t.ticket.id,t.assignee,t.task.comment).then(function(e){if(e.data.errors){var s=n.createErrorMessage(e.data.errors);return void s.forEach(function(t){a.alert("danger",t,5e3)})}t.ticket.comments=e.data.comments,t.ticket.assignee=e.data.assignee,a.alert("success","The assignee has been changed successfully",5e3),t.setLoading(!1),t.cancelTask()}).catch(function(e){a.alert("danger","There was some error trying to assign the ticket. Please try again after some time.",5e3),t.cancelTask(),t.setLoading(!1)}))}),t.setSaveBtnName("Assign Ticket")}]).controller("ChangeStatusActionCtrl",["$scope","ActionFactory","YgNotify",function(t,e,a){var n=t.ticket.status;e.getAllowedStatus(n).then(function(e){console.log(e.data),t.allowedStatus=e.data.status.allowed,t.newStatus=t.allowedStatus[0],t.setLoading(!1)}),t.setSaveFn(function(){return t.actionForm.comment.$invalid||t.actionForm.newStatus.$invalid?(t.actionForm.comment.$touched=!0,void(t.actionForm.newStatus.$touched=!0)):(t.setLoading(!0),void e.changeStatus(t.ticket.id,t.newStatus,t.task.comment).then(function(e){t.ticket.comments=e.data.comments,t.ticket.status=e.data.status,a.alert("success","The assignee has been changed successfully",5e3),t.setLoading(!1),t.cancelTask()}).catch(function(e){a.alert("danger","There was some error trying to change the ticket status. Please try again after some time.",5e3),t.setLoading(!1),t.cancelTask()}))}),t.setSaveBtnName("Change Status")}]).controller("CommentActionCtrl",["$scope","ActionFactory","YgNotify",function(t,e,a){t.setLoading(!1),t.setSaveFn(function(){return t.actionForm.comment.$invalid?void(t.actionForm.comment.$touched=!0):(t.setLoading(!0),void e.addComment(t.ticket.id,t.task.comment).then(function(e){t.ticket.comments=e.data.comments,a.alert("success","The comment has been added successfully",5e3),t.setLoading(!1),t.cancelTask()}).catch(function(e){a.alert("danger","There was some error trying to add comment. Please try again after some time.",5e3),t.setLoading(!1),t.cancelTask()}))}),t.setSaveBtnName("Add Comment")}]).controller("CloseActionCtrl",["$scope","ActionFactory","YgNotify",function(t,e,a){t.setLoading(!1),t.setSaveFn(function(){return t.actionForm.comment.$invalid?void(t.actionForm.comment.$touched=!0):(t.setLoading(!0),void e.close(t.ticket.id,t.task.comment).then(function(e){t.ticket.comments=e.data.comments,t.ticket.status=e.data.status,a.alert("success","The status has been changed successfully",5e3),t.setLoading(!1),t.cancelTask()}).catch(function(e){a.alert("danger","There was some error trying to change the ticket status. Please try again after some time.",5e3),t.setLoading(!1),t.cancelTask()}))}),t.setSaveBtnName("Close")}]).controller("ReopenActionCtrl",["$scope","ActionFactory","YgNotify",function(t,e,a){t.setLoading(!1),t.setSaveFn(function(){return t.actionForm.comment.$invalid?void(t.actionForm.comment.$touched=!0):(t.setLoading(!0),void e.reopen(t.ticket.id,t.task.comment).then(function(e){t.ticket.comments=e.data.comments,t.ticket.status=e.data.status,a.alert("success","The status has been changed successfully",5e3),t.setLoading(!1),t.cancelTask()}).catch(function(e){a.alert("danger","There was some error trying to change the ticket status. Please try again after some time.",5e3),t.setLoading(!1),t.cancelTask()}))}),t.setSaveBtnName("Reopen")}]).controller("AwaitingActionCtrl",["$scope","ActionFactory","YgNotify",function(t,e,a){t.setLoading(!1),t.setSaveFn(function(){return t.actionForm.comment.$invalid?void(t.actionForm.comment.$touched=!0):(t.setLoading(!0),void e.awaitingUserResponse(t.ticket.id,t.task.comment).then(function(e){t.ticket.comments=e.data.comments,t.ticket.status=e.data.status,a.alert("success","The status has been changed successfully",5e3),t.setLoading(!1),t.cancelTask()}).catch(function(e){a.alert("danger","There was some error trying to change the ticket status. Please try again after some time.",5e3),t.setLoading(!1),t.cancelTask()}))}),t.setSaveBtnName("Change Status")}]).controller("AcknowledgeActionCtrl",["$scope","ActionFactory","YgNotify",function(t,e,a){t.setLoading(!1),t.setSaveFn(function(){return t.actionForm.comment.$invalid?void(t.actionForm.comment.$touched=!0):(t.setLoading(!0),void e.acknowledgeTicket(t.ticket.id,t.task.comment).then(function(e){t.ticket.comments=e.data.comments,t.ticket.status=e.data.status,a.alert("success","The status has been changed successfully",5e3),t.setLoading(!1),t.cancelTask()}).catch(function(e){a.alert("danger","There was some error trying to change the ticket status. Please try again after some time.",5e3),t.setLoading(!1),t.cancelTask()}))}),t.setSaveBtnName("Acknowledge Ticket")}]);
angular.module("ticketSystem").controller("ButtonGroupCtrl",["$scope","ActionFactory",function(t,o){t.buttongroup={},t.$watch("ticket.status",function(n){n&&o.getAllowedButtons(n).then(function(o){t.buttongroup.showAssign=o.assign,t.buttongroup.showComment=o.comment,t.buttongroup.showchangeStatus=o.changeStatus,t.buttongroup.showReopen=o.reopen,t.buttongroup.showClose=o.close,t.buttongroup.showAcknowledge=o.acknowledge,t.buttongroup.showAwaitingUsersResponse=o.awaitingUserResponse})}),t.buttongroup.comment=function(){o.setTask("comment")},t.buttongroup.assign=function(){o.setTask("assign")},t.buttongroup.changeStatus=function(){o.setTask("changestatus")},t.buttongroup.close=function(){o.setTask("close")},t.buttongroup.reopen=function(){o.setTask("reopen")},t.buttongroup.acknowledge=function(){o.setTask("acknowledge")},t.buttongroup.awaitingusersresponse=function(){o.setTask("awaitingusersresponse")}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJtYWluLm1pbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiLFtcIm5nUm91dGVcIixcInRleHRBbmd1bGFyXCIsXCJ5YW5ndWxhci1ncmlkXCIsXCJ5Zy1tb2RhbFwiLFwibmdGbGFzaFwiLFwidWkucm91dGVyXCIsXCJ5Zy1ub3RpZmljYXRpb25cIl0pLnNlcnZpY2UoXCJhdXRoSW50ZXJjZXB0b3JcIixbXCIkcVwiLFwiJGluamVjdG9yXCIsXCJBdXRoZW50aWNhdGlvblwiLGZ1bmN0aW9uKHQsZSxyKXtyZXR1cm57cmVzcG9uc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIDQwMT09PWUuc3RhdHVzJiZyLmNsZWFyVXNlcigpLGV8fHQud2hlbihlKX0scmVzcG9uc2VFcnJvcjpmdW5jdGlvbihsKXtyZXR1cm4gNDAxPT09bC5zdGF0dXMmJihyLmNsZWFyVXNlcigpLGUuZ2V0KFwiJHN0YXRlXCIpLmdvKFwidXNlcnMtbG9naW4ubG9naW5cIikpLDQwMz09PWwuc3RhdHVzJiZlLmdldChcIiRzdGF0ZVwiKS5nbyhcInRpY2tldC5teS10aWNrZXRzXCIpLHQucmVqZWN0KGwpfX19XSkuY29uZmlnKFtcIiRodHRwUHJvdmlkZXJcIixcIiRzdGF0ZVByb3ZpZGVyXCIsXCIkdXJsUm91dGVyUHJvdmlkZXJcIixmdW5jdGlvbih0LGUscil7ci5vdGhlcndpc2UoXCIvdGlja2V0L215LXRpY2tldHNcIiksZS5zdGF0ZShcInRpY2tldFwiLHt1cmw6XCIvdGlja2V0XCIsY29udHJvbGxlcjpcIlRpY2tldHNDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdGlja2V0cy90aWNrZXRzLmh0bWxcIn0pLnN0YXRlKFwidGlja2V0Lm15LXRpY2tldHNcIix7dXJsOlwiL215LXRpY2tldHNcIixjb250cm9sbGVyOlwiVGlja2V0c0N0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy90aWNrZXRzL3ZpZXctbXktdGlja2V0cy5odG1sXCJ9KS5zdGF0ZShcInRpY2tldC50by1tZS10aWNrZXRzXCIse3VybDpcIi90b21lLXRpY2tldHNcIixjb250cm9sbGVyOlwiVGlja2V0c0N0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy90aWNrZXRzL3ZpZXctdG9tZS10aWNrZXRzLmh0bWxcIn0pLnN0YXRlKFwidGlja2V0LmFsbC10aWNrZXRzXCIse3VybDpcIi9hbGwtdGlja2V0c1wiLGNvbnRyb2xsZXI6XCJUaWNrZXRzQ3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3RpY2tldHMvdmlldy1hbGwtdGlja2V0cy5odG1sXCJ9KS5zdGF0ZShcInRpY2tldC1uZXdcIix7dXJsOlwiL3RpY2tldC9uZXdcIixjb250cm9sbGVyOlwiTmV3VGlja2V0Q3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3RpY2tldHMvbmV3LXRpY2tldC5odG1sXCJ9KS5zdGF0ZShcInRpY2tldC12aWV3XCIse3VybDpcIi90aWNrZXQvdmlldy86aWRcIixjb250cm9sbGVyOlwiVmlld1RpY2tldEN0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy90aWNrZXRzL3ZpZXctdGlja2V0Lmh0bWxcIn0pLnN0YXRlKFwidGlja2V0LWVkaXRcIix7dXJsOlwiL3RpY2tldC9lZGl0LzppZFwiLGNvbnRyb2xsZXI6XCJFZGl0VGlja2V0Q3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3RpY2tldHMvZWRpdC10aWNrZXQuaHRtbFwifSkuc3RhdGUoXCJ1c2Vycy1sb2dpblwiLHt1cmw6XCIvdXNlcnNcIixjb250cm9sbGVyOlwiTWFpbkxvZ2luQ3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3VzZXJzL3VzZXItbG9naW4uaHRtbFwifSkuc3RhdGUoXCJ1c2Vycy1sb2dpbi5sb2dpblwiLHt1cmw6XCIvbG9naW5cIixjb250cm9sbGVyOlwiTG9naW5DdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdXNlcnMvbG9naW4uaHRtbFwifSkuc3RhdGUoXCJ1c2Vycy1sb2dpbi5yZWdpc3RlclwiLHt1cmw6XCIvcmVnaXN0ZXJcIixjb250cm9sbGVyOlwiUmVnaXN0ZXJDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdXNlcnMvcmVnaXN0ZXIuaHRtbFwifSkuc3RhdGUoXCJ1c2Vycy1wcm9maWxlXCIse3VybDpcIi91c2Vycy9wcm9maWxlXCIsY29udHJvbGxlcjpcIlByb2ZpbGVDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdXNlcnMvcHJvZmlsZS5odG1sXCJ9KS5zdGF0ZShcInVzZXJzLXJlZ2lzdGVyXCIse3VybDpcIi91c2Vycy9yZWdpc3RlclwiLGNvbnRyb2xsZXI6XCJSZWdpc3RlckN0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy91c2Vycy9yZWdpc3Rlci5odG1sXCJ9KS5zdGF0ZShcImFkbWluLXVzZXItbWFuYWdlbWVudFwiLHt1cmw6XCIvYWRtaW4vdXNlci1tYW5hZ2VtZW50XCIsY29udHJvbGxlcjpcIk1hbmFnZVVzZXJzQ3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL2FkbWluL21hbmFnZS11c2Vycy5odG1sXCJ9KS5zdGF0ZShcImF1dGgtZ29vZ2xlXCIse3VybDpcIi9hdXRoL2dvb2dsZS86aWQvOmVtYWlsXCIsY29udHJvbGxlcjpcIlNldFVzZXJDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdXNlcnMvc2V0LXVzZXJuYW1lLmh0bWxcIn0pLnN0YXRlKFwiYWRtaW4tZWRpdFwiLHt1cmw6XCIvYWRtaW4vZWRpdC86dXNlcm5hbWVcIixjb250cm9sbGVyOlwiTWFuYWdlVXNlcnNDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvYWRtaW4vZWRpdC11c2VyLmh0bWxcIn0pLnN0YXRlKFwiYWRtaW4tcmVzZXQtcGFzc3dvcmRcIix7dXJsOlwiL2FkbWluL3Jlc2V0LXBhc3N3b3JkLzppZFwiLGNvbnRyb2xsZXI6XCJNYW5hZ2VVc2Vyc0N0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy9hZG1pbi9yZXNldC1wYXNzd29yZC5odG1sXCJ9KSx0LmludGVyY2VwdG9ycy5wdXNoKFwiYXV0aEludGVyY2VwdG9yXCIpfV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuZGlyZWN0aXZlKFwieWdUb2dnbGVcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVcIixzY29wZTp7dG9nZ2xlOlwiPVwifSxyZXBsYWNlOiEwLHRlbXBsYXRlOic8ZGl2IG5nLXNob3c9XCJsb2FkZWRcIiBjbGFzcz1cInRvZ2dsZS1idXR0b25cIj48ZGl2IGNsYXNzPVwidG9nZ2xlXCI+PC9kaXY+PC9kaXY+JyxsaW5rOmZ1bmN0aW9uKGUsdCxsKXt2YXIgbz1mdW5jdGlvbihsKXtlLmxvYWRlZD0hMCxsP3QuYWRkQ2xhc3MoXCJpcy1hY3RpdmVcIik6dC5yZW1vdmVDbGFzcyhcImlzLWFjdGl2ZVwiKX07ZS4kd2F0Y2goXCJ0b2dnbGUudmFsdWVcIixmdW5jdGlvbihlLHQpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBlJiZvKGUpfSksdC5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXtlLnRvZ2dsZS52YWx1ZT0hZS50b2dnbGUudmFsdWUsbyhlLnRvZ2dsZS52YWx1ZSl9KX19fSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5mYWN0b3J5KFwiVGlja2V0RmFjdG9yeVwiLFtcIiRodHRwXCIsZnVuY3Rpb24odCl7dmFyIGU9e307cmV0dXJuIGUuY3JlYXRlTmV3VGlja2V0PWZ1bmN0aW9uKGUpe3JldHVybiB0LnBvc3QoXCJ0aWNrZXRzL25ld1wiLGUpfSxlLnVwZGF0ZVRpY2tldD1mdW5jdGlvbihlLGkpe3JldHVybiB0LnB1dChcInRpY2tldHMvXCIrZSxpKX0sZS5nZXRUaWNrZXRCeUlkPWZ1bmN0aW9uKGUpe3JldHVybiB0LmdldChcInRpY2tldHMvXCIrZSl9LGUuZ2V0SW5pdGlhbFRpY2tldERhdGE9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuZ2V0KFwidGlja2V0cy9lZGl0LXRpY2tldC9pbml0aWFsLWxvYWQvXCIrZSl9LGV9XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5mYWN0b3J5KFwiQ29tbW9uRmFjdG9yeVwiLFtcIiRodHRwXCIsZnVuY3Rpb24odCl7dmFyIGU9e307cmV0dXJuIGUuZ2V0SW5pdGlhbFN0YXRpY0RhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdC5nZXQoXCJ0aWNrZXRzL3N0YXRpYy1kYXRhXCIpfSxlfV0pLmZpbHRlcihcInJldmVyc2VcIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbih0KXtpZih0KXJldHVybiB0LnNsaWNlKCkucmV2ZXJzZSgpfX0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuZmFjdG9yeShcIlVzZXJGYWN0b3J5XCIsW1wiJGh0dHBcIixmdW5jdGlvbihlKXt2YXIgdD17fTtyZXR1cm4gdC5sb2dpbj1mdW5jdGlvbih0LHIsbil7cmV0dXJuIGUucG9zdChcImFjY291bnRzL2xvZ2luXCIse3VzZXJuYW1lOnQscGFzc3dvcmQ6cixyZW1lbWJlcjpufSl9LHQubG9nb3V0PWZ1bmN0aW9uKCl7cmV0dXJuIGUuZ2V0KFwiYWNjb3VudHMvbG9nb3V0XCIpfSx0LnJlZ2lzdGVyVXNlcj1mdW5jdGlvbih0KXtyZXR1cm4gZS5wb3N0KFwiYWNjb3VudHMvcmVnaXN0ZXJcIix0KX0sdC5nZXRVc2VyQnlVc2VybmFtZT1mdW5jdGlvbih0KXtyZXR1cm4gZS5nZXQoXCJ1c2Vycy9wcm9maWxlL1wiK3QpfSx0LnVwZGF0ZVByb2ZpbGU9ZnVuY3Rpb24odCl7cmV0dXJuIGUucG9zdChcInVzZXJzL3Byb2ZpbGUvXCIrdC51c2VybmFtZSx0KX0sdC5zZXRVc2VybmFtZT1mdW5jdGlvbih0KXtyZXR1cm4gZS5wb3N0KFwiYWNjb3VudHMvc2V0LXVzZXJuYW1lXCIsdCl9LHQuZ2V0QWxsVXNlckRldGFpbHM9ZnVuY3Rpb24oKXtyZXR1cm4gZS5nZXQoXCJhZG1pbi91c2Vycy1kZXRhaWxzXCIpfSx0LmdldFVzZXJEZXRhaWxzPWZ1bmN0aW9uKHQpe3JldHVybiBlLmdldChcImFkbWluL3VzZXItZGV0YWlscy9cIit0KX0sdC51cGRhdGVVc2VyRGV0YWlscz1mdW5jdGlvbih0LHIpe3JldHVybiBlLnBvc3QoXCJhZG1pbi91cGRhdGUtdXNlci9cIit0LHIpfSx0LnJlc2V0UGFzc3dvcmQ9ZnVuY3Rpb24odCxyKXtyZXR1cm4gZS5wb3N0KFwiYWRtaW4vcmVzZXQtcGFzc3dvcmQvXCIrdCxyKX0sdH1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmZhY3RvcnkoXCJBdXRoZW50aWNhdGlvblwiLGZ1bmN0aW9uKCl7dmFyIHQ9e307cmV0dXJuIHQuZ2V0SXNBdXRoZW50aWNhdGVkPWZ1bmN0aW9uKCl7aWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0aWNrZXRTeXN0ZW1Vc2VyXCIpKXJldHVybiEwfSx0LnNldFVzZXI9ZnVuY3Rpb24odCl7bG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0aWNrZXRTeXN0ZW1Vc2VyXCIsSlNPTi5zdHJpbmdpZnkodCkpfSx0LmNsZWFyVXNlcj1mdW5jdGlvbigpe2xvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwidGlja2V0U3lzdGVtVXNlclwiKX0sdC5nZXRVc2VyPWZ1bmN0aW9uKCl7cmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0aWNrZXRTeXN0ZW1Vc2VyXCIpKX0sdH0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuZmFjdG9yeShcIkhlbHBlckZhY3RvcnlcIixbXCJBdXRoZW50aWNhdGlvblwiLGZ1bmN0aW9uKHIpe3ZhciBlPXt9O3JldHVybiBlLmNyZWF0ZUVycm9yTWVzc2FnZT1mdW5jdGlvbihyKXtmb3IodmFyIGU9W10sdD0wO3Q8ci5sZW5ndGg7dCsrKWUucHVzaChyW3RdLmVycm9yKTtyZXR1cm4gZX0sZS5zZXRBbGxVc2Vycz1mdW5jdGlvbihyKXt0aGlzLnVzZXJzPXJ9LGUuZ2V0QWxsVXNlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51c2Vyc30sZS5nZXRBbGxVc2Vyc0J1dFNlbGY9ZnVuY3Rpb24oZSl7dmFyIHQ9ci5nZXRVc2VyKCkudXNlcm5hbWU7cmV0dXJuIGUuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiByLnVzZXJuYW1lIT09dH0pfSxlLnJlbW92ZVVzZXJGcm9tVXNlcnM9ZnVuY3Rpb24ocixlKXtyZXR1cm4gci5maWx0ZXIoZnVuY3Rpb24ocil7dmFyIHQ9ZS5pbmRleE9mKHIudXNlcm5hbWUpPT09LTE7cmV0dXJuIHR9KX0sZS5pc0N1cnJlbnRVc2VyQWRtaW49ZnVuY3Rpb24oKXt2YXIgZT1yLmdldFVzZXIoKTtyZXR1cm4gZS5yb2xlLmluZGV4T2YoXCJBZG1pblwiKT4tMX0sZS5pc0N1cnJlbnRVc2VyU3VwcG9ydD1mdW5jdGlvbigpe3ZhciBlPXIuZ2V0VXNlcigpO3JldHVybiBlLnJvbGUuaW5kZXhPZihcIlN1cHBvcnRcIik+LTF9LGV9XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5mYWN0b3J5KFwiQWN0aW9uRmFjdG9yeVwiLFtcIiRodHRwXCIsXCIkcVwiLGZ1bmN0aW9uKHQsZSl7dmFyIG4sbz17fTtyZXR1cm4gby5zZXRUYXNrPWZ1bmN0aW9uKHQpe249dH0sby5nZXRUYXNrPWZ1bmN0aW9uKCl7cmV0dXJuIG59LG8uZ2V0QXNzaWduZWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHQuZ2V0KFwic3RhdGljL2FsbC11c2Vyc1wiKX0sby5nZXRBbGxvd2VkU3RhdHVzPWZ1bmN0aW9uKGUpe3JldHVybiB0LmdldChcInN0YXRpYy9hbGxvd2VkLXN0YXR1cy9cIitlKX0sby5nZXRBbGxvd2VkQnV0dG9ucz1mdW5jdGlvbihuKXt2YXIgbz1lLmRlZmVyKCk7cmV0dXJuIHQuZ2V0KFwic3RhdGljL2FjdGlvbi1idXR0b25zL1wiK24pLnRoZW4oZnVuY3Rpb24odCl7dmFyIGU9e307ZS5hc3NpZ249dC5kYXRhLmFjdGlvbkJ1dHRvbnMuYXNzaWduLGUuY29tbWVudD10LmRhdGEuYWN0aW9uQnV0dG9ucy5jb21tZW50LGUuY2hhbmdlU3RhdHVzPXQuZGF0YS5hY3Rpb25CdXR0b25zLmNoYW5nZVN0YXR1cyxlLnJlb3Blbj10LmRhdGEuYWN0aW9uQnV0dG9ucy5yZW9wZW4sZS5jbG9zZT10LmRhdGEuYWN0aW9uQnV0dG9ucy5jbG9zZSxlLmFja25vd2xlZGdlPXQuZGF0YS5hY3Rpb25CdXR0b25zLmFja25vd2xlZGdlLGUuYXdhaXRpbmdVc2VyUmVzcG9uc2U9dC5kYXRhLmFjdGlvbkJ1dHRvbnMuYXdhaXRpbmdVc2VyUmVzcG9uc2Usby5yZXNvbHZlKGUpfSkuY2F0Y2goZnVuY3Rpb24odCl7by5yZWplY3QodCl9KSxvLnByb21pc2V9LG8uYXNzaWduPWZ1bmN0aW9uKGUsbixvKXtyZXR1cm4gdC5wb3N0KFwidGlja2V0cy9hc3NpZ24vXCIrZSx7YXNzaWduZWU6bixjb21tZW50Om99KX0sby5jaGFuZ2VTdGF0dXM9ZnVuY3Rpb24oZSxuLG8pe3JldHVybiB0LnBvc3QoXCJ0aWNrZXRzL2NoYW5nZS1zdGF0dXMvXCIrZSx7c3RhdHVzOm4sY29tbWVudDpvfSl9LG8uYXdhaXRpbmdVc2VyUmVzcG9uc2U9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5wb3N0KFwidGlja2V0cy9hd2FpdGluZy11c2VyLXJlc3BvbnNlL1wiK2Use2NvbW1lbnQ6bn0pfSxvLnJlb3Blbj1mdW5jdGlvbihlLG4pe3JldHVybiB0LnBvc3QoXCJ0aWNrZXRzL3JlLW9wZW4vXCIrZSx7Y29tbWVudDpufSl9LG8uY2xvc2U9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5wb3N0KFwidGlja2V0cy9jbG9zZS9cIitlLHtjb21tZW50Om59KX0sby5hZGRDb21tZW50PWZ1bmN0aW9uKGUsbil7cmV0dXJuIHQucG9zdChcInRpY2tldHMvYWRkQ29tbWVudC9cIitlLHtjb21tZW50Om59KX0sby5kZWxldGVDb21tZW50PWZ1bmN0aW9uKGUsbil7cmV0dXJuIHQuZGVsZXRlKFwidGlja2V0cy9kZWxldGVDb21tZW50L1wiK2UuX2lkK1wiP2NvbW1lbnRJZD1cIituLl9pZCl9LG8uYWNrbm93bGVkZ2VUaWNrZXQ9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5wb3N0KFwidGlja2V0cy9hY2tub3dsZWRnZS9cIitlLHtjb21tZW50Om59KX0sb31dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmNvbnRyb2xsZXIoXCJNYWluQ3RybFwiLFtcIiRzY29wZVwiLFwiJHN0YXRlXCIsXCJBdXRoZW50aWNhdGlvblwiLFwiVXNlckZhY3RvcnlcIixcIiR3aW5kb3dcIixcIllnTm90aWZ5XCIsZnVuY3Rpb24oZSxpLHQsbixvLHIpe3ZhciBzPWZ1bmN0aW9uKCl7dmFyIGk9dC5nZXRVc2VyKCk7aS5yb2xlLmluZGV4T2YoXCJBZG1pblwiKT4tMT9lLmlzQWRtaW49ITA6ZS5pc0FkbWluPSExLGUuaXNSZWd1bGFyVXNlcj0hMCwodC5nZXRVc2VyKCkucm9sZS5pbmRleE9mKFwiU3VwcG9ydFwiKT4tMXx8dC5nZXRVc2VyKCkucm9sZS5pbmRleE9mKFwiQWRtaW5cIik+LTEpJiYoZS5pc1JlZ3VsYXJVc2VyPSExKX07ZS5pbml0PWZ1bmN0aW9uKCl7dmFyIGk9dC5nZXRVc2VyKCk7aSYmKGkucm9sZS5pbmRleE9mKFwiQWRtaW5cIik+LTE/ZS5pc0FkbWluPSEwOmUuaXNBZG1pbj0hMSl9LGUubG9hZGluZz0hMSxlLnNldExvYWRpbmc9ZnVuY3Rpb24oaSl7ZS5sb2FkaW5nPWl9LGUuZ2V0VXNlcj10LmdldFVzZXIsZS5pc0F1dGhlbnRpY2F0ZWQ9dC5nZXRJc0F1dGhlbnRpY2F0ZWQsZS5sb2dvdXQ9ZnVuY3Rpb24oKXtuLmxvZ291dCgpLnRoZW4oZnVuY3Rpb24oKXt0LmNsZWFyVXNlcigpLGkuZ28oXCJ1c2Vycy1sb2dpbi5sb2dpblwiKX0pfSxlLiRvbihcInN1Y2Nlc3NmdWwtbG9naW5cIixzKSxlLmdldFByb2ZpbGU9ZnVuY3Rpb24oKXtpLmdvKFwidXNlcnMtcHJvZmlsZVwiKX0sby5hcHA9e30sby5hcHAuYXV0aD1mdW5jdGlvbihlLG4pe1wiXCIhPT1lP3IuYWxlcnQoXCJkYW5nZXJcIixlLnRvU3RyaW5nKCksNWUzKTpuLnVzZXJuYW1lJiZcIlwiIT09bi51c2VybmFtZT9uJiYodC5zZXRVc2VyKG4pLHMoKSxpLmdvKFwidGlja2V0Lm15LXRpY2tldHNcIikpOmkuZ28oXCJhdXRoLWdvb2dsZVwiLHtpZDpuLl9pZC50b1N0cmluZygpLGVtYWlsOm4uZW1haWx9KX19XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiTWFuYWdlVXNlcnNDdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVcIixcIiRzdGF0ZVBhcmFtc1wiLFwiQXV0aGVudGljYXRpb25cIixcIkhlbHBlckZhY3RvcnlcIixcIlVzZXJGYWN0b3J5XCIsXCJZZ05vdGlmeVwiLGZ1bmN0aW9uKGUscyxhLHIsdCxpLG4pe3ZhciB1PWZ1bmN0aW9uKCl7cmV0dXJuXCJcIn0sYz1mdW5jdGlvbihlKXtyZXR1cm4gZT09PSEwP1wiZmEgZmEtY2hlY2tcIjpcImZhIGZhLXJlbW92ZVwifSxvPWZ1bmN0aW9uKCl7cmV0dXJuXCJcIn0sbD1mdW5jdGlvbihlKXtyZXR1cm4gZS5pbmRleE9mKFwiQWRtaW5cIik+LTE/XCJmYSBmYS1jaGVja1wiOlwiZmEgZmEtcmVtb3ZlXCJ9O2UuY29uZmlnPXt9LGUuY29uZmlnLnVybD1cIi9hZG1pbi91c2Vycy1kZXRhaWxzXCIsZS5jb25maWcuY29sdW1ucz1bXSxlLmNvbmZpZy5jb2x1bW5zLnB1c2goe2tleTpcInVzZXJuYW1lXCIsbmFtZTpcIlVzZXJuYW1lXCIsY3NzQ2xhc3M6XCJjb2wtbWQtNlwifSksZS5jb25maWcuY29sdW1ucy5wdXNoKHtrZXk6XCJpc0FjdGl2ZVwiLG5hbWU6XCJJcyBBY3RpdmVcIixjc3NDbGFzczpcImNvbC1tZC0zXCIscmVuZGVyOnUscmVuZGVyQ2xhc3M6Y30pLGUuY29uZmlnLmNvbHVtbnMucHVzaCh7a2V5Olwicm9sZVwiLG5hbWU6XCJJcyBBZG1pblwiLGNzc0NsYXNzOlwiY29sLW1kLTNcIixyZW5kZXI6byxyZW5kZXJDbGFzczpsfSksZS5jb25maWcuc29ydFF1ZXJ5c3RyaW5nUGFyYW09XCJzb3J0XCIsZS5jb25maWcub3JkZXJRdWVyeXN0cmluZ1BhcmFtPVwib3JkZXJcIixlLmNvbmZpZy5wYWdlUXVlcnlzdHJpbmdQYXJhbT1cInBhZ2VcIixlLmNvbmZpZy5zaXplUXVlcnlzdHJpbmdQYXJhbT1cInNpemVcIixlLmNvbmZpZy5vYmplY3ROYW1lPVwidXNlcnNcIixlLmNvbmZpZy5vblJvd0NsaWNrPWZ1bmN0aW9uKGUpe3MuZ28oXCJhZG1pbi1lZGl0XCIse3VzZXJuYW1lOmUudXNlcm5hbWV9KX0sZS5pc0FjdGl2ZT17fSxlLmlzQWRtaW49e30sZS51c2VyRGV0YWlscz17fSxlLnVzZXJEZXRhaWxzLmdldFVzZXJEZXRhaWxzPWZ1bmN0aW9uKCl7dmFyIHM9YS51c2VybmFtZTtpLmdldFVzZXJEZXRhaWxzKHMpLnRoZW4oZnVuY3Rpb24ocyl7ZS51c2VyRGV0YWlscy51c2VybmFtZT1zLmRhdGEudXNlci51c2VybmFtZSxlLnVzZXJEZXRhaWxzLmZpcnN0bmFtZT1zLmRhdGEudXNlci5maXJzdG5hbWUsZS51c2VyRGV0YWlscy5sYXN0bmFtZT1zLmRhdGEudXNlci5sYXN0bmFtZSxlLnVzZXJEZXRhaWxzLmlkPXMuZGF0YS51c2VyLl9pZDt2YXIgYT1zLmRhdGEudXNlci5yb2xlO2EuaW5kZXhPZihcIkFkbWluXCIpPi0xP2UudXNlckRldGFpbHMuaXNBZG1pbj0hMDplLnVzZXJEZXRhaWxzLmlzQWRtaW49ITEsZS51c2VyRGV0YWlscy5pc0FjdGl2ZT1zLmRhdGEudXNlci5pc0FjdGl2ZSxlLnVzZXJEZXRhaWxzLmVtYWlsPXMuZGF0YS51c2VyLmVtYWlsLGUuaXNBY3RpdmUua2V5PVwiaXNBY3RpdmVcIixlLmlzQWN0aXZlLnZhbHVlPWUudXNlckRldGFpbHMuaXNBY3RpdmUsZS5pc0FkbWluLmtleT1cImlzQWRtaW5cIixlLmlzQWRtaW4udmFsdWU9ZS51c2VyRGV0YWlscy5pc0FkbWlufSkuY2F0Y2goZnVuY3Rpb24oZSl7bi5hbGVydChcImRhbmdlclwiLFwiVGhlcmUgd2FzIHNvbWUgZXJyb3IgdHJ5aW5nIHRvIGZldGNoIHVzZXIgZGV0YWlscy4gUGxlYXNlIHRyeSBhZ2FpbiBhZnRlciBzb21lIHRpbWUuXCIsNWUzKX0pfSxlLnVzZXJEZXRhaWxzLnVwZGF0ZT1mdW5jdGlvbigpe2UudXNlckRldGFpbHMuaXNBZG1pbj1lLmlzQWRtaW4udmFsdWUsZS51c2VyRGV0YWlscy5pc0FjdGl2ZT1lLmlzQWN0aXZlLnZhbHVlLGkudXBkYXRlVXNlckRldGFpbHMoZS51c2VyRGV0YWlscy51c2VybmFtZSxlLnVzZXJEZXRhaWxzKS50aGVuKGZ1bmN0aW9uKGUpe24uYWxlcnQoXCJzdWNjZXNzXCIsXCJVc2VyIGRldGFpbHMgdXBkYXRlZCBzdWNjZXNzZnVsbHlcIiw1ZTMpfSkuY2F0Y2goZnVuY3Rpb24oZSl7bi5hbGVydChcImRhbmdlclwiLFwiVGhlcmUgd2FzIHNvbWUgZXJyb3IgdHJ5aW5nIHRvIHVwZGF0ZSB1c2VyIGRldGFpbHMuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyl9KX0sZS5yZXNldFBhc3N3b3JkPXt9LGUucmVzZXRQYXNzd29yZC5yZXNldD1mdW5jdGlvbigpe3ZhciByPWEuaWQ7aS5yZXNldFBhc3N3b3JkKHIsZS5yZXNldFBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uKGUpe2lmKGUuZGF0YS5lcnJvcnMpe3ZhciBhPXQuY3JlYXRlRXJyb3JNZXNzYWdlKGUuZGF0YS5lcnJvcnMpO2EuZm9yRWFjaChmdW5jdGlvbihlKXtuLmFsZXJ0KFwiZGFuZ2VyXCIsZSw1ZTMpfSl9ZWxzZSBuLmFsZXJ0KFwic3VjY2Vzc1wiLFwiUGFzc3dvcmQgaGFzIGJlZW4gcmVzZXQgc3VjY2Vzc2Z1bGx5XCIsNWUzKSxzLmdvKFwiYWRtaW4tdXNlci1tYW5hZ2VtZW50XCIpfSkuY2F0Y2goZnVuY3Rpb24oZSl7bi5hbGVydChcImRhbmdlclwiLFwiVGhlIHJlcXVlc3QgY291bGQgbm90IGJlbiBtYWRlIHN1Y2Nlc3NmdWxseS4gUGxlYXNlIHRyeSBsYXRlclwiLDVlMyl9KX19XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiRWRpdFRpY2tldEN0cmxcIixbXCIkc2NvcGVcIixcIiRzdGF0ZVBhcmFtc1wiLFwiJHN0YXRlXCIsXCJUaWNrZXRGYWN0b3J5XCIsXCJZZ05vdGlmeVwiLFwiSGVscGVyRmFjdG9yeVwiLFwiQXV0aGVudGljYXRpb25cIixmdW5jdGlvbih0LGUsYSxyLGksYyxuKXt0LnRvb2xiYXJDb25maWc9W1tcImgxXCIsXCJwXCIsXCJwcmVcIixcInF1b3RlXCJdLFtcImJvbGRcIixcIml0YWxpY3NcIixcInVuZGVybGluZVwiLFwic3RyaWtlVGhyb3VnaFwiLFwidWxcIixcIm9sXCIsXCJyZWRvXCIsXCJ1bmRvXCIsXCJjbGVhclwiXSxbXSxbXCJpbnNlcnRMaW5rXCJdXSx0LmNhbmNlbD1mdW5jdGlvbigpe2EuZ28oXCJ0aWNrZXQtdmlld1wiLHtpZDp0LnRpY2tldC5pZH0pfSx0LnJlbmRlckRhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBEYXRlKERhdGUucGFyc2UodCkpLnRvTG9jYWxlRGF0ZVN0cmluZygpfSxyLmdldFRpY2tldEJ5SWQoZS5pZCkudGhlbihmdW5jdGlvbihlKXtpZihlLmRhdGEuZXJyb3JzKXthLmdvKFwidGlja2V0Lm15LXRpY2tldHNcIik7dmFyIG89Yy5jcmVhdGVFcnJvck1lc3NhZ2UoZS5kYXRhLmVycm9ycyk7by5mb3JFYWNoKGZ1bmN0aW9uKHQpe2kuYWxlcnQoXCJkYW5nZXJcIix0LDVlMyl9KX1lbHNlIHQudGlja2V0PWUuZGF0YSx0LnRpY2tldC5jdXJyZW50VXNlcj1uLmdldFVzZXIoKS51c2VybmFtZSxyLmdldEluaXRpYWxUaWNrZXREYXRhKHQudGlja2V0LnN0YXR1cykudGhlbihmdW5jdGlvbihlKXt0LnByaW9yaXRpZXM9ZS5kYXRhLnByaW9yaXRpZXMudmFsdWVzLHQudHlwZXM9ZS5kYXRhLnR5cGVzLnZhbHVlcyx0LnVzZXJzPWUuZGF0YS51c2VycyxjLnNldEFsbFVzZXJzKHQudXNlcnMpLHQuc3RhdHVzZXM9ZS5kYXRhLnN0YXR1c2VzfSkuY2F0Y2goZnVuY3Rpb24odCl7Y29uc29sZS5sb2codCksaS5hbGVydChcImRhbmdlclwiLFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIGRldGNoIHRoZSBzdGF0aWMgZGF0YS5cIil9KX0pLmNhdGNoKGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKHQpLGkuYWxlcnQoXCJkYW5nZXJcIixcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byBnZXQgdGlja2V0IGRldGFpbHMuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCIsNWUzKX0pLHQudXBkYXRlPWZ1bmN0aW9uKCl7ci51cGRhdGVUaWNrZXQodC50aWNrZXQuX2lkLHQudGlja2V0KS50aGVuKGZ1bmN0aW9uKGUpe3QudGlja2V0PWUuZGF0YSxpLmFsZXJ0KFwic3VjY2Vzc1wiLFwiVGlja2V0IHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5LlwiLDVlMyksYS5nbyhcInRpY2tldC12aWV3XCIse2lkOmUuZGF0YS5pZH0pfSkuY2F0Y2goZnVuY3Rpb24odCl7Y29uc29sZS5sb2codCksaS5hbGVydChcImRhbmdlclwiLFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIHVwZGF0ZSB0aWNrZXQgZGV0YWlscy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIiw1ZTMpfSl9fV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIk5ld1RpY2tldEN0cmxcIixbXCIkc2NvcGVcIixcIiRzdGF0ZVwiLFwiVGlja2V0RmFjdG9yeVwiLFwiWWdOb3RpZnlcIixcIkNvbW1vbkZhY3RvcnlcIixcIkhlbHBlckZhY3RvcnlcIixmdW5jdGlvbihlLHQsaSxyLG4sbyl7bi5nZXRJbml0aWFsU3RhdGljRGF0YSgpLnRoZW4oZnVuY3Rpb24odCl7ZS5uZXdUaWNrZXQudHlwZXM9dC5kYXRhLnR5cGVzLnZhbHVlcyxlLm5ld1RpY2tldC50eXBlPWUubmV3VGlja2V0LnR5cGVzWzBdLnZhbHVlfSksZS5uZXdUaWNrZXQ9e30sZS50b29sYmFyQ29uZmlnPVtbXCJoMVwiLFwicFwiLFwicHJlXCIsXCJxdW90ZVwiXSxbXCJib2xkXCIsXCJpdGFsaWNzXCIsXCJ1bmRlcmxpbmVcIixcInN0cmlrZVRocm91Z2hcIixcInVsXCIsXCJvbFwiLFwicmVkb1wiLFwidW5kb1wiLFwiY2xlYXJcIl0sW10sW1wiaW5zZXJ0TGlua1wiXV0sZS5zYXZlPWZ1bmN0aW9uKCl7cmV0dXJuIGUubmV3VGlja2V0Rm9ybS4kaW52YWxpZD8oZS5uZXdUaWNrZXRGb3JtLnRpdGxlLiR0b3VjaGVkPSEwLHZvaWQoZS5uZXdUaWNrZXRGb3JtLmRlc2NyaXB0aW9uLiR0b3VjaGVkPSEwKSk6dm9pZCBpLmNyZWF0ZU5ld1RpY2tldCh7dGl0bGU6ZS5uZXdUaWNrZXQudGl0bGUsZGVzY3JpcHRpb246ZS5uZXdUaWNrZXQuZGVzY3JpcHRpb24sdHlwZTplLm5ld1RpY2tldC50eXBlfSkudGhlbihmdW5jdGlvbihlKXtpZihlLmRhdGEuZXJyb3JzKXt2YXIgaT1vLmNyZWF0ZUVycm9yTWVzc2FnZShlLmRhdGEuZXJyb3JzKTtpLmZvckVhY2goZnVuY3Rpb24oZSl7ci5hbGVydChcImRhbmdlclwiLGUsNWUzKX0pfWVsc2UgdC5nbyhcInRpY2tldC12aWV3XCIse2lkOmUuZGF0YS5pZH0pfSxmdW5jdGlvbihlKXtyLmFsZXJ0KFwiZGFuZ2VyXCIsXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB0cnlpbmcgdG8gY3JlYXRlIG5ldyB0aWNrZXQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCIsNWUzKSxjb25zb2xlLmxvZyhlKX0pfX1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmNvbnRyb2xsZXIoXCJUYXNrQ3RybFwiLFtcIiRzY29wZVwiLFwiVGFza0ZhY3RvcnlcIixmdW5jdGlvbihhLHQpe2NvbnNvbGUubG9nKHQpLGEuZ2V0VGFzaz10LmdldFRhc2ssYS50YXNrPXt9LGEuY29tbWVudFBhcnRpYWw9XCJ0ZW1wbGF0ZXMvcGFydGlhbHMvY29tbWVudHMtcGFydGlhbC5odG1sXCIsYS4kd2F0Y2goXCJnZXRUYXNrKClcIixmdW5jdGlvbih0LHMpe3N3aXRjaChjb25zb2xlLmxvZyh0KSxhLnRhc2submFtZT1cInRlbXBsYXRlcy9wYXJ0aWFscy9cIit0K1wiLXBhcnRpYWwuaHRtbFwiLHQpe2Nhc2VcImNvbW1lbnRcIjphLnRhc2suc2hvd1Rhc2tQYW5lbD0hMCxhLnRhc2sudGl0bGU9XCJBZGQgbmV3IGNvbW1lbnRcIixhLnRhc2suc2hvd01haW5QYW5lbD0hMSxhLnRhc2suc2hvd0NvbW1lbnRzUGFuZWw9ITA7YnJlYWs7Y2FzZVwiYXNzaWduXCI6YS50YXNrLnNob3dUYXNrUGFuZWw9ITAsYS50YXNrLnRpdGxlPVwiQXNzaWduIHRpY2tldFwiLGEudGFzay5zaG93TWFpblBhbmVsPSEwLGEudGFzay5zaG93Q29tbWVudHNQYW5lbD0hMH19KX1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmNvbnRyb2xsZXIoXCJUaWNrZXRzQ3RybFwiLFtcIiRzY29wZVwiLFwiJHN0YXRlXCIsXCJhZ1NvcnRGYWN0b3J5XCIsZnVuY3Rpb24oZSx0LG4pe2UuaXNTdXBwb3J0PSExO3ZhciBpPUpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0aWNrZXRTeXN0ZW1Vc2VyXCIpKTtpJiYoaS5yb2xlLmluZGV4T2YoXCJBZG1pblwiKT4tMXx8aS5yb2xlLmluZGV4T2YoXCJTdXBwb3J0XCIpPi0xKSYmKGUuaXNTdXBwb3J0PSEwKTt2YXIgYz1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IERhdGUoRGF0ZS5wYXJzZShlKSkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9LG89ZnVuY3Rpb24oZSl7cmV0dXJuIGU/U3RyaW5nKGUpLnJlcGxhY2UoLzxbXj5dKz4vZ20sXCJcIik6XCJcIn0scz1mdW5jdGlvbihlKXtyZXR1cm4gZT9lOlwiVW5hc3NpZ25lZFwifTtlLmNvbmZpZz17fSxlLmNvbmZpZy5jb2x1bW5zPVtdLGUuY29uZmlnLmNvbHVtbnMucHVzaCh7a2V5OlwiaWRcIixuYW1lOlwiSURcIixjc3NDbGFzczpcImNvbC1tZC0xXCJ9KSxlLmNvbmZpZy5jb2x1bW5zLnB1c2goe2tleTpcInRpdGxlXCIsbmFtZTpcIlRpdGxlXCIsY3NzQ2xhc3M6XCJjb2wtbWQtMlwifSksZS5jb25maWcuY29sdW1ucy5wdXNoKHtrZXk6XCJkZXNjcmlwdGlvblwiLG5hbWU6XCJEZXNjcmlwdGlvblwiLGNzc0NsYXNzOlwiY29sLW1kLTJcIixyZW5kZXI6b30pLGUuY29uZmlnLmNvbHVtbnMucHVzaCh7a2V5OlwidHlwZVwiLG5hbWU6XCJUeXBlXCIsY3NzQ2xhc3M6XCJjb2wtbWQtMVwifSksZS5jb25maWcuY29sdW1ucy5wdXNoKHtrZXk6XCJhc3NpZ25lZVwiLG5hbWU6XCJBc3NpZ25lZVwiLGNzc0NsYXNzOlwiY29sLW1kLTJcIixyZW5kZXI6c30pLGUuY29uZmlnLmNvbHVtbnMucHVzaCh7a2V5OlwiY3JlYXRlZERhdGVcIixuYW1lOlwiQ3JlYXRlZCBEYXRlXCIsY3NzQ2xhc3M6XCJjb2wtbWQtMlwiLHJlbmRlcjpjfSksZS5jb25maWcuY29sdW1ucy5wdXNoKHtrZXk6XCJjcmVhdGVkQnlcIixuYW1lOlwiQ3JlYXRlZCBCeVwiLGNzc0NsYXNzOlwiY29sLW1kLTJcIn0pLGUuY29uZmlnLnNvcnRRdWVyeXN0cmluZ1BhcmFtPVwic29ydFwiLGUuY29uZmlnLm9yZGVyUXVlcnlzdHJpbmdQYXJhbT1cIm9yZGVyXCIsZS5jb25maWcucGFnZVF1ZXJ5c3RyaW5nUGFyYW09XCJwYWdlXCIsZS5jb25maWcuc2l6ZVF1ZXJ5c3RyaW5nUGFyYW09XCJzaXplXCIsZS5hY3RpdmU9XCJcIixlLmFnTG9hZGluZz1uLmdldExvYWRpbmcsZS5jb25maWcub25Sb3dDbGljaz1mdW5jdGlvbihlKXt0LmdvKFwidGlja2V0LXZpZXdcIix7aWQ6ZS5pZH0pfSxlLmNvbmZpZy5vYmplY3ROYW1lPVwidGlja2V0c1wiLGUuaW5pdGlhdGVBbGxUaWNrZXQ9ZnVuY3Rpb24oKXtlLmNvbmZpZy51cmw9XCIvdGlja2V0cy9hbGxcIixlLiRwYXJlbnQuYWN0aXZlPVwiYWxsXCJ9LGUuaW5pdGlhdGVNeVRpY2tldD1mdW5jdGlvbigpe2UuY29uZmlnLnVybD1cIi90aWNrZXRzL215XCIsZS4kcGFyZW50LmFjdGl2ZT1cIm15XCJ9LGUuaW5pdGlhdGVUb01lVGlja2V0PWZ1bmN0aW9uKCl7ZS5jb25maWcudXJsPVwiL3RpY2tldHMvdG8tbWVcIixlLiRwYXJlbnQuYWN0aXZlPVwidG9tZVwifSxlLiR3YXRjaChcImFnTG9hZGluZygpXCIsZnVuY3Rpb24odCxuKXtlLnNldExvYWRpbmcodCl9KX1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmNvbnRyb2xsZXIoXCJWaWV3VGlja2V0Q3RybFwiLFtcIiRzY29wZVwiLFwiJHN0YXRlUGFyYW1zXCIsXCIkc3RhdGVcIixcIlRpY2tldEZhY3RvcnlcIixcIllnTm90aWZ5XCIsXCJBdXRoZW50aWNhdGlvblwiLFwiSGVscGVyRmFjdG9yeVwiLFwiWWdNb2RhbFwiLFwiQWN0aW9uRmFjdG9yeVwiLGZ1bmN0aW9uKGUsdCxyLG4saSxhLGMsbyxzKXtlLnRpY2tldD17fSxlLnJlbmRlckRhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBEYXRlKERhdGUucGFyc2UoZSkpLnRvTG9jYWxlRGF0ZVN0cmluZygpfSxlLmVkaXQ9ZnVuY3Rpb24oKXtyLmdvKFwidGlja2V0LWVkaXRcIix7aWQ6ZS50aWNrZXQuaWR9KX07dmFyIGQ9ZnVuY3Rpb24odCxyKXtyZXR1cm4gZnVuY3Rpb24oKXtlLnNldExvYWRpbmcoITApLHMuZGVsZXRlQ29tbWVudCh0LHIpLnRoZW4oZnVuY3Rpb24odCl7ZS50aWNrZXQuY29tbWVudHM9dC5kYXRhLmNvbW1lbnRzLGkuYWxlcnQoXCJzdWNjZXNzXCIsXCJUaGUgY29tbWVudCB3YXMgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIiw1ZTMpLGUuc2V0TG9hZGluZyghMSl9KS5jYXRjaChmdW5jdGlvbih0KXtpLmFsZXJ0KFwiZGFuZ2VyXCIsXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB0cnlpbmcgdG8gZGVsZXRlIGNvbW1lbnQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCIsNWUzKSxlLnNldExvYWRpbmcoITEpfSl9fTtlLmRlbGV0ZUNvbW1lbnQ9ZnVuY3Rpb24oZSx0KXtvLmNvbmZpcm0oZChlLHQpKSxvLm9wZW4oXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZG8gdGhpcz9cIixcIlRoaXMgd2lsbCBkZWxldGUgdGhlIGNvbW1lbnQgcGVybWFuZW50bHlcIil9LGUuc2V0TG9hZGluZyghMCksbi5nZXRUaWNrZXRCeUlkKHQuaWQpLnRoZW4oZnVuY3Rpb24odCl7aWYodC5kYXRhLmVycm9ycyl7ci5nbyhcInRpY2tldC5teS10aWNrZXRzXCIpO3ZhciBuPWMuY3JlYXRlRXJyb3JNZXNzYWdlKHQuZGF0YS5lcnJvcnMpO24uZm9yRWFjaChmdW5jdGlvbihlKXtpLmFsZXJ0KFwiZGFuZ2VyXCIsZSw1ZTMpfSl9ZWxzZSBlLnRpY2tldD10LmRhdGEsZS50aWNrZXQuYXNzaWduZWU9ZS50aWNrZXQuYXNzaWduZWU/ZS50aWNrZXQuYXNzaWduZWU6XCJVbmFzc2lnbmVkXCIsZS50aWNrZXQuY3JlYXRlZERhdGU9ZS5yZW5kZXJEYXRlKGUudGlja2V0LmNyZWF0ZWREYXRlKSxlLnRpY2tldC5jdXJyZW50VXNlcj1hLmdldFVzZXIoKS51c2VybmFtZSwoZS50aWNrZXQuYXNzaWduZWU9PT1lLnRpY2tldC5jdXJyZW50VXNlcnx8ZS50aWNrZXQuY3JlYXRlZEJ5PT09ZS50aWNrZXQuY3VycmVudFVzZXJ8fGMuaXNDdXJyZW50VXNlckFkbWluKCl8fGMuaXNDdXJyZW50VXNlclN1cHBvcnQoKSkmJihlLnNob3dFZGl0PSEwKTtlLnNldExvYWRpbmcoITEpfSkuY2F0Y2goZnVuY3Rpb24odCl7Y29uc29sZS5sb2codCksaS5hbGVydChcImRhbmdlclwiLFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIGdldCB0aWNrZXQgZGV0YWlscy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIiw1ZTMpLGUuc2V0TG9hZGluZyghMSl9KX1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmNvbnRyb2xsZXIoXCJMb2dpbkN0cmxcIixbXCIkc2NvcGVcIixcIiRzdGF0ZVwiLFwiJHdpbmRvd1wiLFwiVXNlckZhY3RvcnlcIixcIkF1dGhlbnRpY2F0aW9uXCIsZnVuY3Rpb24oZSx0LG8scixuKXtlLmVycm9yPSExLGUubWVzc2FnZT1cIlwiLGUubG9naW49ZnVuY3Rpb24oKXtyLmxvZ2luKGUudXNlcm5hbWUsZS5wYXNzd29yZCxlLnJlbWVtYmVyKS50aGVuKGZ1bmN0aW9uKG8pe28uZGF0YS5pc0F1dGhlbnRpY2F0ZWQ/KG4uc2V0VXNlcihvLmRhdGEudXNlciksZS4kZW1pdChcInN1Y2Nlc3NmdWwtbG9naW5cIiksdC5nbyhcInRpY2tldC5teS10aWNrZXRzXCIpKTooZS5lcnJvcj0hMCxlLm1lc3NhZ2U9by5kYXRhLm1zZyl9KS5jYXRjaChmdW5jdGlvbih0KXtlLmVycm9yPSEwLGUubWVzc2FnZT1cIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byBsb2cgeW91IGluLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyXCJ9KX0sZS5nb29nbGVMb2dpbj1mdW5jdGlvbigpe3ZhciBlPVwiYWNjb3VudHMvYXV0aC9nb29nbGVcIix0PTYwMCxyPTQ1MCxuPSh3aW5kb3cub3V0ZXJIZWlnaHQtcikvMixpPSh3aW5kb3cub3V0ZXJXaWR0aC10KS8yO28ub3BlbihlLFwiZmFjZWJvb2tfbG9naW5cIixcIndpZHRoPVwiK3QrXCIsaGVpZ2h0PVwiK3IrXCIsc2Nyb2xsYmFycz0wLHRvcD1cIituK1wiLGxlZnQ9XCIraSl9fV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIk1haW5Mb2dpbkN0cmxcIixbXCIkcm9vdFNjb3BlXCIsXCIkc2NvcGVcIixcIiRzdGF0ZVwiLGZ1bmN0aW9uKHQsZSxuKXtlLnN0YXRlbmFtZT1uLmN1cnJlbnQubmFtZSx0LiRvbihcIiRzdGF0ZUNoYW5nZVN0YXJ0XCIsZnVuY3Rpb24odCxuLGEsbyxyKXtlLnN0YXRlbmFtZT1uLm5hbWV9KX1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmNvbnRyb2xsZXIoXCJQcm9maWxlQ3RybFwiLFtcIiRzY29wZVwiLFwiJHN0YXRlXCIsXCJBdXRoZW50aWNhdGlvblwiLFwiVXNlckZhY3RvcnlcIixcIkhlbHBlckZhY3RvcnlcIixcIllnTm90aWZ5XCIsZnVuY3Rpb24oZSxhLHIsdCxzLHUpe2UudXNlcj17fSxlLmluaXQ9ZnVuY3Rpb24oKXt0LmdldFVzZXJCeVVzZXJuYW1lKHIuZ2V0VXNlcigpLnVzZXJuYW1lKS50aGVuKGZ1bmN0aW9uKHIpe2lmKHIuZGF0YS5lcnJvcnMpe3ZhciB0PXMuY3JlYXRlRXJyb3JNZXNzYWdlKHIuZGF0YS5lcnJvcnMpO3QuZm9yRWFjaChmdW5jdGlvbihlKXt1LmFsZXJ0KFwiZGFuZ2VyXCIsdCw1ZTMpfSksYS5nbyhcInRpY2tldC5teS10aWNrZXRzXCIpfWVsc2UgZS51c2VyLmZpcnN0bmFtZT1yLmRhdGEudXNlci5maXJzdG5hbWU7ZS51c2VyLmxhc3RuYW1lPXIuZGF0YS51c2VyLmxhc3RuYW1lLGUudXNlci51c2VybmFtZT1yLmRhdGEudXNlci51c2VybmFtZSxlLnVzZXIuZW1haWw9ci5kYXRhLnVzZXIuZW1haWx9KX0sZS51cGRhdGU9ZnVuY3Rpb24oKXt0LnVwZGF0ZVByb2ZpbGUoZS51c2VyKS50aGVuKGZ1bmN0aW9uKHQpe2UudXNlci5maXJzdG5hbWU9dC5kYXRhLnVzZXIuZmlyc3RuYW1lLGUudXNlci5sYXN0bmFtZT10LmRhdGEudXNlci5sYXN0bmFtZSxlLnVzZXIudXNlcm5hbWU9dC5kYXRhLnVzZXIudXNlcm5hbWUsZS51c2VyLmVtYWlsPXQuZGF0YS51c2VyLmVtYWlsLHIuc2V0VXNlcihlLnVzZXIpLHUuYWxlcnQoXCJzdWNjZXNzXCIsXCJVc2VyIGRldGFpbHMgaGF2ZSBiZWVuIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5XCIsNWUzKSxhLmdvKFwiL1wiKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3UuYWxlcnQoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byB1cGRhdGUgdXNlciBkZXRhaWxzLiBQbGVhc2UgdHJ5IGFnYWluIGFmdGVyIHNvbWUgdGltZS5cIiw1ZTMpfSl9fV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIlJlZ2lzdGVyQ3RybFwiLFtcIiRzY29wZVwiLFwiJHN0YXRlXCIsXCJVc2VyRmFjdG9yeVwiLFwiSGVscGVyRmFjdG9yeVwiLFwiWWdOb3RpZnlcIixmdW5jdGlvbihlLHIsdCxzLGEpe2UubmV3VXNlcj17fSxlLnJlZ2lzdGVyPWZ1bmN0aW9uKCl7dC5yZWdpc3RlclVzZXIoZS5uZXdVc2VyKS50aGVuKGZ1bmN0aW9uKGUpe2lmKGUuZGF0YS5lcnJvcnMpe3ZhciB0PXMuY3JlYXRlRXJyb3JNZXNzYWdlKGUuZGF0YS5lcnJvcnMpO3QuZm9yRWFjaChmdW5jdGlvbihlKXthLmFsZXJ0KFwiZGFuZ2VyXCIsZSw1ZTMpfSl9ZWxzZSBhLmFsZXJ0KFwic3VjY2Vzc1wiLFwiVXNlciBoYXMgYmVlbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseS4gWW91IGNhbiBub3cgbG9naW4uXCIsNWUzKSxyLmdvKFwidXNlcnMtbG9naW4ubG9naW5cIil9KS5jYXRjaChmdW5jdGlvbihlKXthLmFsZXJ0KFwiZGFuZ2VyXCIsXCJUaGVyZSB3YXMgc29tZSBlcnJvciB0cnlpbmcgdG8gY3JlYXRlIHRoZSB1c2VyLiBQbGVhc2UgdHJ5IGFnYWluIGFmdGVyIHNvbWUgdGltZS5cIiw1ZTMpfSl9fV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIlNldFVzZXJDdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVQYXJhbXNcIixcIiRzdGF0ZVwiLFwiVXNlckZhY3RvcnlcIixcIllnTm90aWZ5XCIsXCJBdXRoZW50aWNhdGlvblwiLGZ1bmN0aW9uKGUsdCxyLHMsYSxuKXt2YXIgYz10LmlkLG89dC5lbWFpbDtlLnNldFVzZXJuYW1lPXt9LGUuc2V0VXNlcm5hbWUuZW1haWw9byxlLnNhdmVVc2VybmFtZT1mdW5jdGlvbigpe3Muc2V0VXNlcm5hbWUoe2lkOmMsdXNlcm5hbWU6ZS5zZXRVc2VybmFtZS51c2VybmFtZX0pLnRoZW4oZnVuY3Rpb24odCl7aWYodC5kYXRhLmVycm9ycyl7dmFyIHM9SGVscGVyRmFjdG9yeS5jcmVhdGVFcnJvck1lc3NhZ2UodC5kYXRhLmVycm9ycyk7cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2EuYWxlcnQoXCJkYW5nZXJcIixlLDVlMyl9KX1lbHNlIG4uc2V0VXNlcih0LmRhdGEudXNlciksZS4kZW1pdChcInN1Y2Nlc3NmdWwtbG9naW5cIiksci5nbyhcInRpY2tldC5teS10aWNrZXRzXCIpLGEuYWxlcnQoXCJzdWNjZXNzXCIsXCJVc2VybmFtZSBoYXMgYmVlbiBzZXQgc3VjY2Vzc2Z1bGx5LlwiLDVlMyl9KS5jYXRjaChmdW5jdGlvbihlKXthLmFsZXJ0KFwiZGFuZ2VyXCIsXCJUaGVyZSB3YXMgc29tZSBlcnJvciB0cnlpbmcgdG8gc2V0IHRoZSB1c2VybmFtZS4gUGxlYXNlIHRyeSBhZ2FpbiBhZnRlciBzb21lIHRpbWUuXCIsNWUzKX0pfX1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmNvbnRyb2xsZXIoXCJBY3Rpb25zQ3RybFwiLFtcIiRzY29wZVwiLFwiQWN0aW9uRmFjdG9yeVwiLFwiSGVscGVyRmFjdG9yeVwiLFwiJHJvb3RTY29wZVwiLGZ1bmN0aW9uKHQsZSxhLG4pe3QuZ2V0VGFzaz1lLmdldFRhc2ssdC50YXNrPXt9LHQudGFzay5zaG93VGFza1BhbmVsPSExLHQudGFzay5zaG93TWFpblBhbmVsPSExLGUuc2V0VGFzayhudWxsKSx0LnNldFNhdmVGbj1mdW5jdGlvbihlKXt0LnNhdmVUYXNrPWV9LHQuY2FuY2VsVGFzaz1mdW5jdGlvbigpe2Uuc2V0VGFzayhudWxsKSx0LnRhc2suY29tbWVudD1cIlwiLHQudGFzay5zaG93VGFza1BhbmVsPSExLHQudGFzay5zaG93TWFpblBhbmVsPSExfSx0LnNldFNhdmVCdG5OYW1lPWZ1bmN0aW9uKGUpe3Quc2F2ZUJ0bk5hbWU9ZX0sdC4kd2F0Y2goXCJnZXRUYXNrKClcIixmdW5jdGlvbihlLGEpe2lmKGUpc3dpdGNoKHQuc2V0TG9hZGluZyghMCksdC50YXNrLnNob3dUYXNrUGFuZWw9ITAsdC50YXNrLnNob3dNYWluUGFuZWw9ITAsdC50YXNrLm5hbWU9XCJ0ZW1wbGF0ZXMvcGFydGlhbHMvYWN0aW9uL1wiK2UrXCItYWN0aW9uLXBhcnRpYWwuaHRtbFwiLGUpe2Nhc2VcImNvbW1lbnRcIjp0LnRhc2sudGl0bGU9XCJBZGQgbmV3IGNvbW1lbnRcIjticmVhaztjYXNlXCJhd2FpdGluZ3VzZXJzcmVzcG9uc2VcIjp0LnRhc2sudGl0bGU9XCJBd2FpdGluZyB1c2VycyByZXNwb25zZVwiO2JyZWFrO2Nhc2VcImNsb3NlXCI6dC50YXNrLnRpdGxlPVwiQ2xvc2UgdGlja2V0XCI7YnJlYWs7Y2FzZVwicmVvcGVuXCI6dC50YXNrLnRpdGxlPVwiUmVvcGVuIHRpY2tldFwiO2JyZWFrO2Nhc2VcImFja25vd2xlZGdlXCI6dC50YXNrLnRpdGxlPVwiQWNrbm93bGVkZ2UgdGlja2V0XCI7YnJlYWs7Y2FzZVwiYXNzaWduXCI6dC50YXNrLnRpdGxlPVwiQXNzaWduIHRpY2tldFwiO2JyZWFrO2Nhc2VcImNoYW5nZXN0YXR1c1wiOnQudGFzay50aXRsZT1cIkNoYW5nZSB0aWNrZXQgc3RhdHVzXCJ9ZWxzZSB0LnRhc2submFtZT1udWxsfSl9XSkuY29udHJvbGxlcihcIkFzc2lnbkFjdGlvbkN0cmxcIixbXCIkc2NvcGVcIixcIkFjdGlvbkZhY3RvcnlcIixcIllnTm90aWZ5XCIsXCJIZWxwZXJGYWN0b3J5XCIsZnVuY3Rpb24odCxlLGEsbil7Y29uc29sZS5sb2coXCJzZXQgYXNzaWduZWVcIiksZS5nZXRBc3NpZ25lZXMoKS50aGVuKGZ1bmN0aW9uKGUpe3QudXNlcnM9ZS5kYXRhLnVzZXJzLHQudXNlcnM9bi5yZW1vdmVVc2VyRnJvbVVzZXJzKHQudXNlcnMsW3QudGlja2V0LmNyZWF0ZWRCeSx0LnRpY2tldC5hc3NpZ25lZV0pLHQuYXNzaWduZWU9dC51c2Vyc1swXS51c2VybmFtZSx0LnNldExvYWRpbmcoITEpfSksdC5zZXRTYXZlRm4oZnVuY3Rpb24oKXtyZXR1cm4gdC5hY3Rpb25Gb3JtLmNvbW1lbnQuJGludmFsaWR8fHQuYWN0aW9uRm9ybS5hc3NpZ25lZS4kaW52YWxpZD8odC5hY3Rpb25Gb3JtLmNvbW1lbnQuJHRvdWNoZWQ9ITAsdm9pZCh0LmFjdGlvbkZvcm0uYXNzaWduZWUuJHRvdWNoZWQ9ITApKToodC5zZXRMb2FkaW5nKCEwKSx2b2lkIGUuYXNzaWduKHQudGlja2V0LmlkLHQuYXNzaWduZWUsdC50YXNrLmNvbW1lbnQpLnRoZW4oZnVuY3Rpb24oZSl7aWYoZS5kYXRhLmVycm9ycyl7dmFyIHM9bi5jcmVhdGVFcnJvck1lc3NhZ2UoZS5kYXRhLmVycm9ycyk7cmV0dXJuIHZvaWQgcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2EuYWxlcnQoXCJkYW5nZXJcIix0LDVlMyl9KX10LnRpY2tldC5jb21tZW50cz1lLmRhdGEuY29tbWVudHMsdC50aWNrZXQuYXNzaWduZWU9ZS5kYXRhLmFzc2lnbmVlLGEuYWxlcnQoXCJzdWNjZXNzXCIsXCJUaGUgYXNzaWduZWUgaGFzIGJlZW4gY2hhbmdlZCBzdWNjZXNzZnVsbHlcIiw1ZTMpLHQuc2V0TG9hZGluZyghMSksdC5jYW5jZWxUYXNrKCl9KS5jYXRjaChmdW5jdGlvbihlKXthLmFsZXJ0KFwiZGFuZ2VyXCIsXCJUaGVyZSB3YXMgc29tZSBlcnJvciB0cnlpbmcgdG8gYXNzaWduIHRoZSB0aWNrZXQuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyksdC5jYW5jZWxUYXNrKCksdC5zZXRMb2FkaW5nKCExKX0pKX0pLHQuc2V0U2F2ZUJ0bk5hbWUoXCJBc3NpZ24gVGlja2V0XCIpfV0pLmNvbnRyb2xsZXIoXCJDaGFuZ2VTdGF0dXNBY3Rpb25DdHJsXCIsW1wiJHNjb3BlXCIsXCJBY3Rpb25GYWN0b3J5XCIsXCJZZ05vdGlmeVwiLGZ1bmN0aW9uKHQsZSxhKXt2YXIgbj10LnRpY2tldC5zdGF0dXM7ZS5nZXRBbGxvd2VkU3RhdHVzKG4pLnRoZW4oZnVuY3Rpb24oZSl7Y29uc29sZS5sb2coZS5kYXRhKSx0LmFsbG93ZWRTdGF0dXM9ZS5kYXRhLnN0YXR1cy5hbGxvd2VkLHQubmV3U3RhdHVzPXQuYWxsb3dlZFN0YXR1c1swXSx0LnNldExvYWRpbmcoITEpfSksdC5zZXRTYXZlRm4oZnVuY3Rpb24oKXtyZXR1cm4gdC5hY3Rpb25Gb3JtLmNvbW1lbnQuJGludmFsaWR8fHQuYWN0aW9uRm9ybS5uZXdTdGF0dXMuJGludmFsaWQ/KHQuYWN0aW9uRm9ybS5jb21tZW50LiR0b3VjaGVkPSEwLHZvaWQodC5hY3Rpb25Gb3JtLm5ld1N0YXR1cy4kdG91Y2hlZD0hMCkpOih0LnNldExvYWRpbmcoITApLHZvaWQgZS5jaGFuZ2VTdGF0dXModC50aWNrZXQuaWQsdC5uZXdTdGF0dXMsdC50YXNrLmNvbW1lbnQpLnRoZW4oZnVuY3Rpb24oZSl7dC50aWNrZXQuY29tbWVudHM9ZS5kYXRhLmNvbW1lbnRzLHQudGlja2V0LnN0YXR1cz1lLmRhdGEuc3RhdHVzLGEuYWxlcnQoXCJzdWNjZXNzXCIsXCJUaGUgYXNzaWduZWUgaGFzIGJlZW4gY2hhbmdlZCBzdWNjZXNzZnVsbHlcIiw1ZTMpLHQuc2V0TG9hZGluZyghMSksdC5jYW5jZWxUYXNrKCl9KS5jYXRjaChmdW5jdGlvbihlKXthLmFsZXJ0KFwiZGFuZ2VyXCIsXCJUaGVyZSB3YXMgc29tZSBlcnJvciB0cnlpbmcgdG8gY2hhbmdlIHRoZSB0aWNrZXQgc3RhdHVzLiBQbGVhc2UgdHJ5IGFnYWluIGFmdGVyIHNvbWUgdGltZS5cIiw1ZTMpLHQuc2V0TG9hZGluZyghMSksdC5jYW5jZWxUYXNrKCl9KSl9KSx0LnNldFNhdmVCdG5OYW1lKFwiQ2hhbmdlIFN0YXR1c1wiKX1dKS5jb250cm9sbGVyKFwiQ29tbWVudEFjdGlvbkN0cmxcIixbXCIkc2NvcGVcIixcIkFjdGlvbkZhY3RvcnlcIixcIllnTm90aWZ5XCIsZnVuY3Rpb24odCxlLGEpe3Quc2V0TG9hZGluZyghMSksdC5zZXRTYXZlRm4oZnVuY3Rpb24oKXtyZXR1cm4gdC5hY3Rpb25Gb3JtLmNvbW1lbnQuJGludmFsaWQ/dm9pZCh0LmFjdGlvbkZvcm0uY29tbWVudC4kdG91Y2hlZD0hMCk6KHQuc2V0TG9hZGluZyghMCksdm9pZCBlLmFkZENvbW1lbnQodC50aWNrZXQuaWQsdC50YXNrLmNvbW1lbnQpLnRoZW4oZnVuY3Rpb24oZSl7dC50aWNrZXQuY29tbWVudHM9ZS5kYXRhLmNvbW1lbnRzLGEuYWxlcnQoXCJzdWNjZXNzXCIsXCJUaGUgY29tbWVudCBoYXMgYmVlbiBhZGRlZCBzdWNjZXNzZnVsbHlcIiw1ZTMpLHQuc2V0TG9hZGluZyghMSksdC5jYW5jZWxUYXNrKCl9KS5jYXRjaChmdW5jdGlvbihlKXthLmFsZXJ0KFwiZGFuZ2VyXCIsXCJUaGVyZSB3YXMgc29tZSBlcnJvciB0cnlpbmcgdG8gYWRkIGNvbW1lbnQuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyksdC5zZXRMb2FkaW5nKCExKSx0LmNhbmNlbFRhc2soKX0pKX0pLHQuc2V0U2F2ZUJ0bk5hbWUoXCJBZGQgQ29tbWVudFwiKX1dKS5jb250cm9sbGVyKFwiQ2xvc2VBY3Rpb25DdHJsXCIsW1wiJHNjb3BlXCIsXCJBY3Rpb25GYWN0b3J5XCIsXCJZZ05vdGlmeVwiLGZ1bmN0aW9uKHQsZSxhKXt0LnNldExvYWRpbmcoITEpLHQuc2V0U2F2ZUZuKGZ1bmN0aW9uKCl7cmV0dXJuIHQuYWN0aW9uRm9ybS5jb21tZW50LiRpbnZhbGlkP3ZvaWQodC5hY3Rpb25Gb3JtLmNvbW1lbnQuJHRvdWNoZWQ9ITApOih0LnNldExvYWRpbmcoITApLHZvaWQgZS5jbG9zZSh0LnRpY2tldC5pZCx0LnRhc2suY29tbWVudCkudGhlbihmdW5jdGlvbihlKXt0LnRpY2tldC5jb21tZW50cz1lLmRhdGEuY29tbWVudHMsdC50aWNrZXQuc3RhdHVzPWUuZGF0YS5zdGF0dXMsYS5hbGVydChcInN1Y2Nlc3NcIixcIlRoZSBzdGF0dXMgaGFzIGJlZW4gY2hhbmdlZCBzdWNjZXNzZnVsbHlcIiw1ZTMpLHQuc2V0TG9hZGluZyghMSksdC5jYW5jZWxUYXNrKCl9KS5jYXRjaChmdW5jdGlvbihlKXthLmFsZXJ0KFwiZGFuZ2VyXCIsXCJUaGVyZSB3YXMgc29tZSBlcnJvciB0cnlpbmcgdG8gY2hhbmdlIHRoZSB0aWNrZXQgc3RhdHVzLiBQbGVhc2UgdHJ5IGFnYWluIGFmdGVyIHNvbWUgdGltZS5cIiw1ZTMpLHQuc2V0TG9hZGluZyghMSksdC5jYW5jZWxUYXNrKCl9KSl9KSx0LnNldFNhdmVCdG5OYW1lKFwiQ2xvc2VcIil9XSkuY29udHJvbGxlcihcIlJlb3BlbkFjdGlvbkN0cmxcIixbXCIkc2NvcGVcIixcIkFjdGlvbkZhY3RvcnlcIixcIllnTm90aWZ5XCIsZnVuY3Rpb24odCxlLGEpe3Quc2V0TG9hZGluZyghMSksdC5zZXRTYXZlRm4oZnVuY3Rpb24oKXtyZXR1cm4gdC5hY3Rpb25Gb3JtLmNvbW1lbnQuJGludmFsaWQ/dm9pZCh0LmFjdGlvbkZvcm0uY29tbWVudC4kdG91Y2hlZD0hMCk6KHQuc2V0TG9hZGluZyghMCksdm9pZCBlLnJlb3Blbih0LnRpY2tldC5pZCx0LnRhc2suY29tbWVudCkudGhlbihmdW5jdGlvbihlKXt0LnRpY2tldC5jb21tZW50cz1lLmRhdGEuY29tbWVudHMsdC50aWNrZXQuc3RhdHVzPWUuZGF0YS5zdGF0dXMsYS5hbGVydChcInN1Y2Nlc3NcIixcIlRoZSBzdGF0dXMgaGFzIGJlZW4gY2hhbmdlZCBzdWNjZXNzZnVsbHlcIiw1ZTMpLHQuc2V0TG9hZGluZyghMSksdC5jYW5jZWxUYXNrKCl9KS5jYXRjaChmdW5jdGlvbihlKXthLmFsZXJ0KFwiZGFuZ2VyXCIsXCJUaGVyZSB3YXMgc29tZSBlcnJvciB0cnlpbmcgdG8gY2hhbmdlIHRoZSB0aWNrZXQgc3RhdHVzLiBQbGVhc2UgdHJ5IGFnYWluIGFmdGVyIHNvbWUgdGltZS5cIiw1ZTMpLHQuc2V0TG9hZGluZyghMSksdC5jYW5jZWxUYXNrKCl9KSl9KSx0LnNldFNhdmVCdG5OYW1lKFwiUmVvcGVuXCIpfV0pLmNvbnRyb2xsZXIoXCJBd2FpdGluZ0FjdGlvbkN0cmxcIixbXCIkc2NvcGVcIixcIkFjdGlvbkZhY3RvcnlcIixcIllnTm90aWZ5XCIsZnVuY3Rpb24odCxlLGEpe3Quc2V0TG9hZGluZyghMSksdC5zZXRTYXZlRm4oZnVuY3Rpb24oKXtyZXR1cm4gdC5hY3Rpb25Gb3JtLmNvbW1lbnQuJGludmFsaWQ/dm9pZCh0LmFjdGlvbkZvcm0uY29tbWVudC4kdG91Y2hlZD0hMCk6KHQuc2V0TG9hZGluZyghMCksdm9pZCBlLmF3YWl0aW5nVXNlclJlc3BvbnNlKHQudGlja2V0LmlkLHQudGFzay5jb21tZW50KS50aGVuKGZ1bmN0aW9uKGUpe3QudGlja2V0LmNvbW1lbnRzPWUuZGF0YS5jb21tZW50cyx0LnRpY2tldC5zdGF0dXM9ZS5kYXRhLnN0YXR1cyxhLmFsZXJ0KFwic3VjY2Vzc1wiLFwiVGhlIHN0YXR1cyBoYXMgYmVlbiBjaGFuZ2VkIHN1Y2Nlc3NmdWxseVwiLDVlMyksdC5zZXRMb2FkaW5nKCExKSx0LmNhbmNlbFRhc2soKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2EuYWxlcnQoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byBjaGFuZ2UgdGhlIHRpY2tldCBzdGF0dXMuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyksdC5zZXRMb2FkaW5nKCExKSx0LmNhbmNlbFRhc2soKX0pKX0pLHQuc2V0U2F2ZUJ0bk5hbWUoXCJDaGFuZ2UgU3RhdHVzXCIpfV0pLmNvbnRyb2xsZXIoXCJBY2tub3dsZWRnZUFjdGlvbkN0cmxcIixbXCIkc2NvcGVcIixcIkFjdGlvbkZhY3RvcnlcIixcIllnTm90aWZ5XCIsZnVuY3Rpb24odCxlLGEpe3Quc2V0TG9hZGluZyghMSksdC5zZXRTYXZlRm4oZnVuY3Rpb24oKXtyZXR1cm4gdC5hY3Rpb25Gb3JtLmNvbW1lbnQuJGludmFsaWQ/dm9pZCh0LmFjdGlvbkZvcm0uY29tbWVudC4kdG91Y2hlZD0hMCk6KHQuc2V0TG9hZGluZyghMCksdm9pZCBlLmFja25vd2xlZGdlVGlja2V0KHQudGlja2V0LmlkLHQudGFzay5jb21tZW50KS50aGVuKGZ1bmN0aW9uKGUpe3QudGlja2V0LmNvbW1lbnRzPWUuZGF0YS5jb21tZW50cyx0LnRpY2tldC5zdGF0dXM9ZS5kYXRhLnN0YXR1cyxhLmFsZXJ0KFwic3VjY2Vzc1wiLFwiVGhlIHN0YXR1cyBoYXMgYmVlbiBjaGFuZ2VkIHN1Y2Nlc3NmdWxseVwiLDVlMyksdC5zZXRMb2FkaW5nKCExKSx0LmNhbmNlbFRhc2soKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2EuYWxlcnQoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byBjaGFuZ2UgdGhlIHRpY2tldCBzdGF0dXMuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyksdC5zZXRMb2FkaW5nKCExKSx0LmNhbmNlbFRhc2soKX0pKX0pLHQuc2V0U2F2ZUJ0bk5hbWUoXCJBY2tub3dsZWRnZSBUaWNrZXRcIil9XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiQnV0dG9uR3JvdXBDdHJsXCIsW1wiJHNjb3BlXCIsXCJBY3Rpb25GYWN0b3J5XCIsZnVuY3Rpb24odCxvKXt0LmJ1dHRvbmdyb3VwPXt9LHQuJHdhdGNoKFwidGlja2V0LnN0YXR1c1wiLGZ1bmN0aW9uKG4pe24mJm8uZ2V0QWxsb3dlZEJ1dHRvbnMobikudGhlbihmdW5jdGlvbihvKXt0LmJ1dHRvbmdyb3VwLnNob3dBc3NpZ249by5hc3NpZ24sdC5idXR0b25ncm91cC5zaG93Q29tbWVudD1vLmNvbW1lbnQsdC5idXR0b25ncm91cC5zaG93Y2hhbmdlU3RhdHVzPW8uY2hhbmdlU3RhdHVzLHQuYnV0dG9uZ3JvdXAuc2hvd1Jlb3Blbj1vLnJlb3Blbix0LmJ1dHRvbmdyb3VwLnNob3dDbG9zZT1vLmNsb3NlLHQuYnV0dG9uZ3JvdXAuc2hvd0Fja25vd2xlZGdlPW8uYWNrbm93bGVkZ2UsdC5idXR0b25ncm91cC5zaG93QXdhaXRpbmdVc2Vyc1Jlc3BvbnNlPW8uYXdhaXRpbmdVc2VyUmVzcG9uc2V9KX0pLHQuYnV0dG9uZ3JvdXAuY29tbWVudD1mdW5jdGlvbigpe28uc2V0VGFzayhcImNvbW1lbnRcIil9LHQuYnV0dG9uZ3JvdXAuYXNzaWduPWZ1bmN0aW9uKCl7by5zZXRUYXNrKFwiYXNzaWduXCIpfSx0LmJ1dHRvbmdyb3VwLmNoYW5nZVN0YXR1cz1mdW5jdGlvbigpe28uc2V0VGFzayhcImNoYW5nZXN0YXR1c1wiKX0sdC5idXR0b25ncm91cC5jbG9zZT1mdW5jdGlvbigpe28uc2V0VGFzayhcImNsb3NlXCIpfSx0LmJ1dHRvbmdyb3VwLnJlb3Blbj1mdW5jdGlvbigpe28uc2V0VGFzayhcInJlb3BlblwiKX0sdC5idXR0b25ncm91cC5hY2tub3dsZWRnZT1mdW5jdGlvbigpe28uc2V0VGFzayhcImFja25vd2xlZGdlXCIpfSx0LmJ1dHRvbmdyb3VwLmF3YWl0aW5ndXNlcnNyZXNwb25zZT1mdW5jdGlvbigpe28uc2V0VGFzayhcImF3YWl0aW5ndXNlcnNyZXNwb25zZVwiKX19XSk7Il0sImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
