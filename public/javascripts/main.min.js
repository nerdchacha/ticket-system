angular.module("ticketSystem",["ngRoute","textAngular","yangular-grid","yg-modal","ngFlash","ui.router","yg-notification"]).service("authInterceptor",["$q","$injector","Authentication",function(t,e,r){return{response:function(e){return 401===e.status&&r.clearUser(),e||t.when(e)},responseError:function(l){return 401===l.status&&(r.clearUser(),e.get("$state").go("users-login.login")),403===l.status&&e.get("$state").go("ticket.my-tickets"),t.reject(l)}}}]).config(["$httpProvider","$stateProvider","$urlRouterProvider",function(t,e,r){r.otherwise("/ticket/my-tickets"),e.state("ticket",{url:"/ticket",controller:"TicketsCtrl",templateUrl:"templates/tickets/tickets.html"}).state("ticket.my-tickets",{url:"/my-tickets",controller:"TicketsCtrl",templateUrl:"templates/tickets/view-my-tickets.html"}).state("ticket.to-me-tickets",{url:"/tome-tickets",controller:"TicketsCtrl",templateUrl:"templates/tickets/view-tome-tickets.html"}).state("ticket.all-tickets",{url:"/all-tickets",controller:"TicketsCtrl",templateUrl:"templates/tickets/view-all-tickets.html"}).state("ticket-new",{url:"/ticket/new",controller:"NewTicketCtrl",templateUrl:"templates/tickets/new-ticket.html"}).state("ticket-view",{url:"/ticket/view/:id",controller:"ViewTicketCtrl",templateUrl:"templates/tickets/view-ticket.html"}).state("ticket-edit",{url:"/ticket/edit/:id",controller:"EditTicketCtrl",templateUrl:"templates/tickets/edit-ticket.html"}).state("users-login",{url:"/users",controller:"MainLoginCtrl",templateUrl:"templates/users/user-login.html"}).state("users-login.login",{url:"/login",controller:"LoginCtrl",templateUrl:"templates/users/login.html"}).state("users-login.register",{url:"/register",controller:"RegisterCtrl",templateUrl:"templates/users/register.html"}).state("users-profile",{url:"/users/profile",controller:"ProfileCtrl",templateUrl:"templates/users/profile.html"}).state("users-register",{url:"/users/register",controller:"RegisterCtrl",templateUrl:"templates/users/register.html"}).state("admin-user-management",{url:"/admin/user-management",controller:"ManageUsersCtrl",templateUrl:"templates/admin/manage-users.html"}).state("auth-google",{url:"/auth/google/:id/:email",controller:"SetUserCtrl",templateUrl:"templates/users/set-username.html"}).state("admin-edit",{url:"/admin/edit/:username",controller:"ManageUsersCtrl",templateUrl:"templates/admin/edit-user.html"}).state("admin-reset-password",{url:"/admin/reset-password/:id",controller:"ManageUsersCtrl",templateUrl:"templates/admin/reset-password.html"}),t.interceptors.push("authInterceptor")}]);
angular.module("ticketSystem").directive("ygToggle",function(){return{restrict:"E",scope:{toggle:"="},replace:!0,template:'<div ng-show="loaded" class="toggle-button"><div class="toggle"></div></div>',link:function(e,t,l){var o=function(l){e.loaded=!0,l?t.addClass("is-active"):t.removeClass("is-active")};e.$watch("toggle.value",function(e,t){"undefined"!=typeof e&&o(e)}),t.on("click",function(){e.toggle.value=!e.toggle.value,o(e.toggle.value)})}}});
angular.module("ticketSystem").factory("TicketFactory",["$http",function(t){var e={};return e.createNewTicket=function(e){return t.post("tickets/new",e)},e.updateTicket=function(e,i){return t.put("tickets/"+e,i)},e.getTicketById=function(e){return t.get("tickets/"+e)},e.getInitialTicketData=function(e){return t.get("tickets/edit-ticket/initial-load/"+e)},e}]);
angular.module("ticketSystem").factory("CommonFactory",["$http",function(t){var e={};return e.getInitialStaticData=function(){return t.get("tickets/static-data")},e}]).filter("reverse",function(){return function(t){if(t)return t.slice().reverse()}});
angular.module("ticketSystem").factory("UserFactory",["$http",function(e){var t={};return t.login=function(t,r,n){return e.post("accounts/login",{username:t,password:r,remember:n})},t.logout=function(){return e.get("accounts/logout")},t.registerUser=function(t){return e.post("accounts/register",t)},t.getUserByUsername=function(t){return e.get("users/profile/"+t)},t.updateProfile=function(t){return e.post("users/profile/"+t.username,t)},t.setUsername=function(t){return e.post("accounts/set-username",t)},t.getAllUserDetails=function(){return e.get("admin/users-details")},t.getUserDetails=function(t){return e.get("admin/user-details/"+t)},t.updateUserDetails=function(t,r){return e.post("admin/update-user/"+t,r)},t.resetPassword=function(t,r){return e.post("admin/reset-password/"+t,r)},t}]);
angular.module("ticketSystem").factory("Authentication",function(){var t={};return t.getIsAuthenticated=function(){if(localStorage.getItem("ticketSystemUser"))return!0},t.setUser=function(t){localStorage.setItem("ticketSystemUser",JSON.stringify(t))},t.clearUser=function(){localStorage.removeItem("ticketSystemUser")},t.getUser=function(){return JSON.parse(localStorage.getItem("ticketSystemUser"))},t});
angular.module("ticketSystem").factory("HelperFactory",["Authentication",function(r){var e={};return e.createErrorMessage=function(r){for(var e=[],t=0;t<r.length;t++)e.push(r[t].error);return e},e.setAllUsers=function(r){this.users=r},e.getAllUsers=function(){return this.users},e.getAllUsersButSelf=function(e){var t=r.getUser().username;return e.filter(function(r){return r.username!==t})},e.removeUserFromUsers=function(r,e){return r.filter(function(r){var t=e.indexOf(r.username)===-1;return t})},e.isCurrentUserAdmin=function(){var e=r.getUser();return e.role.indexOf("Admin")>-1},e.isCurrentUserSupport=function(){var e=r.getUser();return e.role.indexOf("Support")>-1},e}]);
angular.module("ticketSystem").factory("ActionFactory",["$http","$q",function(t,e){var n,o={};return o.setTask=function(t){n=t},o.getTask=function(){return n},o.getAssignees=function(){return t.get("static/all-users")},o.getAllowedStatus=function(e){return t.get("static/allowed-status/"+e)},o.getAllowedButtons=function(n){var o=e.defer();return t.get("static/action-buttons/"+n).then(function(t){var e={};e.assign=t.data.actionButtons.assign,e.comment=t.data.actionButtons.comment,e.changeStatus=t.data.actionButtons.changeStatus,e.reopen=t.data.actionButtons.reopen,e.close=t.data.actionButtons.close,e.acknowledge=t.data.actionButtons.acknowledge,e.awaitingUserResponse=t.data.actionButtons.awaitingUserResponse,o.resolve(e)}).catch(function(t){o.reject(t)}),o.promise},o.assign=function(e,n,o){return t.post("tickets/assign/"+e,{assignee:n,comment:o})},o.changeStatus=function(e,n,o){return t.post("tickets/change-status/"+e,{status:n,comment:o})},o.awaitingUserResponse=function(e,n){return t.post("tickets/awaiting-user-response/"+e,{comment:n})},o.reopen=function(e,n){return t.post("tickets/re-open/"+e,{comment:n})},o.close=function(e,n){return t.post("tickets/close/"+e,{comment:n})},o.addComment=function(e,n){return t.post("tickets/addComment/"+e,{comment:n})},o.deleteComment=function(e,n){return t.delete("tickets/deleteComment/"+e._id+"?commentId="+n._id)},o}]);
angular.module("ticketSystem").controller("MainCtrl",["$scope","$state","Authentication","UserFactory","$window","YgNotify",function(e,t,i,n,o,r){var s=function(){var t=i.getUser();t.role.indexOf("Admin")>-1?e.isAdmin=!0:e.isAdmin=!1,e.isRegularUser=!0,(i.getUser().role.indexOf("Support")>-1||i.getUser().role.indexOf("Admin")>-1)&&(e.isRegularUser=!1)};e.init=function(){var t=i.getUser();t&&(t.role.indexOf("Admin")>-1?e.isAdmin=!0:e.isAdmin=!1)},e.getUser=i.getUser,e.isAuthenticated=i.getIsAuthenticated,e.logout=function(){n.logout().then(function(){i.clearUser(),t.go("users-login.login")})},e.$on("successful-login",s),e.getProfile=function(){t.go("users-profile")},o.app={},o.app.auth=function(e,n){""!==e?r.alert("danger",e.toString(),5e3):n.username&&""!==n.username?n&&(i.setUser(n),s(),t.go("ticket.my-tickets")):t.go("auth-google",{id:n._id.toString(),email:n.email})}}]);
angular.module("ticketSystem").controller("ManageUsersCtrl",["$scope","$state","$stateParams","Authentication","HelperFactory","UserFactory","YgNotify",function(e,s,a,r,t,i,n){var u=function(){return""},c=function(e){return e===!0?"fa fa-check":"fa fa-remove"},o=function(){return""},l=function(e){return e.indexOf("Admin")>-1?"fa fa-check":"fa fa-remove"};e.config={},e.config.url="/admin/users-details",e.config.columns=[],e.config.columns.push({key:"username",name:"Username",cssClass:"col-md-6"}),e.config.columns.push({key:"isActive",name:"Is Active",cssClass:"col-md-3",render:u,renderClass:c}),e.config.columns.push({key:"role",name:"Is Admin",cssClass:"col-md-3",render:o,renderClass:l}),e.config.sortQuerystringParam="sort",e.config.orderQuerystringParam="order",e.config.pageQuerystringParam="page",e.config.sizeQuerystringParam="size",e.config.objectName="users",e.config.onRowClick=function(e){s.go("admin-edit",{username:e.username})},e.isActive={},e.isAdmin={},e.userDetails={},e.userDetails.getUserDetails=function(){var s=a.username;i.getUserDetails(s).then(function(s){e.userDetails.username=s.data.user.username,e.userDetails.firstname=s.data.user.firstname,e.userDetails.lastname=s.data.user.lastname,e.userDetails.id=s.data.user._id;var a=s.data.user.role;a.indexOf("Admin")>-1?e.userDetails.isAdmin=!0:e.userDetails.isAdmin=!1,e.userDetails.isActive=s.data.user.isActive,e.userDetails.email=s.data.user.email,e.isActive.key="isActive",e.isActive.value=e.userDetails.isActive,e.isAdmin.key="isAdmin",e.isAdmin.value=e.userDetails.isAdmin}).catch(function(e){n.alert("danger","There was some error trying to fetch user details. Please try again after some time.",5e3)})},e.userDetails.update=function(){e.userDetails.isAdmin=e.isAdmin.value,e.userDetails.isActive=e.isActive.value,i.updateUserDetails(e.userDetails.username,e.userDetails).then(function(e){n.alert("success","User details updated successfully",5e3)}).catch(function(e){n.alert("danger","There was some error trying to update user details. Please try again after some time.",5e3)})},e.resetPassword={},e.resetPassword.reset=function(){var r=a.id;i.resetPassword(r,e.resetPassword).then(function(e){if(e.data.errors){var a=t.createErrorMessage(e.data.errors);a.forEach(function(e){n.alert("danger",e,5e3)})}else n.alert("success","Password has been reset successfully",5e3),s.go("admin-user-management")}).catch(function(e){n.alert("danger","The request could not ben made successfully. Please try later",5e3)})}}]);
angular.module("ticketSystem").controller("EditTicketCtrl",["$scope","$stateParams","$state","TicketFactory","YgNotify","HelperFactory","Authentication",function(t,e,a,r,i,c,n){t.toolbarConfig=[["h1","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],[],["insertLink"]],t.cancel=function(){a.go("ticket-view",{id:t.ticket.id})},t.renderDate=function(t){return new Date(Date.parse(t)).toLocaleDateString()},r.getTicketById(e.id).then(function(e){if(e.data.errors){a.go("ticket.my-tickets");var o=c.createErrorMessage(e.data.errors);o.forEach(function(t){i.alert("danger",t,5e3)})}else t.ticket=e.data,t.ticket.currentUser=n.getUser().username,r.getInitialTicketData(t.ticket.status).then(function(e){t.priorities=e.data.priorities.values,t.types=e.data.types.values,t.users=e.data.users,c.setAllUsers(t.users),t.statuses=e.data.statuses}).catch(function(t){console.log(t),i.alert("danger","An error occurred while trying to detch the static data.")})}).catch(function(t){console.log(t),i.alert("danger","An error occurred while trying to get ticket details. Please try again later.",5e3)}),t.update=function(){r.updateTicket(t.ticket._id,t.ticket).then(function(e){t.ticket=e.data,i.alert("success","Ticket updated successfully.",5e3),a.go("ticket-view",{id:e.data.id})}).catch(function(t){console.log(t),i.alert("danger","An error occurred while trying to update ticket details. Please try again later.",5e3)})}}]);
angular.module("ticketSystem").controller("NewTicketCtrl",["$scope","$state","TicketFactory","YgNotify","CommonFactory","HelperFactory",function(e,t,i,r,o,n){o.getInitialStaticData().then(function(t){e.types=t.data.types.values,e.newTicket.type=e.types[0].value}),e.newTicket={},e.toolbarConfig=[["h1","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],[],["insertLink"]];e.save=function(){return e.newTicketForm.$invalid?(e.newTicketForm.title.$touched=!0,void(e.newTicketForm.description.$touched=!0)):void i.createNewTicket({title:e.newTicket.title,description:e.newTicket.description,type:e.newTicket.type}).then(function(e){if(e.data.errors){var i=n.createErrorMessage(e.data.errors);i.forEach(function(e){r.alert("danger",e,5e3)})}else t.go("ticket-view",{id:e.data.id})},function(e){r.alert("danger","An error occurred while trying to create new ticket. Please try again later.",5e3),console.log(e)})}}]);
angular.module("ticketSystem").controller("TaskCtrl",["$scope","TaskFactory",function(a,t){console.log(t),a.getTask=t.getTask,a.task={},a.commentPartial="templates/partials/comments-partial.html",a.$watch("getTask()",function(t,s){switch(console.log(t),a.task.name="templates/partials/"+t+"-partial.html",t){case"comment":a.task.showTaskPanel=!0,a.task.title="Add new comment",a.task.showMainPanel=!1,a.task.showCommentsPanel=!0;break;case"assign":a.task.showTaskPanel=!0,a.task.title="Assign ticket",a.task.showMainPanel=!0,a.task.showCommentsPanel=!0}})}]);
angular.module("ticketSystem").controller("TicketsCtrl",["$scope","$state",function(e,t){e.isSupport=!1;var n=JSON.parse(localStorage.getItem("ticketSystemUser"));n&&(n.role.indexOf("Admin")>-1||n.role.indexOf("Support")>-1)&&(e.isSupport=!0);var i=function(e){return new Date(Date.parse(e)).toLocaleDateString()},c=function(e){return e?String(e).replace(/<[^>]+>/gm,""):""},s=function(e){return e?e:"Unassigned"};e.config={},e.config.columns=[],e.config.columns.push({key:"id",name:"ID",cssClass:"col-md-1"}),e.config.columns.push({key:"title",name:"Title",cssClass:"col-md-2"}),e.config.columns.push({key:"description",name:"Description",cssClass:"col-md-2",render:c}),e.config.columns.push({key:"type",name:"Type",cssClass:"col-md-1"}),e.config.columns.push({key:"assignee",name:"Assignee",cssClass:"col-md-2",render:s}),e.config.columns.push({key:"createdDate",name:"Created Date",cssClass:"col-md-2",render:i}),e.config.columns.push({key:"createdBy",name:"Created By",cssClass:"col-md-2"}),e.config.sortQuerystringParam="sort",e.config.orderQuerystringParam="order",e.config.pageQuerystringParam="page",e.config.sizeQuerystringParam="size",e.active="",e.config.onRowClick=function(e){t.go("ticket-view",{id:e.id})},e.config.objectName="tickets",e.initiateAllTicket=function(){e.config.url="/tickets/all",e.$parent.active="all"},e.initiateMyTicket=function(){e.config.url="/tickets/my",e.$parent.active="my"},e.initiateToMeTicket=function(){e.config.url="/tickets/to-me",e.$parent.active="tome"}}]);
angular.module("ticketSystem").controller("ViewTicketCtrl",["$scope","$stateParams","$state","TicketFactory","YgNotify","Authentication","HelperFactory","YgModal","ActionFactory",function(e,t,r,n,c,i,a,o,s){e.ticket={},e.renderDate=function(e){return new Date(Date.parse(e)).toLocaleDateString()},e.edit=function(){r.go("ticket-edit",{id:e.ticket.id})};var l=function(t,r){return function(){s.deleteComment(t,r).then(function(t){console.log(t),e.ticket.comments=t.data.comments,c.alert("success","The comment was deleted successfully",5e3)}).catch(function(e){c.alert("danger","An error occurred while trying to delete comment. Please try again later.",5e3)})}};e.deleteComment=function(e,t){o.confirm(l(e,t)),o.open("Are you sure you want to do this?","This will delete the comment permanently")},n.getTicketById(t.id).then(function(t){if(t.data.errors){r.go("ticket.my-tickets");var n=a.createErrorMessage(t.data.errors);n.forEach(function(e){c.alert("danger",e,5e3)})}else e.ticket=t.data,e.ticket.assignee=e.ticket.assignee?e.ticket.assignee:"Unassigned",e.ticket.createdDate=e.renderDate(e.ticket.createdDate),e.ticket.currentUser=i.getUser().username,(e.ticket.assignee===e.ticket.currentUser||e.ticket.createdBy===e.ticket.currentUser||a.isCurrentUserAdmin()||a.isCurrentUserSupport())&&(e.showEdit=!0)}).catch(function(e){console.log(e),c.alert("danger","An error occurred while trying to get ticket details. Please try again later.",5e3)})}]);
angular.module("ticketSystem").controller("LoginCtrl",["$scope","$state","$window","UserFactory","Authentication",function(e,t,o,r,n){e.error=!1,e.message="",e.login=function(){r.login(e.username,e.password,e.remember).then(function(o){o.data.isAuthenticated?(n.setUser(o.data.user),e.$emit("successful-login"),t.go("ticket.my-tickets")):(e.error=!0,e.message=o.data.msg)}).catch(function(t){e.error=!0,e.message="An error occurred while trying to log you in. Please try again later"})},e.googleLogin=function(){var e="accounts/auth/google",t=600,r=450,n=(window.outerHeight-r)/2,i=(window.outerWidth-t)/2;o.open(e,"facebook_login","width="+t+",height="+r+",scrollbars=0,top="+n+",left="+i)}}]);
angular.module("ticketSystem").controller("MainLoginCtrl",["$rootScope","$scope","$state",function(t,e,n){e.statename=n.current.name,t.$on("$stateChangeStart",function(t,n,a,o,r){e.statename=n.name})}]);
angular.module("ticketSystem").controller("ProfileCtrl",["$scope","$state","Authentication","UserFactory","HelperFactory","YgNotify",function(e,a,r,t,s,u){e.user={},e.init=function(){t.getUserByUsername(r.getUser().username).then(function(r){if(r.data.errors){var t=s.createErrorMessage(r.data.errors);t.forEach(function(e){u.alert("danger",t,5e3)}),a.go("ticket.my-tickets")}else e.user.firstname=r.data.user.firstname;e.user.lastname=r.data.user.lastname,e.user.username=r.data.user.username,e.user.email=r.data.user.email})},e.update=function(){t.updateProfile(e.user).then(function(t){e.user.firstname=t.data.user.firstname,e.user.lastname=t.data.user.lastname,e.user.username=t.data.user.username,e.user.email=t.data.user.email,r.setUser(e.user),u.alert("success","User details have been updated successfully",5e3),a.go("/")}).catch(function(e){u.alert("danger","There was some error trying to update user details. Please try again after some time.",5e3)})}}]);
angular.module("ticketSystem").controller("RegisterCtrl",["$scope","$state","UserFactory","HelperFactory","YgNotify",function(e,r,t,s,a){e.newUser={},e.register=function(){t.registerUser(e.newUser).then(function(e){if(e.data.errors){var t=s.createErrorMessage(e.data.errors);t.forEach(function(e){a.alert("danger",e,5e3)})}else a.alert("success","User has been created successfully. You can now login.",5e3),r.go("users-login.login")}).catch(function(e){a.alert("danger","There was some error trying to create the user. Please try again after some time.",5e3)})}}]);
angular.module("ticketSystem").controller("SetUserCtrl",["$scope","$stateParams","$state","UserFactory","YgNotify","Authentication",function(e,t,r,s,a,n){var c=t.id,o=t.email;e.setUsername={},e.setUsername.email=o,e.saveUsername=function(){s.setUsername({id:c,username:e.setUsername.username}).then(function(t){if(t.data.errors){var s=HelperFactory.createErrorMessage(t.data.errors);s.forEach(function(e){a.alert("danger",e,5e3)})}else n.setUser(t.data.user),e.$emit("successful-login"),r.go("ticket.my-tickets"),a.alert("success","Username has been set successfully.",5e3)}).catch(function(e){a.alert("danger","There was some error trying to set the username. Please try again after some time.",5e3)})}}]);
angular.module("ticketSystem").controller("ActionsCtrl",["$scope","ActionFactory","HelperFactory",function(t,e,a){t.getTask=e.getTask,t.task={},t.setSaveFn=function(e){t.saveTask=e},t.cancelTask=function(){e.setTask(null),t.task.comment="",t.task.showTaskPanel=!1,t.task.showMainPanel=!1},t.setSaveBtnName=function(e){t.saveBtnName=e},t.$watch("getTask()",function(e,a){if(e)switch(t.task.showTaskPanel=!0,t.task.showMainPanel=!0,t.task.name="templates/partials/action/"+e+"-action-partial.html",e){case"comment":t.task.title="Add new comment";break;case"awaitingusersresponse":t.task.title="Awaiting users response";break;case"close":t.task.title="Close ticket";break;case"reopen":t.task.title="Reopen ticket";break;case"acknowledge":t.task.title="Acknowledge ticket";break;case"assign":t.task.title="Assign ticket";break;case"changestatus":t.task.title="Change ticket status"}})}]).controller("AssignActionCtrl",["$scope","ActionFactory","YgNotify","HelperFactory",function(t,e,a,n){e.getAssignees().then(function(e){t.users=e.data.users,t.users=n.removeUserFromUsers(t.users,[t.ticket.createdBy,t.ticket.assignee]),t.assignee=t.users[0].username}),t.setSaveFn(function(){return t.actionForm.comment.$invalid||t.actionForm.assignee.$invalid?(t.actionForm.comment.$touched=!0,void(t.actionForm.assignee.$touched=!0)):void e.assign(t.ticket.id,t.assignee,t.task.comment).then(function(e){if(e.data.errors){var s=n.createErrorMessage(e.data.errors);return void s.forEach(function(t){a.alert("danger",t,5e3)})}t.ticket.comments=e.data.comments,t.ticket.assignee=e.data.assignee,a.alert("success","The assignee has been changed successfully",5e3),t.cancelTask()}).catch(function(e){a.alert("danger","There was some error trying to assign the ticket. Please try again after some time.",5e3),t.cancelTask()})}),t.setSaveBtnName("Assign Ticket")}]).controller("ChangeStatusActionCtrl",["$scope","ActionFactory","YgNotify",function(t,e,a){var n=t.ticket.status;e.getAllowedStatus(n).then(function(e){t.allowedStatus=e.data.status.allowed,t.newStatus=t.allowedStatus[0]}),t.setSaveFn(function(){return t.actionForm.comment.$invalid||t.actionForm.newStatus.$invalid?(t.actionForm.comment.$touched=!0,void(t.actionForm.newStatus.$touched=!0)):void e.changeStatus(t.ticket.id,t.newStatus,t.task.comment).then(function(e){t.ticket.comments=e.data.comments,t.ticket.status=e.data.status,a.alert("success","The assignee has been changed successfully",5e3),t.cancelTask()}).catch(function(e){a.alert("danger","There was some error trying to change the ticket status. Please try again after some time.",5e3),t.cancelTask()})}),t.setSaveBtnName("Change Status")}]).controller("CommentActionCtrl",["$scope","ActionFactory","YgNotify",function(t,e,a){t.setSaveFn(function(){return t.actionForm.comment.$invalid?void(t.actionForm.comment.$touched=!0):void e.addComment(t.ticket.id,t.task.comment).then(function(e){t.ticket.comments=e.data.comments,a.alert("success","The comment has been added successfully",5e3),t.cancelTask()}).catch(function(e){a.alert("danger","There was some error trying to add comment. Please try again after some time.",5e3),t.cancelTask()})}),t.setSaveBtnName("Add Comment")}]).controller("CloseActionCtrl",["$scope","ActionFactory","YgNotify",function(t,e,a){t.setSaveFn(function(){return t.actionForm.comment.$invalid?void(t.actionForm.comment.$touched=!0):void e.close(t.ticket.id,t.task.comment).then(function(e){t.ticket.comments=e.data.comments,t.ticket.status=e.data.status,a.alert("success","The status has been changed successfully",5e3),t.cancelTask()}).catch(function(e){a.alert("danger","There was some error trying to change the ticket status. Please try again after some time.",5e3),t.cancelTask()})}),t.setSaveBtnName("Close")}]).controller("ReopenActionCtrl",["$scope","ActionFactory","YgNotify",function(t,e,a){t.setSaveFn(function(){return t.actionForm.comment.$invalid?void(t.actionForm.comment.$touched=!0):void e.reopen(t.ticket.id,t.task.comment).then(function(e){t.ticket.comments=e.data.comments,t.ticket.status=e.data.status,a.alert("success","The status has been changed successfully",5e3),t.cancelTask()}).catch(function(e){a.alert("danger","There was some error trying to change the ticket status. Please try again after some time.",5e3),t.cancelTask()})}),t.setSaveBtnName("Reopen")}]).controller("AwaitingActionCtrl",["$scope","ActionFactory","YgNotify",function(t,e,a){t.setSaveFn(function(){return t.actionForm.comment.$invalid?void(t.actionForm.comment.$touched=!0):void e.awaitingUserResponse(t.ticket.id,t.task.comment).then(function(e){t.ticket.comments=e.data.comments,t.ticket.status=e.data.status,a.alert("success","The status has been changed successfully",5e3),t.cancelTask()}).catch(function(e){a.alert("danger","There was some error trying to change the ticket status. Please try again after some time.",5e3),t.cancelTask()})}),t.setSaveBtnName("Change Status")}]);
angular.module("ticketSystem").controller("ButtonGroupCtrl",["$scope","ActionFactory",function(t,o){t.buttongroup={},t.$watch("ticket.status",function(n){n&&o.getAllowedButtons(n).then(function(o){t.buttongroup.showAssign=o.assign,t.buttongroup.showComment=o.comment,t.buttongroup.showchangeStatus=o.changeStatus,t.buttongroup.showReopen=o.reopen,t.buttongroup.showClose=o.close,t.buttongroup.showAcknowledge=o.acknowledge,t.buttongroup.showAwaitingUsersResponse=o.awaitingUserResponse})}),t.buttongroup.comment=function(){o.setTask("comment")},t.buttongroup.assign=function(){o.setTask("assign")},t.buttongroup.changeStatus=function(){o.setTask("changestatus")},t.buttongroup.close=function(){o.setTask("close")},t.buttongroup.reopen=function(){o.setTask("reopen")},t.buttongroup.acknowledge=function(){o.setTask("acknowledge")},t.buttongroup.awaitingusersresponse=function(){o.setTask("awaitingusersresponse")}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJtYWluLm1pbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiLFtcIm5nUm91dGVcIixcInRleHRBbmd1bGFyXCIsXCJ5YW5ndWxhci1ncmlkXCIsXCJ5Zy1tb2RhbFwiLFwibmdGbGFzaFwiLFwidWkucm91dGVyXCIsXCJ5Zy1ub3RpZmljYXRpb25cIl0pLnNlcnZpY2UoXCJhdXRoSW50ZXJjZXB0b3JcIixbXCIkcVwiLFwiJGluamVjdG9yXCIsXCJBdXRoZW50aWNhdGlvblwiLGZ1bmN0aW9uKHQsZSxyKXtyZXR1cm57cmVzcG9uc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIDQwMT09PWUuc3RhdHVzJiZyLmNsZWFyVXNlcigpLGV8fHQud2hlbihlKX0scmVzcG9uc2VFcnJvcjpmdW5jdGlvbihsKXtyZXR1cm4gNDAxPT09bC5zdGF0dXMmJihyLmNsZWFyVXNlcigpLGUuZ2V0KFwiJHN0YXRlXCIpLmdvKFwidXNlcnMtbG9naW4ubG9naW5cIikpLDQwMz09PWwuc3RhdHVzJiZlLmdldChcIiRzdGF0ZVwiKS5nbyhcInRpY2tldC5teS10aWNrZXRzXCIpLHQucmVqZWN0KGwpfX19XSkuY29uZmlnKFtcIiRodHRwUHJvdmlkZXJcIixcIiRzdGF0ZVByb3ZpZGVyXCIsXCIkdXJsUm91dGVyUHJvdmlkZXJcIixmdW5jdGlvbih0LGUscil7ci5vdGhlcndpc2UoXCIvdGlja2V0L215LXRpY2tldHNcIiksZS5zdGF0ZShcInRpY2tldFwiLHt1cmw6XCIvdGlja2V0XCIsY29udHJvbGxlcjpcIlRpY2tldHNDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdGlja2V0cy90aWNrZXRzLmh0bWxcIn0pLnN0YXRlKFwidGlja2V0Lm15LXRpY2tldHNcIix7dXJsOlwiL215LXRpY2tldHNcIixjb250cm9sbGVyOlwiVGlja2V0c0N0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy90aWNrZXRzL3ZpZXctbXktdGlja2V0cy5odG1sXCJ9KS5zdGF0ZShcInRpY2tldC50by1tZS10aWNrZXRzXCIse3VybDpcIi90b21lLXRpY2tldHNcIixjb250cm9sbGVyOlwiVGlja2V0c0N0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy90aWNrZXRzL3ZpZXctdG9tZS10aWNrZXRzLmh0bWxcIn0pLnN0YXRlKFwidGlja2V0LmFsbC10aWNrZXRzXCIse3VybDpcIi9hbGwtdGlja2V0c1wiLGNvbnRyb2xsZXI6XCJUaWNrZXRzQ3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3RpY2tldHMvdmlldy1hbGwtdGlja2V0cy5odG1sXCJ9KS5zdGF0ZShcInRpY2tldC1uZXdcIix7dXJsOlwiL3RpY2tldC9uZXdcIixjb250cm9sbGVyOlwiTmV3VGlja2V0Q3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3RpY2tldHMvbmV3LXRpY2tldC5odG1sXCJ9KS5zdGF0ZShcInRpY2tldC12aWV3XCIse3VybDpcIi90aWNrZXQvdmlldy86aWRcIixjb250cm9sbGVyOlwiVmlld1RpY2tldEN0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy90aWNrZXRzL3ZpZXctdGlja2V0Lmh0bWxcIn0pLnN0YXRlKFwidGlja2V0LWVkaXRcIix7dXJsOlwiL3RpY2tldC9lZGl0LzppZFwiLGNvbnRyb2xsZXI6XCJFZGl0VGlja2V0Q3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3RpY2tldHMvZWRpdC10aWNrZXQuaHRtbFwifSkuc3RhdGUoXCJ1c2Vycy1sb2dpblwiLHt1cmw6XCIvdXNlcnNcIixjb250cm9sbGVyOlwiTWFpbkxvZ2luQ3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL3VzZXJzL3VzZXItbG9naW4uaHRtbFwifSkuc3RhdGUoXCJ1c2Vycy1sb2dpbi5sb2dpblwiLHt1cmw6XCIvbG9naW5cIixjb250cm9sbGVyOlwiTG9naW5DdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdXNlcnMvbG9naW4uaHRtbFwifSkuc3RhdGUoXCJ1c2Vycy1sb2dpbi5yZWdpc3RlclwiLHt1cmw6XCIvcmVnaXN0ZXJcIixjb250cm9sbGVyOlwiUmVnaXN0ZXJDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdXNlcnMvcmVnaXN0ZXIuaHRtbFwifSkuc3RhdGUoXCJ1c2Vycy1wcm9maWxlXCIse3VybDpcIi91c2Vycy9wcm9maWxlXCIsY29udHJvbGxlcjpcIlByb2ZpbGVDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdXNlcnMvcHJvZmlsZS5odG1sXCJ9KS5zdGF0ZShcInVzZXJzLXJlZ2lzdGVyXCIse3VybDpcIi91c2Vycy9yZWdpc3RlclwiLGNvbnRyb2xsZXI6XCJSZWdpc3RlckN0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy91c2Vycy9yZWdpc3Rlci5odG1sXCJ9KS5zdGF0ZShcImFkbWluLXVzZXItbWFuYWdlbWVudFwiLHt1cmw6XCIvYWRtaW4vdXNlci1tYW5hZ2VtZW50XCIsY29udHJvbGxlcjpcIk1hbmFnZVVzZXJzQ3RybFwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGVzL2FkbWluL21hbmFnZS11c2Vycy5odG1sXCJ9KS5zdGF0ZShcImF1dGgtZ29vZ2xlXCIse3VybDpcIi9hdXRoL2dvb2dsZS86aWQvOmVtYWlsXCIsY29udHJvbGxlcjpcIlNldFVzZXJDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvdXNlcnMvc2V0LXVzZXJuYW1lLmh0bWxcIn0pLnN0YXRlKFwiYWRtaW4tZWRpdFwiLHt1cmw6XCIvYWRtaW4vZWRpdC86dXNlcm5hbWVcIixjb250cm9sbGVyOlwiTWFuYWdlVXNlcnNDdHJsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZXMvYWRtaW4vZWRpdC11c2VyLmh0bWxcIn0pLnN0YXRlKFwiYWRtaW4tcmVzZXQtcGFzc3dvcmRcIix7dXJsOlwiL2FkbWluL3Jlc2V0LXBhc3N3b3JkLzppZFwiLGNvbnRyb2xsZXI6XCJNYW5hZ2VVc2Vyc0N0cmxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlcy9hZG1pbi9yZXNldC1wYXNzd29yZC5odG1sXCJ9KSx0LmludGVyY2VwdG9ycy5wdXNoKFwiYXV0aEludGVyY2VwdG9yXCIpfV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuZGlyZWN0aXZlKFwieWdUb2dnbGVcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVcIixzY29wZTp7dG9nZ2xlOlwiPVwifSxyZXBsYWNlOiEwLHRlbXBsYXRlOic8ZGl2IG5nLXNob3c9XCJsb2FkZWRcIiBjbGFzcz1cInRvZ2dsZS1idXR0b25cIj48ZGl2IGNsYXNzPVwidG9nZ2xlXCI+PC9kaXY+PC9kaXY+JyxsaW5rOmZ1bmN0aW9uKGUsdCxsKXt2YXIgbz1mdW5jdGlvbihsKXtlLmxvYWRlZD0hMCxsP3QuYWRkQ2xhc3MoXCJpcy1hY3RpdmVcIik6dC5yZW1vdmVDbGFzcyhcImlzLWFjdGl2ZVwiKX07ZS4kd2F0Y2goXCJ0b2dnbGUudmFsdWVcIixmdW5jdGlvbihlLHQpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBlJiZvKGUpfSksdC5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXtlLnRvZ2dsZS52YWx1ZT0hZS50b2dnbGUudmFsdWUsbyhlLnRvZ2dsZS52YWx1ZSl9KX19fSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5mYWN0b3J5KFwiVGlja2V0RmFjdG9yeVwiLFtcIiRodHRwXCIsZnVuY3Rpb24odCl7dmFyIGU9e307cmV0dXJuIGUuY3JlYXRlTmV3VGlja2V0PWZ1bmN0aW9uKGUpe3JldHVybiB0LnBvc3QoXCJ0aWNrZXRzL25ld1wiLGUpfSxlLnVwZGF0ZVRpY2tldD1mdW5jdGlvbihlLGkpe3JldHVybiB0LnB1dChcInRpY2tldHMvXCIrZSxpKX0sZS5nZXRUaWNrZXRCeUlkPWZ1bmN0aW9uKGUpe3JldHVybiB0LmdldChcInRpY2tldHMvXCIrZSl9LGUuZ2V0SW5pdGlhbFRpY2tldERhdGE9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuZ2V0KFwidGlja2V0cy9lZGl0LXRpY2tldC9pbml0aWFsLWxvYWQvXCIrZSl9LGV9XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5mYWN0b3J5KFwiQ29tbW9uRmFjdG9yeVwiLFtcIiRodHRwXCIsZnVuY3Rpb24odCl7dmFyIGU9e307cmV0dXJuIGUuZ2V0SW5pdGlhbFN0YXRpY0RhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdC5nZXQoXCJ0aWNrZXRzL3N0YXRpYy1kYXRhXCIpfSxlfV0pLmZpbHRlcihcInJldmVyc2VcIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbih0KXtpZih0KXJldHVybiB0LnNsaWNlKCkucmV2ZXJzZSgpfX0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuZmFjdG9yeShcIlVzZXJGYWN0b3J5XCIsW1wiJGh0dHBcIixmdW5jdGlvbihlKXt2YXIgdD17fTtyZXR1cm4gdC5sb2dpbj1mdW5jdGlvbih0LHIsbil7cmV0dXJuIGUucG9zdChcImFjY291bnRzL2xvZ2luXCIse3VzZXJuYW1lOnQscGFzc3dvcmQ6cixyZW1lbWJlcjpufSl9LHQubG9nb3V0PWZ1bmN0aW9uKCl7cmV0dXJuIGUuZ2V0KFwiYWNjb3VudHMvbG9nb3V0XCIpfSx0LnJlZ2lzdGVyVXNlcj1mdW5jdGlvbih0KXtyZXR1cm4gZS5wb3N0KFwiYWNjb3VudHMvcmVnaXN0ZXJcIix0KX0sdC5nZXRVc2VyQnlVc2VybmFtZT1mdW5jdGlvbih0KXtyZXR1cm4gZS5nZXQoXCJ1c2Vycy9wcm9maWxlL1wiK3QpfSx0LnVwZGF0ZVByb2ZpbGU9ZnVuY3Rpb24odCl7cmV0dXJuIGUucG9zdChcInVzZXJzL3Byb2ZpbGUvXCIrdC51c2VybmFtZSx0KX0sdC5zZXRVc2VybmFtZT1mdW5jdGlvbih0KXtyZXR1cm4gZS5wb3N0KFwiYWNjb3VudHMvc2V0LXVzZXJuYW1lXCIsdCl9LHQuZ2V0QWxsVXNlckRldGFpbHM9ZnVuY3Rpb24oKXtyZXR1cm4gZS5nZXQoXCJhZG1pbi91c2Vycy1kZXRhaWxzXCIpfSx0LmdldFVzZXJEZXRhaWxzPWZ1bmN0aW9uKHQpe3JldHVybiBlLmdldChcImFkbWluL3VzZXItZGV0YWlscy9cIit0KX0sdC51cGRhdGVVc2VyRGV0YWlscz1mdW5jdGlvbih0LHIpe3JldHVybiBlLnBvc3QoXCJhZG1pbi91cGRhdGUtdXNlci9cIit0LHIpfSx0LnJlc2V0UGFzc3dvcmQ9ZnVuY3Rpb24odCxyKXtyZXR1cm4gZS5wb3N0KFwiYWRtaW4vcmVzZXQtcGFzc3dvcmQvXCIrdCxyKX0sdH1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmZhY3RvcnkoXCJBdXRoZW50aWNhdGlvblwiLGZ1bmN0aW9uKCl7dmFyIHQ9e307cmV0dXJuIHQuZ2V0SXNBdXRoZW50aWNhdGVkPWZ1bmN0aW9uKCl7aWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0aWNrZXRTeXN0ZW1Vc2VyXCIpKXJldHVybiEwfSx0LnNldFVzZXI9ZnVuY3Rpb24odCl7bG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0aWNrZXRTeXN0ZW1Vc2VyXCIsSlNPTi5zdHJpbmdpZnkodCkpfSx0LmNsZWFyVXNlcj1mdW5jdGlvbigpe2xvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwidGlja2V0U3lzdGVtVXNlclwiKX0sdC5nZXRVc2VyPWZ1bmN0aW9uKCl7cmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0aWNrZXRTeXN0ZW1Vc2VyXCIpKX0sdH0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuZmFjdG9yeShcIkhlbHBlckZhY3RvcnlcIixbXCJBdXRoZW50aWNhdGlvblwiLGZ1bmN0aW9uKHIpe3ZhciBlPXt9O3JldHVybiBlLmNyZWF0ZUVycm9yTWVzc2FnZT1mdW5jdGlvbihyKXtmb3IodmFyIGU9W10sdD0wO3Q8ci5sZW5ndGg7dCsrKWUucHVzaChyW3RdLmVycm9yKTtyZXR1cm4gZX0sZS5zZXRBbGxVc2Vycz1mdW5jdGlvbihyKXt0aGlzLnVzZXJzPXJ9LGUuZ2V0QWxsVXNlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51c2Vyc30sZS5nZXRBbGxVc2Vyc0J1dFNlbGY9ZnVuY3Rpb24oZSl7dmFyIHQ9ci5nZXRVc2VyKCkudXNlcm5hbWU7cmV0dXJuIGUuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiByLnVzZXJuYW1lIT09dH0pfSxlLnJlbW92ZVVzZXJGcm9tVXNlcnM9ZnVuY3Rpb24ocixlKXtyZXR1cm4gci5maWx0ZXIoZnVuY3Rpb24ocil7dmFyIHQ9ZS5pbmRleE9mKHIudXNlcm5hbWUpPT09LTE7cmV0dXJuIHR9KX0sZS5pc0N1cnJlbnRVc2VyQWRtaW49ZnVuY3Rpb24oKXt2YXIgZT1yLmdldFVzZXIoKTtyZXR1cm4gZS5yb2xlLmluZGV4T2YoXCJBZG1pblwiKT4tMX0sZS5pc0N1cnJlbnRVc2VyU3VwcG9ydD1mdW5jdGlvbigpe3ZhciBlPXIuZ2V0VXNlcigpO3JldHVybiBlLnJvbGUuaW5kZXhPZihcIlN1cHBvcnRcIik+LTF9LGV9XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5mYWN0b3J5KFwiQWN0aW9uRmFjdG9yeVwiLFtcIiRodHRwXCIsXCIkcVwiLGZ1bmN0aW9uKHQsZSl7dmFyIG4sbz17fTtyZXR1cm4gby5zZXRUYXNrPWZ1bmN0aW9uKHQpe249dH0sby5nZXRUYXNrPWZ1bmN0aW9uKCl7cmV0dXJuIG59LG8uZ2V0QXNzaWduZWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHQuZ2V0KFwic3RhdGljL2FsbC11c2Vyc1wiKX0sby5nZXRBbGxvd2VkU3RhdHVzPWZ1bmN0aW9uKGUpe3JldHVybiB0LmdldChcInN0YXRpYy9hbGxvd2VkLXN0YXR1cy9cIitlKX0sby5nZXRBbGxvd2VkQnV0dG9ucz1mdW5jdGlvbihuKXt2YXIgbz1lLmRlZmVyKCk7cmV0dXJuIHQuZ2V0KFwic3RhdGljL2FjdGlvbi1idXR0b25zL1wiK24pLnRoZW4oZnVuY3Rpb24odCl7dmFyIGU9e307ZS5hc3NpZ249dC5kYXRhLmFjdGlvbkJ1dHRvbnMuYXNzaWduLGUuY29tbWVudD10LmRhdGEuYWN0aW9uQnV0dG9ucy5jb21tZW50LGUuY2hhbmdlU3RhdHVzPXQuZGF0YS5hY3Rpb25CdXR0b25zLmNoYW5nZVN0YXR1cyxlLnJlb3Blbj10LmRhdGEuYWN0aW9uQnV0dG9ucy5yZW9wZW4sZS5jbG9zZT10LmRhdGEuYWN0aW9uQnV0dG9ucy5jbG9zZSxlLmFja25vd2xlZGdlPXQuZGF0YS5hY3Rpb25CdXR0b25zLmFja25vd2xlZGdlLGUuYXdhaXRpbmdVc2VyUmVzcG9uc2U9dC5kYXRhLmFjdGlvbkJ1dHRvbnMuYXdhaXRpbmdVc2VyUmVzcG9uc2Usby5yZXNvbHZlKGUpfSkuY2F0Y2goZnVuY3Rpb24odCl7by5yZWplY3QodCl9KSxvLnByb21pc2V9LG8uYXNzaWduPWZ1bmN0aW9uKGUsbixvKXtyZXR1cm4gdC5wb3N0KFwidGlja2V0cy9hc3NpZ24vXCIrZSx7YXNzaWduZWU6bixjb21tZW50Om99KX0sby5jaGFuZ2VTdGF0dXM9ZnVuY3Rpb24oZSxuLG8pe3JldHVybiB0LnBvc3QoXCJ0aWNrZXRzL2NoYW5nZS1zdGF0dXMvXCIrZSx7c3RhdHVzOm4sY29tbWVudDpvfSl9LG8uYXdhaXRpbmdVc2VyUmVzcG9uc2U9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5wb3N0KFwidGlja2V0cy9hd2FpdGluZy11c2VyLXJlc3BvbnNlL1wiK2Use2NvbW1lbnQ6bn0pfSxvLnJlb3Blbj1mdW5jdGlvbihlLG4pe3JldHVybiB0LnBvc3QoXCJ0aWNrZXRzL3JlLW9wZW4vXCIrZSx7Y29tbWVudDpufSl9LG8uY2xvc2U9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5wb3N0KFwidGlja2V0cy9jbG9zZS9cIitlLHtjb21tZW50Om59KX0sby5hZGRDb21tZW50PWZ1bmN0aW9uKGUsbil7cmV0dXJuIHQucG9zdChcInRpY2tldHMvYWRkQ29tbWVudC9cIitlLHtjb21tZW50Om59KX0sby5kZWxldGVDb21tZW50PWZ1bmN0aW9uKGUsbil7cmV0dXJuIHQuZGVsZXRlKFwidGlja2V0cy9kZWxldGVDb21tZW50L1wiK2UuX2lkK1wiP2NvbW1lbnRJZD1cIituLl9pZCl9LG99XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiTWFpbkN0cmxcIixbXCIkc2NvcGVcIixcIiRzdGF0ZVwiLFwiQXV0aGVudGljYXRpb25cIixcIlVzZXJGYWN0b3J5XCIsXCIkd2luZG93XCIsXCJZZ05vdGlmeVwiLGZ1bmN0aW9uKGUsdCxpLG4sbyxyKXt2YXIgcz1mdW5jdGlvbigpe3ZhciB0PWkuZ2V0VXNlcigpO3Qucm9sZS5pbmRleE9mKFwiQWRtaW5cIik+LTE/ZS5pc0FkbWluPSEwOmUuaXNBZG1pbj0hMSxlLmlzUmVndWxhclVzZXI9ITAsKGkuZ2V0VXNlcigpLnJvbGUuaW5kZXhPZihcIlN1cHBvcnRcIik+LTF8fGkuZ2V0VXNlcigpLnJvbGUuaW5kZXhPZihcIkFkbWluXCIpPi0xKSYmKGUuaXNSZWd1bGFyVXNlcj0hMSl9O2UuaW5pdD1mdW5jdGlvbigpe3ZhciB0PWkuZ2V0VXNlcigpO3QmJih0LnJvbGUuaW5kZXhPZihcIkFkbWluXCIpPi0xP2UuaXNBZG1pbj0hMDplLmlzQWRtaW49ITEpfSxlLmdldFVzZXI9aS5nZXRVc2VyLGUuaXNBdXRoZW50aWNhdGVkPWkuZ2V0SXNBdXRoZW50aWNhdGVkLGUubG9nb3V0PWZ1bmN0aW9uKCl7bi5sb2dvdXQoKS50aGVuKGZ1bmN0aW9uKCl7aS5jbGVhclVzZXIoKSx0LmdvKFwidXNlcnMtbG9naW4ubG9naW5cIil9KX0sZS4kb24oXCJzdWNjZXNzZnVsLWxvZ2luXCIscyksZS5nZXRQcm9maWxlPWZ1bmN0aW9uKCl7dC5nbyhcInVzZXJzLXByb2ZpbGVcIil9LG8uYXBwPXt9LG8uYXBwLmF1dGg9ZnVuY3Rpb24oZSxuKXtcIlwiIT09ZT9yLmFsZXJ0KFwiZGFuZ2VyXCIsZS50b1N0cmluZygpLDVlMyk6bi51c2VybmFtZSYmXCJcIiE9PW4udXNlcm5hbWU/biYmKGkuc2V0VXNlcihuKSxzKCksdC5nbyhcInRpY2tldC5teS10aWNrZXRzXCIpKTp0LmdvKFwiYXV0aC1nb29nbGVcIix7aWQ6bi5faWQudG9TdHJpbmcoKSxlbWFpbDpuLmVtYWlsfSl9fV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIk1hbmFnZVVzZXJzQ3RybFwiLFtcIiRzY29wZVwiLFwiJHN0YXRlXCIsXCIkc3RhdGVQYXJhbXNcIixcIkF1dGhlbnRpY2F0aW9uXCIsXCJIZWxwZXJGYWN0b3J5XCIsXCJVc2VyRmFjdG9yeVwiLFwiWWdOb3RpZnlcIixmdW5jdGlvbihlLHMsYSxyLHQsaSxuKXt2YXIgdT1mdW5jdGlvbigpe3JldHVyblwiXCJ9LGM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT0hMD9cImZhIGZhLWNoZWNrXCI6XCJmYSBmYS1yZW1vdmVcIn0sbz1mdW5jdGlvbigpe3JldHVyblwiXCJ9LGw9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5kZXhPZihcIkFkbWluXCIpPi0xP1wiZmEgZmEtY2hlY2tcIjpcImZhIGZhLXJlbW92ZVwifTtlLmNvbmZpZz17fSxlLmNvbmZpZy51cmw9XCIvYWRtaW4vdXNlcnMtZGV0YWlsc1wiLGUuY29uZmlnLmNvbHVtbnM9W10sZS5jb25maWcuY29sdW1ucy5wdXNoKHtrZXk6XCJ1c2VybmFtZVwiLG5hbWU6XCJVc2VybmFtZVwiLGNzc0NsYXNzOlwiY29sLW1kLTZcIn0pLGUuY29uZmlnLmNvbHVtbnMucHVzaCh7a2V5OlwiaXNBY3RpdmVcIixuYW1lOlwiSXMgQWN0aXZlXCIsY3NzQ2xhc3M6XCJjb2wtbWQtM1wiLHJlbmRlcjp1LHJlbmRlckNsYXNzOmN9KSxlLmNvbmZpZy5jb2x1bW5zLnB1c2goe2tleTpcInJvbGVcIixuYW1lOlwiSXMgQWRtaW5cIixjc3NDbGFzczpcImNvbC1tZC0zXCIscmVuZGVyOm8scmVuZGVyQ2xhc3M6bH0pLGUuY29uZmlnLnNvcnRRdWVyeXN0cmluZ1BhcmFtPVwic29ydFwiLGUuY29uZmlnLm9yZGVyUXVlcnlzdHJpbmdQYXJhbT1cIm9yZGVyXCIsZS5jb25maWcucGFnZVF1ZXJ5c3RyaW5nUGFyYW09XCJwYWdlXCIsZS5jb25maWcuc2l6ZVF1ZXJ5c3RyaW5nUGFyYW09XCJzaXplXCIsZS5jb25maWcub2JqZWN0TmFtZT1cInVzZXJzXCIsZS5jb25maWcub25Sb3dDbGljaz1mdW5jdGlvbihlKXtzLmdvKFwiYWRtaW4tZWRpdFwiLHt1c2VybmFtZTplLnVzZXJuYW1lfSl9LGUuaXNBY3RpdmU9e30sZS5pc0FkbWluPXt9LGUudXNlckRldGFpbHM9e30sZS51c2VyRGV0YWlscy5nZXRVc2VyRGV0YWlscz1mdW5jdGlvbigpe3ZhciBzPWEudXNlcm5hbWU7aS5nZXRVc2VyRGV0YWlscyhzKS50aGVuKGZ1bmN0aW9uKHMpe2UudXNlckRldGFpbHMudXNlcm5hbWU9cy5kYXRhLnVzZXIudXNlcm5hbWUsZS51c2VyRGV0YWlscy5maXJzdG5hbWU9cy5kYXRhLnVzZXIuZmlyc3RuYW1lLGUudXNlckRldGFpbHMubGFzdG5hbWU9cy5kYXRhLnVzZXIubGFzdG5hbWUsZS51c2VyRGV0YWlscy5pZD1zLmRhdGEudXNlci5faWQ7dmFyIGE9cy5kYXRhLnVzZXIucm9sZTthLmluZGV4T2YoXCJBZG1pblwiKT4tMT9lLnVzZXJEZXRhaWxzLmlzQWRtaW49ITA6ZS51c2VyRGV0YWlscy5pc0FkbWluPSExLGUudXNlckRldGFpbHMuaXNBY3RpdmU9cy5kYXRhLnVzZXIuaXNBY3RpdmUsZS51c2VyRGV0YWlscy5lbWFpbD1zLmRhdGEudXNlci5lbWFpbCxlLmlzQWN0aXZlLmtleT1cImlzQWN0aXZlXCIsZS5pc0FjdGl2ZS52YWx1ZT1lLnVzZXJEZXRhaWxzLmlzQWN0aXZlLGUuaXNBZG1pbi5rZXk9XCJpc0FkbWluXCIsZS5pc0FkbWluLnZhbHVlPWUudXNlckRldGFpbHMuaXNBZG1pbn0pLmNhdGNoKGZ1bmN0aW9uKGUpe24uYWxlcnQoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byBmZXRjaCB1c2VyIGRldGFpbHMuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyl9KX0sZS51c2VyRGV0YWlscy51cGRhdGU9ZnVuY3Rpb24oKXtlLnVzZXJEZXRhaWxzLmlzQWRtaW49ZS5pc0FkbWluLnZhbHVlLGUudXNlckRldGFpbHMuaXNBY3RpdmU9ZS5pc0FjdGl2ZS52YWx1ZSxpLnVwZGF0ZVVzZXJEZXRhaWxzKGUudXNlckRldGFpbHMudXNlcm5hbWUsZS51c2VyRGV0YWlscykudGhlbihmdW5jdGlvbihlKXtuLmFsZXJ0KFwic3VjY2Vzc1wiLFwiVXNlciBkZXRhaWxzIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5XCIsNWUzKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe24uYWxlcnQoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byB1cGRhdGUgdXNlciBkZXRhaWxzLiBQbGVhc2UgdHJ5IGFnYWluIGFmdGVyIHNvbWUgdGltZS5cIiw1ZTMpfSl9LGUucmVzZXRQYXNzd29yZD17fSxlLnJlc2V0UGFzc3dvcmQucmVzZXQ9ZnVuY3Rpb24oKXt2YXIgcj1hLmlkO2kucmVzZXRQYXNzd29yZChyLGUucmVzZXRQYXNzd29yZCkudGhlbihmdW5jdGlvbihlKXtpZihlLmRhdGEuZXJyb3JzKXt2YXIgYT10LmNyZWF0ZUVycm9yTWVzc2FnZShlLmRhdGEuZXJyb3JzKTthLmZvckVhY2goZnVuY3Rpb24oZSl7bi5hbGVydChcImRhbmdlclwiLGUsNWUzKX0pfWVsc2Ugbi5hbGVydChcInN1Y2Nlc3NcIixcIlBhc3N3b3JkIGhhcyBiZWVuIHJlc2V0IHN1Y2Nlc3NmdWxseVwiLDVlMykscy5nbyhcImFkbWluLXVzZXItbWFuYWdlbWVudFwiKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe24uYWxlcnQoXCJkYW5nZXJcIixcIlRoZSByZXF1ZXN0IGNvdWxkIG5vdCBiZW4gbWFkZSBzdWNjZXNzZnVsbHkuIFBsZWFzZSB0cnkgbGF0ZXJcIiw1ZTMpfSl9fV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIkVkaXRUaWNrZXRDdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVQYXJhbXNcIixcIiRzdGF0ZVwiLFwiVGlja2V0RmFjdG9yeVwiLFwiWWdOb3RpZnlcIixcIkhlbHBlckZhY3RvcnlcIixcIkF1dGhlbnRpY2F0aW9uXCIsZnVuY3Rpb24odCxlLGEscixpLGMsbil7dC50b29sYmFyQ29uZmlnPVtbXCJoMVwiLFwicFwiLFwicHJlXCIsXCJxdW90ZVwiXSxbXCJib2xkXCIsXCJpdGFsaWNzXCIsXCJ1bmRlcmxpbmVcIixcInN0cmlrZVRocm91Z2hcIixcInVsXCIsXCJvbFwiLFwicmVkb1wiLFwidW5kb1wiLFwiY2xlYXJcIl0sW10sW1wiaW5zZXJ0TGlua1wiXV0sdC5jYW5jZWw9ZnVuY3Rpb24oKXthLmdvKFwidGlja2V0LXZpZXdcIix7aWQ6dC50aWNrZXQuaWR9KX0sdC5yZW5kZXJEYXRlPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgRGF0ZShEYXRlLnBhcnNlKHQpKS50b0xvY2FsZURhdGVTdHJpbmcoKX0sci5nZXRUaWNrZXRCeUlkKGUuaWQpLnRoZW4oZnVuY3Rpb24oZSl7aWYoZS5kYXRhLmVycm9ycyl7YS5nbyhcInRpY2tldC5teS10aWNrZXRzXCIpO3ZhciBvPWMuY3JlYXRlRXJyb3JNZXNzYWdlKGUuZGF0YS5lcnJvcnMpO28uZm9yRWFjaChmdW5jdGlvbih0KXtpLmFsZXJ0KFwiZGFuZ2VyXCIsdCw1ZTMpfSl9ZWxzZSB0LnRpY2tldD1lLmRhdGEsdC50aWNrZXQuY3VycmVudFVzZXI9bi5nZXRVc2VyKCkudXNlcm5hbWUsci5nZXRJbml0aWFsVGlja2V0RGF0YSh0LnRpY2tldC5zdGF0dXMpLnRoZW4oZnVuY3Rpb24oZSl7dC5wcmlvcml0aWVzPWUuZGF0YS5wcmlvcml0aWVzLnZhbHVlcyx0LnR5cGVzPWUuZGF0YS50eXBlcy52YWx1ZXMsdC51c2Vycz1lLmRhdGEudXNlcnMsYy5zZXRBbGxVc2Vycyh0LnVzZXJzKSx0LnN0YXR1c2VzPWUuZGF0YS5zdGF0dXNlc30pLmNhdGNoKGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKHQpLGkuYWxlcnQoXCJkYW5nZXJcIixcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byBkZXRjaCB0aGUgc3RhdGljIGRhdGEuXCIpfSl9KS5jYXRjaChmdW5jdGlvbih0KXtjb25zb2xlLmxvZyh0KSxpLmFsZXJ0KFwiZGFuZ2VyXCIsXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB0cnlpbmcgdG8gZ2V0IHRpY2tldCBkZXRhaWxzLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiLDVlMyl9KSx0LnVwZGF0ZT1mdW5jdGlvbigpe3IudXBkYXRlVGlja2V0KHQudGlja2V0Ll9pZCx0LnRpY2tldCkudGhlbihmdW5jdGlvbihlKXt0LnRpY2tldD1lLmRhdGEsaS5hbGVydChcInN1Y2Nlc3NcIixcIlRpY2tldCB1cGRhdGVkIHN1Y2Nlc3NmdWxseS5cIiw1ZTMpLGEuZ28oXCJ0aWNrZXQtdmlld1wiLHtpZDplLmRhdGEuaWR9KX0pLmNhdGNoKGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKHQpLGkuYWxlcnQoXCJkYW5nZXJcIixcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byB1cGRhdGUgdGlja2V0IGRldGFpbHMuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCIsNWUzKX0pfX1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmNvbnRyb2xsZXIoXCJOZXdUaWNrZXRDdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVcIixcIlRpY2tldEZhY3RvcnlcIixcIllnTm90aWZ5XCIsXCJDb21tb25GYWN0b3J5XCIsXCJIZWxwZXJGYWN0b3J5XCIsZnVuY3Rpb24oZSx0LGkscixvLG4pe28uZ2V0SW5pdGlhbFN0YXRpY0RhdGEoKS50aGVuKGZ1bmN0aW9uKHQpe2UudHlwZXM9dC5kYXRhLnR5cGVzLnZhbHVlcyxlLm5ld1RpY2tldC50eXBlPWUudHlwZXNbMF0udmFsdWV9KSxlLm5ld1RpY2tldD17fSxlLnRvb2xiYXJDb25maWc9W1tcImgxXCIsXCJwXCIsXCJwcmVcIixcInF1b3RlXCJdLFtcImJvbGRcIixcIml0YWxpY3NcIixcInVuZGVybGluZVwiLFwic3RyaWtlVGhyb3VnaFwiLFwidWxcIixcIm9sXCIsXCJyZWRvXCIsXCJ1bmRvXCIsXCJjbGVhclwiXSxbXSxbXCJpbnNlcnRMaW5rXCJdXTtlLnNhdmU9ZnVuY3Rpb24oKXtyZXR1cm4gZS5uZXdUaWNrZXRGb3JtLiRpbnZhbGlkPyhlLm5ld1RpY2tldEZvcm0udGl0bGUuJHRvdWNoZWQ9ITAsdm9pZChlLm5ld1RpY2tldEZvcm0uZGVzY3JpcHRpb24uJHRvdWNoZWQ9ITApKTp2b2lkIGkuY3JlYXRlTmV3VGlja2V0KHt0aXRsZTplLm5ld1RpY2tldC50aXRsZSxkZXNjcmlwdGlvbjplLm5ld1RpY2tldC5kZXNjcmlwdGlvbix0eXBlOmUubmV3VGlja2V0LnR5cGV9KS50aGVuKGZ1bmN0aW9uKGUpe2lmKGUuZGF0YS5lcnJvcnMpe3ZhciBpPW4uY3JlYXRlRXJyb3JNZXNzYWdlKGUuZGF0YS5lcnJvcnMpO2kuZm9yRWFjaChmdW5jdGlvbihlKXtyLmFsZXJ0KFwiZGFuZ2VyXCIsZSw1ZTMpfSl9ZWxzZSB0LmdvKFwidGlja2V0LXZpZXdcIix7aWQ6ZS5kYXRhLmlkfSl9LGZ1bmN0aW9uKGUpe3IuYWxlcnQoXCJkYW5nZXJcIixcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byBjcmVhdGUgbmV3IHRpY2tldC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIiw1ZTMpLGNvbnNvbGUubG9nKGUpfSl9fV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIlRhc2tDdHJsXCIsW1wiJHNjb3BlXCIsXCJUYXNrRmFjdG9yeVwiLGZ1bmN0aW9uKGEsdCl7Y29uc29sZS5sb2codCksYS5nZXRUYXNrPXQuZ2V0VGFzayxhLnRhc2s9e30sYS5jb21tZW50UGFydGlhbD1cInRlbXBsYXRlcy9wYXJ0aWFscy9jb21tZW50cy1wYXJ0aWFsLmh0bWxcIixhLiR3YXRjaChcImdldFRhc2soKVwiLGZ1bmN0aW9uKHQscyl7c3dpdGNoKGNvbnNvbGUubG9nKHQpLGEudGFzay5uYW1lPVwidGVtcGxhdGVzL3BhcnRpYWxzL1wiK3QrXCItcGFydGlhbC5odG1sXCIsdCl7Y2FzZVwiY29tbWVudFwiOmEudGFzay5zaG93VGFza1BhbmVsPSEwLGEudGFzay50aXRsZT1cIkFkZCBuZXcgY29tbWVudFwiLGEudGFzay5zaG93TWFpblBhbmVsPSExLGEudGFzay5zaG93Q29tbWVudHNQYW5lbD0hMDticmVhaztjYXNlXCJhc3NpZ25cIjphLnRhc2suc2hvd1Rhc2tQYW5lbD0hMCxhLnRhc2sudGl0bGU9XCJBc3NpZ24gdGlja2V0XCIsYS50YXNrLnNob3dNYWluUGFuZWw9ITAsYS50YXNrLnNob3dDb21tZW50c1BhbmVsPSEwfX0pfV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIlRpY2tldHNDdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVcIixmdW5jdGlvbihlLHQpe2UuaXNTdXBwb3J0PSExO3ZhciBuPUpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0aWNrZXRTeXN0ZW1Vc2VyXCIpKTtuJiYobi5yb2xlLmluZGV4T2YoXCJBZG1pblwiKT4tMXx8bi5yb2xlLmluZGV4T2YoXCJTdXBwb3J0XCIpPi0xKSYmKGUuaXNTdXBwb3J0PSEwKTt2YXIgaT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IERhdGUoRGF0ZS5wYXJzZShlKSkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9LGM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU/U3RyaW5nKGUpLnJlcGxhY2UoLzxbXj5dKz4vZ20sXCJcIik6XCJcIn0scz1mdW5jdGlvbihlKXtyZXR1cm4gZT9lOlwiVW5hc3NpZ25lZFwifTtlLmNvbmZpZz17fSxlLmNvbmZpZy5jb2x1bW5zPVtdLGUuY29uZmlnLmNvbHVtbnMucHVzaCh7a2V5OlwiaWRcIixuYW1lOlwiSURcIixjc3NDbGFzczpcImNvbC1tZC0xXCJ9KSxlLmNvbmZpZy5jb2x1bW5zLnB1c2goe2tleTpcInRpdGxlXCIsbmFtZTpcIlRpdGxlXCIsY3NzQ2xhc3M6XCJjb2wtbWQtMlwifSksZS5jb25maWcuY29sdW1ucy5wdXNoKHtrZXk6XCJkZXNjcmlwdGlvblwiLG5hbWU6XCJEZXNjcmlwdGlvblwiLGNzc0NsYXNzOlwiY29sLW1kLTJcIixyZW5kZXI6Y30pLGUuY29uZmlnLmNvbHVtbnMucHVzaCh7a2V5OlwidHlwZVwiLG5hbWU6XCJUeXBlXCIsY3NzQ2xhc3M6XCJjb2wtbWQtMVwifSksZS5jb25maWcuY29sdW1ucy5wdXNoKHtrZXk6XCJhc3NpZ25lZVwiLG5hbWU6XCJBc3NpZ25lZVwiLGNzc0NsYXNzOlwiY29sLW1kLTJcIixyZW5kZXI6c30pLGUuY29uZmlnLmNvbHVtbnMucHVzaCh7a2V5OlwiY3JlYXRlZERhdGVcIixuYW1lOlwiQ3JlYXRlZCBEYXRlXCIsY3NzQ2xhc3M6XCJjb2wtbWQtMlwiLHJlbmRlcjppfSksZS5jb25maWcuY29sdW1ucy5wdXNoKHtrZXk6XCJjcmVhdGVkQnlcIixuYW1lOlwiQ3JlYXRlZCBCeVwiLGNzc0NsYXNzOlwiY29sLW1kLTJcIn0pLGUuY29uZmlnLnNvcnRRdWVyeXN0cmluZ1BhcmFtPVwic29ydFwiLGUuY29uZmlnLm9yZGVyUXVlcnlzdHJpbmdQYXJhbT1cIm9yZGVyXCIsZS5jb25maWcucGFnZVF1ZXJ5c3RyaW5nUGFyYW09XCJwYWdlXCIsZS5jb25maWcuc2l6ZVF1ZXJ5c3RyaW5nUGFyYW09XCJzaXplXCIsZS5hY3RpdmU9XCJcIixlLmNvbmZpZy5vblJvd0NsaWNrPWZ1bmN0aW9uKGUpe3QuZ28oXCJ0aWNrZXQtdmlld1wiLHtpZDplLmlkfSl9LGUuY29uZmlnLm9iamVjdE5hbWU9XCJ0aWNrZXRzXCIsZS5pbml0aWF0ZUFsbFRpY2tldD1mdW5jdGlvbigpe2UuY29uZmlnLnVybD1cIi90aWNrZXRzL2FsbFwiLGUuJHBhcmVudC5hY3RpdmU9XCJhbGxcIn0sZS5pbml0aWF0ZU15VGlja2V0PWZ1bmN0aW9uKCl7ZS5jb25maWcudXJsPVwiL3RpY2tldHMvbXlcIixlLiRwYXJlbnQuYWN0aXZlPVwibXlcIn0sZS5pbml0aWF0ZVRvTWVUaWNrZXQ9ZnVuY3Rpb24oKXtlLmNvbmZpZy51cmw9XCIvdGlja2V0cy90by1tZVwiLGUuJHBhcmVudC5hY3RpdmU9XCJ0b21lXCJ9fV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIlZpZXdUaWNrZXRDdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVQYXJhbXNcIixcIiRzdGF0ZVwiLFwiVGlja2V0RmFjdG9yeVwiLFwiWWdOb3RpZnlcIixcIkF1dGhlbnRpY2F0aW9uXCIsXCJIZWxwZXJGYWN0b3J5XCIsXCJZZ01vZGFsXCIsXCJBY3Rpb25GYWN0b3J5XCIsZnVuY3Rpb24oZSx0LHIsbixjLGksYSxvLHMpe2UudGlja2V0PXt9LGUucmVuZGVyRGF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IERhdGUoRGF0ZS5wYXJzZShlKSkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9LGUuZWRpdD1mdW5jdGlvbigpe3IuZ28oXCJ0aWNrZXQtZWRpdFwiLHtpZDplLnRpY2tldC5pZH0pfTt2YXIgbD1mdW5jdGlvbih0LHIpe3JldHVybiBmdW5jdGlvbigpe3MuZGVsZXRlQ29tbWVudCh0LHIpLnRoZW4oZnVuY3Rpb24odCl7Y29uc29sZS5sb2codCksZS50aWNrZXQuY29tbWVudHM9dC5kYXRhLmNvbW1lbnRzLGMuYWxlcnQoXCJzdWNjZXNzXCIsXCJUaGUgY29tbWVudCB3YXMgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIiw1ZTMpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Yy5hbGVydChcImRhbmdlclwiLFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIGRlbGV0ZSBjb21tZW50LiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiLDVlMyl9KX19O2UuZGVsZXRlQ29tbWVudD1mdW5jdGlvbihlLHQpe28uY29uZmlybShsKGUsdCkpLG8ub3BlbihcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkbyB0aGlzP1wiLFwiVGhpcyB3aWxsIGRlbGV0ZSB0aGUgY29tbWVudCBwZXJtYW5lbnRseVwiKX0sbi5nZXRUaWNrZXRCeUlkKHQuaWQpLnRoZW4oZnVuY3Rpb24odCl7aWYodC5kYXRhLmVycm9ycyl7ci5nbyhcInRpY2tldC5teS10aWNrZXRzXCIpO3ZhciBuPWEuY3JlYXRlRXJyb3JNZXNzYWdlKHQuZGF0YS5lcnJvcnMpO24uZm9yRWFjaChmdW5jdGlvbihlKXtjLmFsZXJ0KFwiZGFuZ2VyXCIsZSw1ZTMpfSl9ZWxzZSBlLnRpY2tldD10LmRhdGEsZS50aWNrZXQuYXNzaWduZWU9ZS50aWNrZXQuYXNzaWduZWU/ZS50aWNrZXQuYXNzaWduZWU6XCJVbmFzc2lnbmVkXCIsZS50aWNrZXQuY3JlYXRlZERhdGU9ZS5yZW5kZXJEYXRlKGUudGlja2V0LmNyZWF0ZWREYXRlKSxlLnRpY2tldC5jdXJyZW50VXNlcj1pLmdldFVzZXIoKS51c2VybmFtZSwoZS50aWNrZXQuYXNzaWduZWU9PT1lLnRpY2tldC5jdXJyZW50VXNlcnx8ZS50aWNrZXQuY3JlYXRlZEJ5PT09ZS50aWNrZXQuY3VycmVudFVzZXJ8fGEuaXNDdXJyZW50VXNlckFkbWluKCl8fGEuaXNDdXJyZW50VXNlclN1cHBvcnQoKSkmJihlLnNob3dFZGl0PSEwKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2NvbnNvbGUubG9nKGUpLGMuYWxlcnQoXCJkYW5nZXJcIixcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byBnZXQgdGlja2V0IGRldGFpbHMuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCIsNWUzKX0pfV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIkxvZ2luQ3RybFwiLFtcIiRzY29wZVwiLFwiJHN0YXRlXCIsXCIkd2luZG93XCIsXCJVc2VyRmFjdG9yeVwiLFwiQXV0aGVudGljYXRpb25cIixmdW5jdGlvbihlLHQsbyxyLG4pe2UuZXJyb3I9ITEsZS5tZXNzYWdlPVwiXCIsZS5sb2dpbj1mdW5jdGlvbigpe3IubG9naW4oZS51c2VybmFtZSxlLnBhc3N3b3JkLGUucmVtZW1iZXIpLnRoZW4oZnVuY3Rpb24obyl7by5kYXRhLmlzQXV0aGVudGljYXRlZD8obi5zZXRVc2VyKG8uZGF0YS51c2VyKSxlLiRlbWl0KFwic3VjY2Vzc2Z1bC1sb2dpblwiKSx0LmdvKFwidGlja2V0Lm15LXRpY2tldHNcIikpOihlLmVycm9yPSEwLGUubWVzc2FnZT1vLmRhdGEubXNnKX0pLmNhdGNoKGZ1bmN0aW9uKHQpe2UuZXJyb3I9ITAsZS5tZXNzYWdlPVwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIGxvZyB5b3UgaW4uIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXJcIn0pfSxlLmdvb2dsZUxvZ2luPWZ1bmN0aW9uKCl7dmFyIGU9XCJhY2NvdW50cy9hdXRoL2dvb2dsZVwiLHQ9NjAwLHI9NDUwLG49KHdpbmRvdy5vdXRlckhlaWdodC1yKS8yLGk9KHdpbmRvdy5vdXRlcldpZHRoLXQpLzI7by5vcGVuKGUsXCJmYWNlYm9va19sb2dpblwiLFwid2lkdGg9XCIrdCtcIixoZWlnaHQ9XCIrcitcIixzY3JvbGxiYXJzPTAsdG9wPVwiK24rXCIsbGVmdD1cIitpKX19XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiTWFpbkxvZ2luQ3RybFwiLFtcIiRyb290U2NvcGVcIixcIiRzY29wZVwiLFwiJHN0YXRlXCIsZnVuY3Rpb24odCxlLG4pe2Uuc3RhdGVuYW1lPW4uY3VycmVudC5uYW1lLHQuJG9uKFwiJHN0YXRlQ2hhbmdlU3RhcnRcIixmdW5jdGlvbih0LG4sYSxvLHIpe2Uuc3RhdGVuYW1lPW4ubmFtZX0pfV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIlByb2ZpbGVDdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVcIixcIkF1dGhlbnRpY2F0aW9uXCIsXCJVc2VyRmFjdG9yeVwiLFwiSGVscGVyRmFjdG9yeVwiLFwiWWdOb3RpZnlcIixmdW5jdGlvbihlLGEscix0LHMsdSl7ZS51c2VyPXt9LGUuaW5pdD1mdW5jdGlvbigpe3QuZ2V0VXNlckJ5VXNlcm5hbWUoci5nZXRVc2VyKCkudXNlcm5hbWUpLnRoZW4oZnVuY3Rpb24ocil7aWYoci5kYXRhLmVycm9ycyl7dmFyIHQ9cy5jcmVhdGVFcnJvck1lc3NhZ2Uoci5kYXRhLmVycm9ycyk7dC5mb3JFYWNoKGZ1bmN0aW9uKGUpe3UuYWxlcnQoXCJkYW5nZXJcIix0LDVlMyl9KSxhLmdvKFwidGlja2V0Lm15LXRpY2tldHNcIil9ZWxzZSBlLnVzZXIuZmlyc3RuYW1lPXIuZGF0YS51c2VyLmZpcnN0bmFtZTtlLnVzZXIubGFzdG5hbWU9ci5kYXRhLnVzZXIubGFzdG5hbWUsZS51c2VyLnVzZXJuYW1lPXIuZGF0YS51c2VyLnVzZXJuYW1lLGUudXNlci5lbWFpbD1yLmRhdGEudXNlci5lbWFpbH0pfSxlLnVwZGF0ZT1mdW5jdGlvbigpe3QudXBkYXRlUHJvZmlsZShlLnVzZXIpLnRoZW4oZnVuY3Rpb24odCl7ZS51c2VyLmZpcnN0bmFtZT10LmRhdGEudXNlci5maXJzdG5hbWUsZS51c2VyLmxhc3RuYW1lPXQuZGF0YS51c2VyLmxhc3RuYW1lLGUudXNlci51c2VybmFtZT10LmRhdGEudXNlci51c2VybmFtZSxlLnVzZXIuZW1haWw9dC5kYXRhLnVzZXIuZW1haWwsci5zZXRVc2VyKGUudXNlciksdS5hbGVydChcInN1Y2Nlc3NcIixcIlVzZXIgZGV0YWlscyBoYXZlIGJlZW4gdXBkYXRlZCBzdWNjZXNzZnVsbHlcIiw1ZTMpLGEuZ28oXCIvXCIpfSkuY2F0Y2goZnVuY3Rpb24oZSl7dS5hbGVydChcImRhbmdlclwiLFwiVGhlcmUgd2FzIHNvbWUgZXJyb3IgdHJ5aW5nIHRvIHVwZGF0ZSB1c2VyIGRldGFpbHMuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyl9KX19XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiUmVnaXN0ZXJDdHJsXCIsW1wiJHNjb3BlXCIsXCIkc3RhdGVcIixcIlVzZXJGYWN0b3J5XCIsXCJIZWxwZXJGYWN0b3J5XCIsXCJZZ05vdGlmeVwiLGZ1bmN0aW9uKGUscix0LHMsYSl7ZS5uZXdVc2VyPXt9LGUucmVnaXN0ZXI9ZnVuY3Rpb24oKXt0LnJlZ2lzdGVyVXNlcihlLm5ld1VzZXIpLnRoZW4oZnVuY3Rpb24oZSl7aWYoZS5kYXRhLmVycm9ycyl7dmFyIHQ9cy5jcmVhdGVFcnJvck1lc3NhZ2UoZS5kYXRhLmVycm9ycyk7dC5mb3JFYWNoKGZ1bmN0aW9uKGUpe2EuYWxlcnQoXCJkYW5nZXJcIixlLDVlMyl9KX1lbHNlIGEuYWxlcnQoXCJzdWNjZXNzXCIsXCJVc2VyIGhhcyBiZWVuIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5LiBZb3UgY2FuIG5vdyBsb2dpbi5cIiw1ZTMpLHIuZ28oXCJ1c2Vycy1sb2dpbi5sb2dpblwiKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2EuYWxlcnQoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byBjcmVhdGUgdGhlIHVzZXIuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyl9KX19XSk7XG5hbmd1bGFyLm1vZHVsZShcInRpY2tldFN5c3RlbVwiKS5jb250cm9sbGVyKFwiU2V0VXNlckN0cmxcIixbXCIkc2NvcGVcIixcIiRzdGF0ZVBhcmFtc1wiLFwiJHN0YXRlXCIsXCJVc2VyRmFjdG9yeVwiLFwiWWdOb3RpZnlcIixcIkF1dGhlbnRpY2F0aW9uXCIsZnVuY3Rpb24oZSx0LHIscyxhLG4pe3ZhciBjPXQuaWQsbz10LmVtYWlsO2Uuc2V0VXNlcm5hbWU9e30sZS5zZXRVc2VybmFtZS5lbWFpbD1vLGUuc2F2ZVVzZXJuYW1lPWZ1bmN0aW9uKCl7cy5zZXRVc2VybmFtZSh7aWQ6Yyx1c2VybmFtZTplLnNldFVzZXJuYW1lLnVzZXJuYW1lfSkudGhlbihmdW5jdGlvbih0KXtpZih0LmRhdGEuZXJyb3JzKXt2YXIgcz1IZWxwZXJGYWN0b3J5LmNyZWF0ZUVycm9yTWVzc2FnZSh0LmRhdGEuZXJyb3JzKTtzLmZvckVhY2goZnVuY3Rpb24oZSl7YS5hbGVydChcImRhbmdlclwiLGUsNWUzKX0pfWVsc2Ugbi5zZXRVc2VyKHQuZGF0YS51c2VyKSxlLiRlbWl0KFwic3VjY2Vzc2Z1bC1sb2dpblwiKSxyLmdvKFwidGlja2V0Lm15LXRpY2tldHNcIiksYS5hbGVydChcInN1Y2Nlc3NcIixcIlVzZXJuYW1lIGhhcyBiZWVuIHNldCBzdWNjZXNzZnVsbHkuXCIsNWUzKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2EuYWxlcnQoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byBzZXQgdGhlIHVzZXJuYW1lLiBQbGVhc2UgdHJ5IGFnYWluIGFmdGVyIHNvbWUgdGltZS5cIiw1ZTMpfSl9fV0pO1xuYW5ndWxhci5tb2R1bGUoXCJ0aWNrZXRTeXN0ZW1cIikuY29udHJvbGxlcihcIkFjdGlvbnNDdHJsXCIsW1wiJHNjb3BlXCIsXCJBY3Rpb25GYWN0b3J5XCIsXCJIZWxwZXJGYWN0b3J5XCIsZnVuY3Rpb24odCxlLGEpe3QuZ2V0VGFzaz1lLmdldFRhc2ssdC50YXNrPXt9LHQuc2V0U2F2ZUZuPWZ1bmN0aW9uKGUpe3Quc2F2ZVRhc2s9ZX0sdC5jYW5jZWxUYXNrPWZ1bmN0aW9uKCl7ZS5zZXRUYXNrKG51bGwpLHQudGFzay5jb21tZW50PVwiXCIsdC50YXNrLnNob3dUYXNrUGFuZWw9ITEsdC50YXNrLnNob3dNYWluUGFuZWw9ITF9LHQuc2V0U2F2ZUJ0bk5hbWU9ZnVuY3Rpb24oZSl7dC5zYXZlQnRuTmFtZT1lfSx0LiR3YXRjaChcImdldFRhc2soKVwiLGZ1bmN0aW9uKGUsYSl7aWYoZSlzd2l0Y2godC50YXNrLnNob3dUYXNrUGFuZWw9ITAsdC50YXNrLnNob3dNYWluUGFuZWw9ITAsdC50YXNrLm5hbWU9XCJ0ZW1wbGF0ZXMvcGFydGlhbHMvYWN0aW9uL1wiK2UrXCItYWN0aW9uLXBhcnRpYWwuaHRtbFwiLGUpe2Nhc2VcImNvbW1lbnRcIjp0LnRhc2sudGl0bGU9XCJBZGQgbmV3IGNvbW1lbnRcIjticmVhaztjYXNlXCJhd2FpdGluZ3VzZXJzcmVzcG9uc2VcIjp0LnRhc2sudGl0bGU9XCJBd2FpdGluZyB1c2VycyByZXNwb25zZVwiO2JyZWFrO2Nhc2VcImNsb3NlXCI6dC50YXNrLnRpdGxlPVwiQ2xvc2UgdGlja2V0XCI7YnJlYWs7Y2FzZVwicmVvcGVuXCI6dC50YXNrLnRpdGxlPVwiUmVvcGVuIHRpY2tldFwiO2JyZWFrO2Nhc2VcImFja25vd2xlZGdlXCI6dC50YXNrLnRpdGxlPVwiQWNrbm93bGVkZ2UgdGlja2V0XCI7YnJlYWs7Y2FzZVwiYXNzaWduXCI6dC50YXNrLnRpdGxlPVwiQXNzaWduIHRpY2tldFwiO2JyZWFrO2Nhc2VcImNoYW5nZXN0YXR1c1wiOnQudGFzay50aXRsZT1cIkNoYW5nZSB0aWNrZXQgc3RhdHVzXCJ9fSl9XSkuY29udHJvbGxlcihcIkFzc2lnbkFjdGlvbkN0cmxcIixbXCIkc2NvcGVcIixcIkFjdGlvbkZhY3RvcnlcIixcIllnTm90aWZ5XCIsXCJIZWxwZXJGYWN0b3J5XCIsZnVuY3Rpb24odCxlLGEsbil7ZS5nZXRBc3NpZ25lZXMoKS50aGVuKGZ1bmN0aW9uKGUpe3QudXNlcnM9ZS5kYXRhLnVzZXJzLHQudXNlcnM9bi5yZW1vdmVVc2VyRnJvbVVzZXJzKHQudXNlcnMsW3QudGlja2V0LmNyZWF0ZWRCeSx0LnRpY2tldC5hc3NpZ25lZV0pLHQuYXNzaWduZWU9dC51c2Vyc1swXS51c2VybmFtZX0pLHQuc2V0U2F2ZUZuKGZ1bmN0aW9uKCl7cmV0dXJuIHQuYWN0aW9uRm9ybS5jb21tZW50LiRpbnZhbGlkfHx0LmFjdGlvbkZvcm0uYXNzaWduZWUuJGludmFsaWQ/KHQuYWN0aW9uRm9ybS5jb21tZW50LiR0b3VjaGVkPSEwLHZvaWQodC5hY3Rpb25Gb3JtLmFzc2lnbmVlLiR0b3VjaGVkPSEwKSk6dm9pZCBlLmFzc2lnbih0LnRpY2tldC5pZCx0LmFzc2lnbmVlLHQudGFzay5jb21tZW50KS50aGVuKGZ1bmN0aW9uKGUpe2lmKGUuZGF0YS5lcnJvcnMpe3ZhciBzPW4uY3JlYXRlRXJyb3JNZXNzYWdlKGUuZGF0YS5lcnJvcnMpO3JldHVybiB2b2lkIHMuZm9yRWFjaChmdW5jdGlvbih0KXthLmFsZXJ0KFwiZGFuZ2VyXCIsdCw1ZTMpfSl9dC50aWNrZXQuY29tbWVudHM9ZS5kYXRhLmNvbW1lbnRzLHQudGlja2V0LmFzc2lnbmVlPWUuZGF0YS5hc3NpZ25lZSxhLmFsZXJ0KFwic3VjY2Vzc1wiLFwiVGhlIGFzc2lnbmVlIGhhcyBiZWVuIGNoYW5nZWQgc3VjY2Vzc2Z1bGx5XCIsNWUzKSx0LmNhbmNlbFRhc2soKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2EuYWxlcnQoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byBhc3NpZ24gdGhlIHRpY2tldC4gUGxlYXNlIHRyeSBhZ2FpbiBhZnRlciBzb21lIHRpbWUuXCIsNWUzKSx0LmNhbmNlbFRhc2soKX0pfSksdC5zZXRTYXZlQnRuTmFtZShcIkFzc2lnbiBUaWNrZXRcIil9XSkuY29udHJvbGxlcihcIkNoYW5nZVN0YXR1c0FjdGlvbkN0cmxcIixbXCIkc2NvcGVcIixcIkFjdGlvbkZhY3RvcnlcIixcIllnTm90aWZ5XCIsZnVuY3Rpb24odCxlLGEpe3ZhciBuPXQudGlja2V0LnN0YXR1cztlLmdldEFsbG93ZWRTdGF0dXMobikudGhlbihmdW5jdGlvbihlKXt0LmFsbG93ZWRTdGF0dXM9ZS5kYXRhLnN0YXR1cy5hbGxvd2VkLHQubmV3U3RhdHVzPXQuYWxsb3dlZFN0YXR1c1swXX0pLHQuc2V0U2F2ZUZuKGZ1bmN0aW9uKCl7cmV0dXJuIHQuYWN0aW9uRm9ybS5jb21tZW50LiRpbnZhbGlkfHx0LmFjdGlvbkZvcm0ubmV3U3RhdHVzLiRpbnZhbGlkPyh0LmFjdGlvbkZvcm0uY29tbWVudC4kdG91Y2hlZD0hMCx2b2lkKHQuYWN0aW9uRm9ybS5uZXdTdGF0dXMuJHRvdWNoZWQ9ITApKTp2b2lkIGUuY2hhbmdlU3RhdHVzKHQudGlja2V0LmlkLHQubmV3U3RhdHVzLHQudGFzay5jb21tZW50KS50aGVuKGZ1bmN0aW9uKGUpe3QudGlja2V0LmNvbW1lbnRzPWUuZGF0YS5jb21tZW50cyx0LnRpY2tldC5zdGF0dXM9ZS5kYXRhLnN0YXR1cyxhLmFsZXJ0KFwic3VjY2Vzc1wiLFwiVGhlIGFzc2lnbmVlIGhhcyBiZWVuIGNoYW5nZWQgc3VjY2Vzc2Z1bGx5XCIsNWUzKSx0LmNhbmNlbFRhc2soKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2EuYWxlcnQoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byBjaGFuZ2UgdGhlIHRpY2tldCBzdGF0dXMuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyksdC5jYW5jZWxUYXNrKCl9KX0pLHQuc2V0U2F2ZUJ0bk5hbWUoXCJDaGFuZ2UgU3RhdHVzXCIpfV0pLmNvbnRyb2xsZXIoXCJDb21tZW50QWN0aW9uQ3RybFwiLFtcIiRzY29wZVwiLFwiQWN0aW9uRmFjdG9yeVwiLFwiWWdOb3RpZnlcIixmdW5jdGlvbih0LGUsYSl7dC5zZXRTYXZlRm4oZnVuY3Rpb24oKXtyZXR1cm4gdC5hY3Rpb25Gb3JtLmNvbW1lbnQuJGludmFsaWQ/dm9pZCh0LmFjdGlvbkZvcm0uY29tbWVudC4kdG91Y2hlZD0hMCk6dm9pZCBlLmFkZENvbW1lbnQodC50aWNrZXQuaWQsdC50YXNrLmNvbW1lbnQpLnRoZW4oZnVuY3Rpb24oZSl7dC50aWNrZXQuY29tbWVudHM9ZS5kYXRhLmNvbW1lbnRzLGEuYWxlcnQoXCJzdWNjZXNzXCIsXCJUaGUgY29tbWVudCBoYXMgYmVlbiBhZGRlZCBzdWNjZXNzZnVsbHlcIiw1ZTMpLHQuY2FuY2VsVGFzaygpfSkuY2F0Y2goZnVuY3Rpb24oZSl7YS5hbGVydChcImRhbmdlclwiLFwiVGhlcmUgd2FzIHNvbWUgZXJyb3IgdHJ5aW5nIHRvIGFkZCBjb21tZW50LiBQbGVhc2UgdHJ5IGFnYWluIGFmdGVyIHNvbWUgdGltZS5cIiw1ZTMpLHQuY2FuY2VsVGFzaygpfSl9KSx0LnNldFNhdmVCdG5OYW1lKFwiQWRkIENvbW1lbnRcIil9XSkuY29udHJvbGxlcihcIkNsb3NlQWN0aW9uQ3RybFwiLFtcIiRzY29wZVwiLFwiQWN0aW9uRmFjdG9yeVwiLFwiWWdOb3RpZnlcIixmdW5jdGlvbih0LGUsYSl7dC5zZXRTYXZlRm4oZnVuY3Rpb24oKXtyZXR1cm4gdC5hY3Rpb25Gb3JtLmNvbW1lbnQuJGludmFsaWQ/dm9pZCh0LmFjdGlvbkZvcm0uY29tbWVudC4kdG91Y2hlZD0hMCk6dm9pZCBlLmNsb3NlKHQudGlja2V0LmlkLHQudGFzay5jb21tZW50KS50aGVuKGZ1bmN0aW9uKGUpe3QudGlja2V0LmNvbW1lbnRzPWUuZGF0YS5jb21tZW50cyx0LnRpY2tldC5zdGF0dXM9ZS5kYXRhLnN0YXR1cyxhLmFsZXJ0KFwic3VjY2Vzc1wiLFwiVGhlIHN0YXR1cyBoYXMgYmVlbiBjaGFuZ2VkIHN1Y2Nlc3NmdWxseVwiLDVlMyksdC5jYW5jZWxUYXNrKCl9KS5jYXRjaChmdW5jdGlvbihlKXthLmFsZXJ0KFwiZGFuZ2VyXCIsXCJUaGVyZSB3YXMgc29tZSBlcnJvciB0cnlpbmcgdG8gY2hhbmdlIHRoZSB0aWNrZXQgc3RhdHVzLiBQbGVhc2UgdHJ5IGFnYWluIGFmdGVyIHNvbWUgdGltZS5cIiw1ZTMpLHQuY2FuY2VsVGFzaygpfSl9KSx0LnNldFNhdmVCdG5OYW1lKFwiQ2xvc2VcIil9XSkuY29udHJvbGxlcihcIlJlb3BlbkFjdGlvbkN0cmxcIixbXCIkc2NvcGVcIixcIkFjdGlvbkZhY3RvcnlcIixcIllnTm90aWZ5XCIsZnVuY3Rpb24odCxlLGEpe3Quc2V0U2F2ZUZuKGZ1bmN0aW9uKCl7cmV0dXJuIHQuYWN0aW9uRm9ybS5jb21tZW50LiRpbnZhbGlkP3ZvaWQodC5hY3Rpb25Gb3JtLmNvbW1lbnQuJHRvdWNoZWQ9ITApOnZvaWQgZS5yZW9wZW4odC50aWNrZXQuaWQsdC50YXNrLmNvbW1lbnQpLnRoZW4oZnVuY3Rpb24oZSl7dC50aWNrZXQuY29tbWVudHM9ZS5kYXRhLmNvbW1lbnRzLHQudGlja2V0LnN0YXR1cz1lLmRhdGEuc3RhdHVzLGEuYWxlcnQoXCJzdWNjZXNzXCIsXCJUaGUgc3RhdHVzIGhhcyBiZWVuIGNoYW5nZWQgc3VjY2Vzc2Z1bGx5XCIsNWUzKSx0LmNhbmNlbFRhc2soKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2EuYWxlcnQoXCJkYW5nZXJcIixcIlRoZXJlIHdhcyBzb21lIGVycm9yIHRyeWluZyB0byBjaGFuZ2UgdGhlIHRpY2tldCBzdGF0dXMuIFBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgc29tZSB0aW1lLlwiLDVlMyksdC5jYW5jZWxUYXNrKCl9KX0pLHQuc2V0U2F2ZUJ0bk5hbWUoXCJSZW9wZW5cIil9XSkuY29udHJvbGxlcihcIkF3YWl0aW5nQWN0aW9uQ3RybFwiLFtcIiRzY29wZVwiLFwiQWN0aW9uRmFjdG9yeVwiLFwiWWdOb3RpZnlcIixmdW5jdGlvbih0LGUsYSl7dC5zZXRTYXZlRm4oZnVuY3Rpb24oKXtyZXR1cm4gdC5hY3Rpb25Gb3JtLmNvbW1lbnQuJGludmFsaWQ/dm9pZCh0LmFjdGlvbkZvcm0uY29tbWVudC4kdG91Y2hlZD0hMCk6dm9pZCBlLmF3YWl0aW5nVXNlclJlc3BvbnNlKHQudGlja2V0LmlkLHQudGFzay5jb21tZW50KS50aGVuKGZ1bmN0aW9uKGUpe3QudGlja2V0LmNvbW1lbnRzPWUuZGF0YS5jb21tZW50cyx0LnRpY2tldC5zdGF0dXM9ZS5kYXRhLnN0YXR1cyxhLmFsZXJ0KFwic3VjY2Vzc1wiLFwiVGhlIHN0YXR1cyBoYXMgYmVlbiBjaGFuZ2VkIHN1Y2Nlc3NmdWxseVwiLDVlMyksdC5jYW5jZWxUYXNrKCl9KS5jYXRjaChmdW5jdGlvbihlKXthLmFsZXJ0KFwiZGFuZ2VyXCIsXCJUaGVyZSB3YXMgc29tZSBlcnJvciB0cnlpbmcgdG8gY2hhbmdlIHRoZSB0aWNrZXQgc3RhdHVzLiBQbGVhc2UgdHJ5IGFnYWluIGFmdGVyIHNvbWUgdGltZS5cIiw1ZTMpLHQuY2FuY2VsVGFzaygpfSl9KSx0LnNldFNhdmVCdG5OYW1lKFwiQ2hhbmdlIFN0YXR1c1wiKX1dKTtcbmFuZ3VsYXIubW9kdWxlKFwidGlja2V0U3lzdGVtXCIpLmNvbnRyb2xsZXIoXCJCdXR0b25Hcm91cEN0cmxcIixbXCIkc2NvcGVcIixcIkFjdGlvbkZhY3RvcnlcIixmdW5jdGlvbih0LG8pe3QuYnV0dG9uZ3JvdXA9e30sdC4kd2F0Y2goXCJ0aWNrZXQuc3RhdHVzXCIsZnVuY3Rpb24obil7biYmby5nZXRBbGxvd2VkQnV0dG9ucyhuKS50aGVuKGZ1bmN0aW9uKG8pe3QuYnV0dG9uZ3JvdXAuc2hvd0Fzc2lnbj1vLmFzc2lnbix0LmJ1dHRvbmdyb3VwLnNob3dDb21tZW50PW8uY29tbWVudCx0LmJ1dHRvbmdyb3VwLnNob3djaGFuZ2VTdGF0dXM9by5jaGFuZ2VTdGF0dXMsdC5idXR0b25ncm91cC5zaG93UmVvcGVuPW8ucmVvcGVuLHQuYnV0dG9uZ3JvdXAuc2hvd0Nsb3NlPW8uY2xvc2UsdC5idXR0b25ncm91cC5zaG93QWNrbm93bGVkZ2U9by5hY2tub3dsZWRnZSx0LmJ1dHRvbmdyb3VwLnNob3dBd2FpdGluZ1VzZXJzUmVzcG9uc2U9by5hd2FpdGluZ1VzZXJSZXNwb25zZX0pfSksdC5idXR0b25ncm91cC5jb21tZW50PWZ1bmN0aW9uKCl7by5zZXRUYXNrKFwiY29tbWVudFwiKX0sdC5idXR0b25ncm91cC5hc3NpZ249ZnVuY3Rpb24oKXtvLnNldFRhc2soXCJhc3NpZ25cIil9LHQuYnV0dG9uZ3JvdXAuY2hhbmdlU3RhdHVzPWZ1bmN0aW9uKCl7by5zZXRUYXNrKFwiY2hhbmdlc3RhdHVzXCIpfSx0LmJ1dHRvbmdyb3VwLmNsb3NlPWZ1bmN0aW9uKCl7by5zZXRUYXNrKFwiY2xvc2VcIil9LHQuYnV0dG9uZ3JvdXAucmVvcGVuPWZ1bmN0aW9uKCl7by5zZXRUYXNrKFwicmVvcGVuXCIpfSx0LmJ1dHRvbmdyb3VwLmFja25vd2xlZGdlPWZ1bmN0aW9uKCl7by5zZXRUYXNrKFwiYWNrbm93bGVkZ2VcIil9LHQuYnV0dG9uZ3JvdXAuYXdhaXRpbmd1c2Vyc3Jlc3BvbnNlPWZ1bmN0aW9uKCl7by5zZXRUYXNrKFwiYXdhaXRpbmd1c2Vyc3Jlc3BvbnNlXCIpfX1dKTsiXSwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
